/*!
 * jQuery JavaScript Library v2.1.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:11Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */

/**
 * @license AngularJS v1.3.0-beta.18
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */

//    PouchDB 3.0.6
//    
//    (c) 2012-2014 Dale Harvey and the PouchDB team
//    PouchDB may be freely distributed under the Apache license, version 2.0.
//    For all details and documentation:
//    http://pouchdb.com

// parseUri 1.2.2
// (c) Steven Levithan <stevenlevithan.com>
// MIT License

/*!
Math.uuid.js (v1.4)
http://www.broofa.com
mailto:robert@broofa.com

Copyright (c) 2010 Robert Kieffer
Dual licensed under the MIT and GPL licenses.
*/

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

//based off rsvp https://github.com/tildeio/rsvp.js
//license https://github.com/tildeio/rsvp.js/blob/master/LICENSE
//https://github.com/tildeio/rsvp.js/blob/master/lib/rsvp/asap.js

/*!
   angular-block-ui v0.1.1
   (c) 2014 (null) McNull https://github.com/McNull/angular-block-ui
   License: MIT
*/

(function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)})(typeof window!="undefined"?window:this,function(window,noGlobal){function isArraylike(e){var t=e.length,n=jQuery.type(e);return n==="function"||jQuery.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function winnow(e,t,n){if(jQuery.isFunction(t))return jQuery.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return jQuery.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(risSimple.test(t))return jQuery.filter(t,e,n);t=jQuery.filter(t,e)}return jQuery.grep(e,function(e){return indexOf.call(t,e)>=0!==n})}function sibling(e,t){while((e=e[t])&&e.nodeType!==1);return e}function createOptions(e){var t=optionsCache[e]={};return jQuery.each(e.match(rnotwhite)||[],function(e,n){t[n]=!0}),t}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(e,t,n){var r;if(n===undefined&&e.nodeType===1){r="data-"+t.replace(rmultiDash,"-$1").toLowerCase(),n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:rbrace.test(n)?jQuery.parseJSON(n):n}catch(i){}data_user.set(e,t,n)}else n=undefined}return n}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(e){}}function manipulationTarget(e,t){return jQuery.nodeName(e,"table")&&jQuery.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function disableScript(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function restoreScript(e){var t=rscriptTypeMasked.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function setGlobalEval(e,t){var n=0,r=e.length;for(;n<r;n++)data_priv.set(e[n],"globalEval",!t||data_priv.get(t[n],"globalEval"))}function cloneCopyEvent(e,t){var n,r,i,s,o,u,a,f;if(t.nodeType!==1)return;if(data_priv.hasData(e)){s=data_priv.access(e),o=data_priv.set(t,s),f=s.events;if(f){delete o.handle,o.events={};for(i in f)for(n=0,r=f[i].length;n<r;n++)jQuery.event.add(t,i,f[i][n])}}data_user.hasData(e)&&(u=data_user.access(e),a=jQuery.extend({},u),data_user.set(t,a))}function getAll(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&jQuery.nodeName(e,t)?jQuery.merge([e],n):n}function fixInput(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&rcheckableType.test(e.type))t.checked=e.checked;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function actualDisplay(e,t){var n,r=jQuery(t.createElement(e)).appendTo(t.body),i=window.getDefaultComputedStyle&&(n=window.getDefaultComputedStyle(r[0]))?n.display:jQuery.css(r[0],"display");return r.detach(),i}function defaultDisplay(e){var t=document,n=elemdisplay[e];if(!n){n=actualDisplay(e,t);if(n==="none"||!n)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=iframe[0].contentDocument,t.write(),t.close(),n=actualDisplay(e,t),iframe.detach();elemdisplay[e]=n}return n}function curCSS(e,t,n){var r,i,s,o,u=e.style;return n=n||getStyles(e),n&&(o=n.getPropertyValue(t)||n[t]),n&&(o===""&&!jQuery.contains(e.ownerDocument,e)&&(o=jQuery.style(e,t)),rnumnonpx.test(o)&&rmargin.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),o!==undefined?o+"":o}function addGetHookIf(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function vendorPropName(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=cssPrefixes.length;while(i--){t=cssPrefixes[i]+n;if(t in e)return t}return r}function setPositiveNumber(e,t,n){var r=rnumsplit.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function augmentWidthOrHeight(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=jQuery.css(e,n+cssExpand[s],!0,i)),r?(n==="content"&&(o-=jQuery.css(e,"padding"+cssExpand[s],!0,i)),n!=="margin"&&(o-=jQuery.css(e,"border"+cssExpand[s]+"Width",!0,i))):(o+=jQuery.css(e,"padding"+cssExpand[s],!0,i),n!=="padding"&&(o+=jQuery.css(e,"border"+cssExpand[s]+"Width",!0,i)));return o}function getWidthOrHeight(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=getStyles(e),o=jQuery.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=curCSS(e,t,s);if(i<0||i==null)i=e.style[t];if(rnumnonpx.test(i))return i;r=o&&(support.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+augmentWidthOrHeight(e,t,n||(o?"border":"content"),r,s)+"px"}function showHide(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=data_priv.get(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&isHidden(r)&&(s[o]=data_priv.access(r,"olddisplay",defaultDisplay(r.nodeName)))):(i=isHidden(r),(n!=="none"||!i)&&data_priv.set(r,"olddisplay",i?n:jQuery.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function Tween(e,t,n,r,i){return new Tween.prototype.init(e,t,n,r,i)}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function genFx(e,t){var n,r=0,i={height:e};t=t?1:0;for(;r<4;r+=2-t)n=cssExpand[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function createTween(e,t,n){var r,i=(tweeners[t]||[]).concat(tweeners["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function defaultPrefilter(e,t,n){var r,i,s,o,u,a,f,l,c=this,h={},p=e.style,d=e.nodeType&&isHidden(e),v=data_priv.get(e,"fxshow");n.queue||(u=jQuery._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,c.always(function(){c.always(function(){u.unqueued--,jQuery.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],f=jQuery.css(e,"display"),l=f==="none"?data_priv.get(e,"olddisplay")||defaultDisplay(e.nodeName):f,l==="inline"&&jQuery.css(e,"float")==="none"&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(rfxtypes.exec(i)){delete t[r],s=s||i==="toggle";if(i===(d?"hide":"show")){if(i!=="show"||!v||v[r]===undefined)continue;d=!0}h[r]=v&&v[r]||jQuery.style(e,r)}else f=undefined}if(!jQuery.isEmptyObject(h)){v?"hidden"in v&&(d=v.hidden):v=data_priv.access(e,"fxshow",{}),s&&(v.hidden=!d),d?jQuery(e).show():c.done(function(){jQuery(e).hide()}),c.done(function(){var t;data_priv.remove(e,"fxshow");for(t in h)jQuery.style(e,t,h[t])});for(r in h)o=createTween(d?v[r]:0,r,c),r in v||(v[r]=o.start,d&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}else(f==="none"?defaultDisplay(e.nodeName):f)==="inline"&&(p.display=f)}function propFilter(e,t){var n,r,i,s,o;for(n in e){r=jQuery.camelCase(n),i=t[r],s=e[n],jQuery.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=jQuery.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Animation(e,t,n){var r,i,s=0,o=animationPrefilters.length,u=jQuery.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=fxNow||createFxNow(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:jQuery.extend({},t),opts:jQuery.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:fxNow||createFxNow(),duration:n.duration,tweens:[],createTween:function(t,n){var r=jQuery.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;propFilter(l,f.opts.specialEasing);for(;s<o;s++){r=animationPrefilters[s].call(f,e,l,f.opts);if(r)return r}return jQuery.map(l,createTween,f),jQuery.isFunction(f.opts.start)&&f.opts.start.call(e,f),jQuery.fx.timer(jQuery.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function addToPrefiltersOrTransports(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function inspectPrefiltersOrTransports(e,t,n,r){function o(u){var a;return i[u]=!0,jQuery.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===transports;return o(t.dataTypes[0])||!i["*"]&&o("*")}function ajaxExtend(e,t){var n,r,i=jQuery.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&jQuery.extend(!0,e,r),e}function ajaxHandleResponses(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==a[0]&&a.unshift(s),n[s]}function ajaxConvert(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function buildParams(e,t,n,r){var i;if(jQuery.isArray(t))jQuery.each(t,function(t,i){n||rbracket.test(e)?r(e,i):buildParams(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&jQuery.type(t)==="object")for(i in t)buildParams(e+"["+i+"]",t[i],n,r);else r(e,t)}function getWindow(e){return jQuery.isWindow(e)?e:e.nodeType===9&&e.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},document=window.document,version="2.1.1",jQuery=function(e,t){return new jQuery.fn.init(e,t)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(e,t){return t.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:slice.call(this)},pushStack:function(e){var t=jQuery.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return jQuery.each(this,e,t)},map:function(e){return this.pushStack(jQuery.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!jQuery.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((e=arguments[u])!=null)for(t in e){n=o[t],r=e[t];if(o===r)continue;f&&r&&(jQuery.isPlainObject(r)||(i=jQuery.isArray(r)))?(i?(i=!1,s=n&&jQuery.isArray(n)?n:[]):s=n&&jQuery.isPlainObject(n)?n:{},o[t]=jQuery.extend(f,s,r)):r!==undefined&&(o[t]=r)}return o},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return jQuery.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){return!jQuery.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return jQuery.type(e)!=="object"||e.nodeType||jQuery.isWindow(e)?!1:e.constructor&&!hasOwn.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?class2type[toString.call(e)]||"object":typeof e},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(e){return e.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=isArraylike(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:function(e){return e==null?"":(e+"").replace(rtrim,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(isArraylike(Object(e))?jQuery.merge(n,typeof e=="string"?[e]:e):push.call(n,e)),n},inArray:function(e,t,n){return t==null?-1:indexOf.call(t,e,n)},merge:function(e,t){var n=+t.length,r=0,i=e.length;for(;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=isArraylike(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&u.push(r);else for(i in e)r=t(e[i],i,n),r!=null&&u.push(r);return concat.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return typeof t=="string"&&(n=e[t],t=e,e=n),jQuery.isFunction(e)?(r=slice.call(arguments,2),i=function(){return e.apply(t||this,r.concat(slice.call(arguments)))},i.guid=e.guid=e.guid||jQuery.guid++,i):undefined},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){class2type["[object "+t+"]"]=t.toLowerCase()});var Sizzle=function(e){function st(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;(t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[];if(!e||typeof e!="string")return r;if((l=t.nodeType)!==1&&l!==9)return[];if(v&&!i){if(s=Z.exec(e))if(f=s[1]){if(l===9){u=t.getElementById(f);if(!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return P.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){y=g=w,S=t,x=l===9&&e;if(l===1&&t.nodeName.toLowerCase()!=="object"){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+mt(d[c]);S=et.test(e)&&dt(t.parentNode)||t,x=d.join(",")}if(x)try{return P.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ot(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ut(e){return e[w]=!0,e}function at(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ft(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function lt(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function pt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function dt(e){return e&&typeof e.getElementsByTagName!==L&&e}function vt(){}function mt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function gt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=x++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){a=t[w]||(t[w]={});if((u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];a[r]=f;if(f[2]=e(t,n,o))return!0}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bt(e,t,n){var r=0,i=t.length;for(;r<i;r++)st(e,t[r],n);return n}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[w]&&(r=Et(r)),i&&!i[w]&&(i=Et(i,s)),ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||bt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?B.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):P.apply(o,g)})}function St(e){var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,!0),c=gt(function(e){return B.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=r.relative[e[a].type])h=[gt(yt(h),n)];else{n=r.filter[e[a].type].apply(null,e[a].matches);if(n[w]){i=++a;for(;i<s;i++)if(r.relative[e[i].type])break;return Et(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(z,"$1"),n,a<i&&St(e.slice(a,i)),i<s&&St(e=e.slice(i)),i<s&&mt(e))}h.push(n)}return yt(h)}function xt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=b==null?1:Math.random()||.1,x=w.length;l&&(f=o!==p&&o);for(;m!==x&&(c=w[m])!=null;m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}v+=m;if(n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)!g[m]&&!y[m]&&(y[m]=_.call(a));y=wt(y)}P.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(a)}return l&&(S=E,f=b),g};return n?ut(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ot(),N=ot(),C=ot(),k=function(e,t){return e===t&&(c=!0),0},L=typeof undefined,A=1<<31,O={}.hasOwnProperty,M=[],_=M.pop,D=M.push,P=M.push,H=M.slice,B=M.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=I.replace("w","w#"),R="\\["+F+"*("+I+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+F+"*\\]",U=":("+I+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|"+".*"+")\\)|)",z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),X=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),$=new RegExp(U),J=new RegExp("^"+q+"$"),K={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{P.apply(M=H.call(E.childNodes),E.childNodes),M[E.childNodes.length].nodeType}catch(it){P={apply:M.length?function(e,t){D.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=st.support={},s=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},h=st.setDocument=function(e){var t,i=e?e.ownerDocument||e:E,o=i.defaultView;if(i===p||i.nodeType!==9||!i.documentElement)return p;p=i,d=i.documentElement,v=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){h()},!1):o.attachEvent&&o.attachEvent("onunload",function(){h()})),n.attributes=at(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=at(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(i.getElementsByClassName)&&at(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),n.getById=at(function(e){return d.appendChild(e).id=w,!i.getElementsByName||!i.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==L&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&v)return t.getElementsByClassName(e)},g=[],m=[];if(n.qsa=Y.test(i.querySelectorAll))at(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+j+")"),e.querySelectorAll(":checked").length||m.push(":checked")}),at(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")});return(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===E&&b(E,e)?-1:t===i||t.ownerDocument===E&&b(E,t)?1:l?B.call(l,e)-B.call(l,t):0:r&4?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:l?B.call(l,e)-B.call(l,t):0;if(s===o)return lt(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?lt(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},i},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){(e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']");if(n.matchesSelector&&v&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},st.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&O.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):undefined;return s!==undefined?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,r=[],i=0,s=0;c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k);if(c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=st.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=st.selectors={cacheLength:50,createPseudo:ut,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=B.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ut(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ut(function(e){return J.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[n<0?n+t:n]}),even:pt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ht(t);return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,o=st.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=W.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=X.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length);for(o in r.filter)(i=K[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?st.error(e):N(e,a).slice(0)},u=st.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=St(t[n]),s[w]?r.push(s):i.push(s);s=C(e,xt(i,r)),s.selector=e}return s},a=st.select=function(e,t,i,s){var a,f,l,c,h,p=typeof e=="function"&&e,d=!s&&o(e=p.selector||e);i=i||[];if(d.length===1){f=d[0]=d[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&v&&r.relative[f[1].type]){t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0];if(!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){l=f[a];if(r.relative[c=l.type])break;if(h=r.find[c])if(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&dt(t.parentNode)||t)){f.splice(a,1),e=s.length&&mt(f);if(!e)return P.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&dt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=at(function(e){return e.compareDocumentPosition(p.createElement("div"))&1}),at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||ft("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!at(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&ft("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),at(function(e){return e.getAttribute("disabled")==null})||ft(j,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),st}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?jQuery.find.matchesSelector(r,e)?[r]:[]:jQuery.find.matches(e,jQuery.grep(t,function(e){return e.nodeType===1}))},jQuery.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if(typeof e!="string")return this.pushStack(jQuery(e).filter(function(){for(t=0;t<n;t++)if(jQuery.contains(i[t],this))return!0}));for(t=0;t<n;t++)jQuery.find(e,i[t],r);return r=this.pushStack(n>1?jQuery.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(winnow(this,e||[],!1))},not:function(e){return this.pushStack(winnow(this,e||[],!0))},is:function(e){return!!winnow(this,typeof e=="string"&&rneedsContext.test(e)?jQuery(e):e||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(e,t){var n,r;if(!e)return this;if(typeof e=="string"){e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?n=[null,e,null]:n=rquickExpr.exec(e);if(n&&(n[1]||!t)){if(n[1]){t=t instanceof jQuery?t[0]:t,jQuery.merge(this,jQuery.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:document,!0));if(rsingleTag.test(n[1])&&jQuery.isPlainObject(t))for(n in t)jQuery.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=document.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=document,this.selector=e,this}return!t||t.jquery?(t||rootjQuery).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):jQuery.isFunction(e)?typeof rootjQuery.ready!="undefined"?rootjQuery.ready(e):e(jQuery):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),jQuery.makeArray(e,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&e.nodeType!==9)if(e.nodeType===1){if(i&&jQuery(e).is(n))break;r.push(e)}return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}}),jQuery.fn.extend({has:function(e){var t=jQuery(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++)if(jQuery.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=rneedsContext.test(e)||typeof e!="string"?jQuery(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&jQuery.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?jQuery.unique(s):s)},index:function(e){return e?typeof e=="string"?indexOf.call(jQuery(e),this[0]):indexOf.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),jQuery.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return jQuery.dir(e,"parentNode")},parentsUntil:function(e,t,n){return jQuery.dir(e,"parentNode",n)},next:function(e){return sibling(e,"nextSibling")},prev:function(e){return sibling(e,"previousSibling")},nextAll:function(e){return jQuery.dir(e,"nextSibling")},prevAll:function(e){return jQuery.dir(e,"previousSibling")},nextUntil:function(e,t,n){return jQuery.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return jQuery.dir(e,"previousSibling",n)},siblings:function(e){return jQuery.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return jQuery.sibling(e.firstChild)},contents:function(e){return e.contentDocument||jQuery.merge([],e.childNodes)}},function(e,t){jQuery.fn[e]=function(n,r){var i=jQuery.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=jQuery.filter(r,i)),this.length>1&&(guaranteedUnique[e]||jQuery.unique(i),rparentsprev.test(e)&&i.reverse()),this.pushStack(i)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(e){e=typeof e=="string"?optionsCache[e]||createOptions(e):jQuery.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){t=e.memory&&c,n=!0,o=i||0,i=0,s=u.length,r=!0;for(;u&&o<s;o++)if(u[o].apply(c[0],c[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(a?a.length&&f(a.shift()):t?u=[]:l.disable())},l={add:function(){if(u){var n=u.length;(function o(t){jQuery.each(t,function(t,n){var r=jQuery.type(n);r==="function"?(!e.unique||!l.has(n))&&u.push(n):n&&n.length&&r!=="string"&&o(n)})})(arguments),r?s=u.length:t&&(i=n,f(t))}return this},remove:function(){return u&&jQuery.each(arguments,function(e,t){var n;while((n=jQuery.inArray(t,u,n))>-1)u.splice(n,1),r&&(n<=s&&s--,n<=o&&o--)}),this},has:function(e){return e?jQuery.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],s=0,this},disable:function(){return u=a=t=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,t||l.disable(),this},locked:function(){return!a},fireWith:function(e,t){return u&&(!n||a)&&(t=t||[],t=[e,t.slice?t.slice():t],r?a.push(t):f(t)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},jQuery.extend({Deferred:function(e){var t=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return jQuery.Deferred(function(n){jQuery.each(t,function(t,s){var o=jQuery.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&jQuery.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?jQuery.extend(e,r):r}},i={};return r.pipe=r.then,jQuery.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=slice.call(arguments),r=n.length,i=r!==1||e&&jQuery.isFunction(e.promise)?r:0,s=i===1?e:jQuery.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?slice.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&jQuery.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}});var readyList;jQuery.fn.ready=function(e){return jQuery.ready.promise().done(e),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(e){e?jQuery.readyWait++:jQuery.ready(!0)},ready:function(e){if(e===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(e!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))}}),jQuery.ready.promise=function(e){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(e)},jQuery.ready.promise();var access=jQuery.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(jQuery.type(n)==="object"){i=!0;for(u in n)jQuery.access(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,jQuery.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(jQuery(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s};jQuery.acceptData=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(e){if(!Data.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=Data.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,jQuery.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),s=this.cache[i];if(typeof t=="string")s[t]=n;else if(jQuery.isEmptyObject(s))jQuery.extend(this.cache[i],t);else for(r in t)s[r]=t[r];return s},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;return t===undefined||t&&typeof t=="string"&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,jQuery.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,s=this.key(e),o=this.cache[s];if(t===undefined)this.cache[s]={};else{jQuery.isArray(t)?r=t.concat(t.map(jQuery.camelCase)):(i=jQuery.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(rnotwhite)||[])),n=r.length;while(n--)delete o[r[n]]}},hasData:function(e){return!jQuery.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(e){return data_user.hasData(e)||data_priv.hasData(e)},data:function(e,t,n){return data_user.access(e,t,n)},removeData:function(e,t){data_user.remove(e,t)},_data:function(e,t,n){return data_priv.access(e,t,n)},_removeData:function(e,t){data_priv.remove(e,t)}}),jQuery.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=data_user.get(s);if(s.nodeType===1&&!data_priv.get(s,"hasDataAttrs")){n=o.length;while(n--)o[n]&&(r=o[n].name,r.indexOf("data-")===0&&(r=jQuery.camelCase(r.slice(5)),dataAttr(s,r,i[r])));data_priv.set(s,"hasDataAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){data_user.set(this,e)}):access(this,function(t){var n,r=jQuery.camelCase(e);if(s&&t===undefined){n=data_user.get(s,e);if(n!==undefined)return n;n=data_user.get(s,r);if(n!==undefined)return n;n=dataAttr(s,r,undefined);if(n!==undefined)return n;return}this.each(function(){var n=data_user.get(this,r);data_user.set(this,r,t),e.indexOf("-")!==-1&&n!==undefined&&data_user.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){data_user.remove(this,e)})}}),jQuery.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=data_priv.get(e,t),n&&(!r||jQuery.isArray(n)?r=data_priv.access(e,t,jQuery.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=jQuery.queue(e,t),r=n.length,i=n.shift(),s=jQuery._queueHooks(e,t),o=function(){jQuery.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return data_priv.get(e,n)||data_priv.access(e,n,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(e,[t+"queue",n])})})}}),jQuery.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?jQuery.queue(this[0],e):t===undefined?this:this.each(function(){var n=jQuery.queue(this,e,t);jQuery._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&jQuery.dequeue(this,e)})},dequeue:function(e){return this.each(function(){jQuery.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=jQuery.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=data_priv.get(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(e,t){return e=t||e,jQuery.css(e,"display")==="none"||!jQuery.contains(e.ownerDocument,e)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var e=document.createDocumentFragment(),t=e.appendChild(document.createElement("div")),n=document.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),support.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=data_priv.get(e);if(!m)return;n.handler&&(s=n,n=s.handler,i=s.selector),n.guid||(n.guid=jQuery.guid++),(a=m.events)||(a=m.events={}),(o=m.handle)||(o=m.handle=function(t){return typeof jQuery!==strundefined&&jQuery.event.triggered!==t.type?jQuery.event.dispatch.apply(e,arguments):undefined}),t=(t||"").match(rnotwhite)||[""],f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p)continue;c=jQuery.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=jQuery.event.special[p]||{},l=jQuery.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&jQuery.expr.match.needsContext.test(i),namespace:d.join(".")},s),(h=a[p])||(h=a[p]=[],h.delegateCount=0,(!c.setup||c.setup.call(e,r,d,o)===!1)&&e.addEventListener&&e.addEventListener(p,o,!1)),c.add&&(c.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,l):h.push(l),jQuery.event.global[p]=!0}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=data_priv.hasData(e)&&data_priv.get(e);if(!m||!(a=m.events))return;t=(t||"").match(rnotwhite)||[""],f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in a)jQuery.event.remove(e,p+t[f],n,r,!0);continue}c=jQuery.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],(i||v===l.origType)&&(!n||n.guid===l.guid)&&(!u||u.test(l.namespace))&&(!r||r===l.selector||r==="**"&&l.selector)&&(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&jQuery.removeEvent(e,p,m.handle),delete a[p])}jQuery.isEmptyObject(a)&&(delete m.handle,data_priv.remove(e,"events"))},trigger:function(e,t,n,r){var i,s,o,u,a,f,l,c=[n||document],h=hasOwn.call(e,"type")?e.type:e,p=hasOwn.call(e,"namespace")?e.namespace.split("."):[];s=o=n=n||document;if(n.nodeType===3||n.nodeType===8)return;if(rfocusMorph.test(h+jQuery.event.triggered))return;h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,e=e[jQuery.expando]?e:new jQuery.Event(h,typeof e=="object"&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),t=t==null?[e]:jQuery.makeArray(t,[e]),l=jQuery.event.special[h]||{};if(!r&&l.trigger&&l.trigger.apply(n,t)===!1)return;if(!r&&!l.noBubble&&!jQuery.isWindow(n)){u=l.delegateType||h,rfocusMorph.test(u+h)||(s=s.parentNode);for(;s;s=s.parentNode)c.push(s),o=s;o===(n.ownerDocument||document)&&c.push(o.defaultView||o.parentWindow||window)}i=0;while((s=c[i++])&&!e.isPropagationStopped())e.type=i>1?u:l.bindType||h,f=(data_priv.get(s,"events")||{})[e.type]&&data_priv.get(s,"handle"),f&&f.apply(s,t),f=a&&s[a],f&&f.apply&&jQuery.acceptData(s)&&(e.result=f.apply(s,t),e.result===!1&&e.preventDefault());return e.type=h,!r&&!e.isDefaultPrevented()&&(!l._default||l._default.apply(c.pop(),t)===!1)&&jQuery.acceptData(n)&&a&&jQuery.isFunction(n[h])&&!jQuery.isWindow(n)&&(o=n[a],o&&(n[a]=null),jQuery.event.triggered=h,n[h](),jQuery.event.triggered=undefined,o&&(n[a]=o)),e.result},dispatch:function(e){e=jQuery.event.fix(e);var t,n,r,i,s,o=[],u=slice.call(arguments),a=(data_priv.get(this,"events")||{})[e.type]||[],f=jQuery.event.special[e.type]||{};u[0]=e,e.delegateTarget=this;if(f.preDispatch&&f.preDispatch.call(this,e)===!1)return;o=jQuery.event.handlers.call(this,e,a),t=0;while((i=o[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((s=i.handlers[n++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(s.namespace))e.handleObj=s,e.data=s.data,r=((jQuery.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return f.postDispatch&&f.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||e.type!=="click"))for(;a!==this;a=a.parentNode||this)if(a.disabled!==!0||e.type!=="click"){r=[];for(n=0;n<u;n++)s=t[n],i=s.selector+" ",r[i]===undefined&&(r[i]=s.needsContext?jQuery(i,this).index(a)>=0:jQuery.find(i,this,null,[a]).length),r[i]&&r.push(s);r.length&&o.push({elem:a,handlers:r})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return e.pageX==null&&t.clientX!=null&&(n=e.target.ownerDocument||document,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.which&&s!==undefined&&(e.which=s&1?1:s&2?3:s&4?2:0),e}},fix:function(e){if(e[jQuery.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=rmouseEvent.test(i)?this.mouseHooks:rkeyEvent.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new jQuery.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=document),e.target.nodeType===3&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(e){return jQuery.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=jQuery.extend(new jQuery.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?jQuery.event.trigger(i,null,t):jQuery.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},jQuery.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},jQuery.Event=function(e,t){if(!(this instanceof jQuery.Event))return new jQuery.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===!1?returnTrue:returnFalse):this.type=e,t&&jQuery.extend(this,t),this.timeStamp=e&&e.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){jQuery.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!jQuery.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){jQuery.event.simulate(t,e.target,jQuery.event.fix(e),!0)};jQuery.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=data_priv.access(r,t);i||r.addEventListener(e,n,!0),data_priv.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=data_priv.access(r,t)-1;i?data_priv.access(r,t,i):(r.removeEventListener(e,n,!0),data_priv.remove(r,t))}}}),jQuery.fn.extend({on:function(e,t,n,r,i){var s,o;if(typeof e=="object"){typeof t!="string"&&(n=n||t,t=undefined);for(o in e)this.on(o,t,n,e[o],i);return this}n==null&&r==null?(r=t,n=t=undefined):r==null&&(typeof t=="string"?(r=n,n=undefined):(r=n,n=t,t=undefined));if(r===!1)r=returnFalse;else if(!r)return this;return i===1&&(s=r,r=function(e){return jQuery().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,jQuery(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=returnFalse),this.each(function(){jQuery.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){jQuery.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return jQuery.event.trigger(e,t,n,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(e,t,n){var r,i,s,o,u=e.cloneNode(!0),a=jQuery.contains(e.ownerDocument,e);if(!support.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!jQuery.isXMLDoc(e)){o=getAll(u),s=getAll(e);for(r=0,i=s.length;r<i;r++)fixInput(s[r],o[r])}if(t)if(n){s=s||getAll(e),o=o||getAll(u);for(r=0,i=s.length;r<i;r++)cloneCopyEvent(s[r],o[r])}else cloneCopyEvent(e,u);return o=getAll(u,"script"),o.length>0&&setGlobalEval(o,!a&&getAll(e,"script")),u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l=t.createDocumentFragment(),c=[],h=0,p=e.length;for(;h<p;h++){i=e[h];if(i||i===0)if(jQuery.type(i)==="object")jQuery.merge(c,i.nodeType?[i]:i);else if(!rhtml.test(i))c.push(t.createTextNode(i));else{s=s||l.appendChild(t.createElement("div")),o=(rtagName.exec(i)||["",""])[1].toLowerCase(),u=wrapMap[o]||wrapMap._default,s.innerHTML=u[1]+i.replace(rxhtmlTag,"<$1></$2>")+u[2],f=u[0];while(f--)s=s.lastChild;jQuery.merge(c,s.childNodes),s=l.firstChild,s.textContent=""}}l.textContent="",h=0;while(i=c[h++]){if(r&&jQuery.inArray(i,r)!==-1)continue;a=jQuery.contains(i.ownerDocument,i),s=getAll(l.appendChild(i),"script"),a&&setGlobalEval(s);if(n){f=0;while(i=s[f++])rscriptType.test(i.type||"")&&n.push(i)}}return l},cleanData:function(e){var t,n,r,i,s=jQuery.event.special,o=0;for(;(n=e[o])!==undefined;o++){if(jQuery.acceptData(n)){i=n[data_priv.expando];if(i&&(t=data_priv.cache[i])){if(t.events)for(r in t.events)s[r]?jQuery.event.remove(n,r):jQuery.removeEvent(n,r,t.handle);data_priv.cache[i]&&delete data_priv.cache[i]}}delete data_user.cache[n[data_user.expando]]}}}),jQuery.fn.extend({text:function(e){return access(this,function(e){return e===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.textContent=e})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?jQuery.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&jQuery.cleanData(getAll(n)),n.parentNode&&(t&&jQuery.contains(n.ownerDocument,n)&&setGlobalEval(getAll(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++)e.nodeType===1&&(jQuery.cleanData(getAll(e,!1)),e.textContent="");return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return jQuery.clone(this,e,t)})},html:function(e){return access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&t.nodeType===1)return t.innerHTML;if(typeof e=="string"&&!rnoInnerhtml.test(e)&&!wrapMap[(rtagName.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(rxhtmlTag,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(jQuery.cleanData(getAll(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,jQuery.cleanData(getAll(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=concat.apply([],e);var n,r,i,s,o,u,a=0,f=this.length,l=this,c=f-1,h=e[0],p=jQuery.isFunction(h);if(p||f>1&&typeof h=="string"&&!support.checkClone&&rchecked.test(h))return this.each(function(n){var r=l.eq(n);p&&(e[0]=h.call(this,n,r.html())),r.domManip(e,t)});if(f){n=jQuery.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,n.childNodes.length===1&&(n=r);if(r){i=jQuery.map(getAll(n,"script"),disableScript),s=i.length;for(;a<f;a++)o=n,a!==c&&(o=jQuery.clone(o,!0,!0),s&&jQuery.merge(i,getAll(o,"script"))),t.call(this[a],o,a);if(s){u=i[i.length-1].ownerDocument,jQuery.map(i,restoreScript);for(a=0;a<s;a++)o=i[a],rscriptType.test(o.type||"")&&!data_priv.access(o,"globalEval")&&jQuery.contains(u,o)&&(o.src?jQuery._evalUrl&&jQuery._evalUrl(o.src):jQuery.globalEval(o.textContent.replace(rcleanScript,"")))}}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){jQuery.fn[e]=function(e){var n,r=[],i=jQuery(e),s=i.length-1,o=0;for(;o<=s;o++)n=o===s?this:this.clone(!0),jQuery(i[o])[t](n),push.apply(r,n.get());return this.pushStack(r)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};(function(){function s(){i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i.innerHTML="",n.appendChild(r);var s=window.getComputedStyle(i,null);e=s.top!=="1%",t=s.width==="4px",n.removeChild(r)}var e,t,n=document.documentElement,r=document.createElement("div"),i=document.createElement("div");if(!i.style)return;i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle=i.style.backgroundClip==="content-box",r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(i),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return s(),e},boxSizingReliable:function(){return t==null&&s(),t},reliableMarginRight:function(){var e,t=i.appendChild(document.createElement("div"));return t.style.cssText=i.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",i.style.width="1px",n.appendChild(r),e=!parseFloat(window.getComputedStyle(t,null).marginRight),n.removeChild(r),e}})})(),jQuery.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=curCSS(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=jQuery.camelCase(t),a=e.style;t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(a,u)),o=jQuery.cssHooks[t]||jQuery.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=rrelNum.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(jQuery.css(e,t)),s="number");if(n==null||n!==n)return;s==="number"&&!jQuery.cssNumber[u]&&(n+="px"),!support.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)a[t]=n},css:function(e,t,n,r){var i,s,o,u=jQuery.camelCase(t);return t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(e.style,u)),o=jQuery.cssHooks[t]||jQuery.cssHooks[u],o&&"get"in o&&(i=o.get(e,!0,n)),i===undefined&&(i=curCSS(e,t,r)),i==="normal"&&t in cssNormalTransform&&(i=cssNormalTransform[t]),n===""||n?(s=parseFloat(i),n===!0||jQuery.isNumeric(s)?s||0:i):i}}),jQuery.each(["height","width"],function(e,t){jQuery.cssHooks[t]={get:function(e,n,r){if(n)return rdisplayswap.test(jQuery.css(e,"display"))&&e.offsetWidth===0?jQuery.swap(e,cssShow,function(){return getWidthOrHeight(e,t,r)}):getWidthOrHeight(e,t,r)},set:function(e,n,r){var i=r&&getStyles(e);return setPositiveNumber(e,n,r?augmentWidthOrHeight(e,t,r,jQuery.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(e,t){if(t)return jQuery.swap(e,{display:"inline-block"},curCSS,[e,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(e,t){jQuery.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+cssExpand[r]+t]=s[r]||s[r-2]||s[0];return i}},rmargin.test(e)||(jQuery.cssHooks[e+t].set=setPositiveNumber)}),jQuery.fn.extend({css:function(e,t){return access(this,function(e,t,n){var r,i,s={},o=0;if(jQuery.isArray(t)){r=getStyles(e),i=t.length;for(;o<i;o++)s[t[o]]=jQuery.css(e,t[o],!1,r);return s}return n!==undefined?jQuery.style(e,t,n):jQuery.css(e,t)},e,t,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(jQuery.cssNumber[n]?"":"px")},cur:function(){var e=Tween.propHooks[this.prop];return e&&e.get?e.get(this):Tween.propHooks._default.get(this)},run:function(e){var t,n=Tween.propHooks[this.prop];return this.options.duration?this.pos=t=jQuery.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=jQuery.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){jQuery.fx.step[e.prop]?jQuery.fx.step[e.prop](e):e.elem.style&&(e.elem.style[jQuery.cssProps[e.prop]]!=null||jQuery.cssHooks[e.prop])?jQuery.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},jQuery.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=rfxnum.exec(t),s=i&&i[3]||(jQuery.cssNumber[e]?"":"px"),o=(jQuery.cssNumber[e]||s!=="px"&&+r)&&rfxnum.exec(jQuery.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,jQuery.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(e,t){jQuery.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],tweeners[n]=tweeners[n]||[],tweeners[n].unshift(t)},prefilter:function(e,t){t?animationPrefilters.unshift(e):animationPrefilters.push(e)}}),jQuery.speed=function(e,t,n){var r=e&&typeof e=="object"?jQuery.extend({},e):{complete:n||!n&&t||jQuery.isFunction(e)&&e,duration:e,easing:n&&t||t&&!jQuery.isFunction(t)&&t};r.duration=jQuery.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in jQuery.fx.speeds?jQuery.fx.speeds[r.duration]:jQuery.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){jQuery.isFunction(r.old)&&r.old.call(this),r.queue&&jQuery.dequeue(this,r.queue)},r},jQuery.fn.extend({fadeTo:function(e,t,n,r){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=jQuery.isEmptyObject(e),s=jQuery.speed(t,n,r),o=function(){var t=Animation(this,jQuery.extend({},e),s);(i||data_priv.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=jQuery.timers,o=data_priv.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&rrun.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&jQuery.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=data_priv.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=jQuery.timers,o=r?r.length:0;n.finish=!0,jQuery.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),jQuery.each(["toggle","show","hide"],function(e,t){var n=jQuery.fn[t];jQuery.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(genFx(t,!0),e,r,i)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){jQuery.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),jQuery.timers=[],jQuery.fx.tick=function(){var e,t=0,n=jQuery.timers;fxNow=jQuery.now();for(;t<n.length;t++)e=n[t],!e()&&n[t]===e&&n.splice(t--,1);n.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(e){jQuery.timers.push(e),e()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(e,t){return e=jQuery.fx?jQuery.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=document.createElement("input"),t=document.createElement("select"),n=t.appendChild(document.createElement("option"));e.type="checkbox",support.checkOn=e.value!=="",support.optSelected=n.selected,t.disabled=!0,support.optDisabled=!n.disabled,e=document.createElement("input"),e.value="t",e.type="radio",support.radioValue=e.value==="t"}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(e,t){return access(this,jQuery.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){jQuery.removeAttr(this,e)})}}),jQuery.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(!e||s===3||s===8||s===2)return;if(typeof e.getAttribute===strundefined)return jQuery.prop(e,t,n);if(s!==1||!jQuery.isXMLDoc(e))t=t.toLowerCase(),r=jQuery.attrHooks[t]||(jQuery.expr.match.bool.test(t)?boolHook:nodeHook);if(n===undefined)return r&&"get"in r&&(i=r.get(e,t))!==null?i:(i=jQuery.find.attr(e,t),i==null?undefined:i);if(n!==null)return r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n);jQuery.removeAttr(e,t)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(rnotwhite);if(s&&e.nodeType===1)while(n=s[i++])r=jQuery.propFix[n]||n,jQuery.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!support.radioValue&&t==="radio"&&jQuery.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),boolHook={set:function(e,t,n){return t===!1?jQuery.removeAttr(e,n):e.setAttribute(n,n),n}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(e,t){var n=attrHandle[t]||jQuery.find.attr;attrHandle[t]=function(e,t,r){var i,s;return r||(s=attrHandle[t],attrHandle[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,attrHandle[t]=s),i}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(e,t){return access(this,jQuery.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[jQuery.propFix[e]||e]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(!e||o===3||o===8||o===2)return;return s=o!==1||!jQuery.isXMLDoc(e),s&&(t=jQuery.propFix[t]||t,i=jQuery.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||rfocusable.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=typeof e=="string"&&e,a=0,f=this.length;if(jQuery.isFunction(e))return this.each(function(t){jQuery(this).addClass(e.call(this,t,this.className))});if(u){t=(e||"").match(rnotwhite)||[];for(;a<f;a++){n=this[a],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(rclass," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=jQuery.trim(r),n.className!==o&&(n.className=o)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u=arguments.length===0||typeof e=="string"&&e,a=0,f=this.length;if(jQuery.isFunction(e))return this.each(function(t){jQuery(this).removeClass(e.call(this,t,this.className))});if(u){t=(e||"").match(rnotwhite)||[];for(;a<f;a++){n=this[a],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(rclass," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?jQuery.trim(r):"",n.className!==o&&(n.className=o)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):jQuery.isFunction(e)?this.each(function(n){jQuery(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,i=jQuery(this),s=e.match(rnotwhite)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(n===strundefined||n==="boolean")this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||e===!1?"":data_priv.get(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(rclass," ").indexOf(t)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=jQuery.valHooks[i.type]||jQuery.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(rreturn,""):n==null?"":n);return}return r=jQuery.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,jQuery(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":jQuery.isArray(i)&&(i=jQuery.map(i,function(e){return e==null?"":e+""})),t=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),jQuery.extend({valHooks:{option:{get:function(e){var t=jQuery.find.attr(e,"value");return t!=null?t:jQuery.trim(jQuery.text(e))}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!jQuery.nodeName(n.parentNode,"optgroup"))){t=jQuery(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=jQuery.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=jQuery.inArray(r.value,s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(e,t){if(jQuery.isArray(t))return e.checked=jQuery.inArray(jQuery(e).val(),t)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){jQuery.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),jQuery.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(e){return JSON.parse(e+"")},jQuery.parseXML=function(e){var t,n;if(!e||typeof e!="string")return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+e),t};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ajaxExtend(ajaxExtend(e,jQuery.ajaxSettings),t):ajaxExtend(jQuery.ajaxSettings,e)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(e,t){function S(e,t,s,u){var f,m,g,b,E,S=t;if(y===2)return;y=2,o&&clearTimeout(o),n=undefined,i=u||"",w.readyState=e>0?4:0,f=e>=200&&e<300||e===304,s&&(b=ajaxHandleResponses(l,w,s)),b=ajaxConvert(l,b,w,f);if(f)l.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(jQuery.lastModified[r]=E),E=w.getResponseHeader("etag"),E&&(jQuery.etag[r]=E)),e===204||l.type==="HEAD"?S="nocontent":e===304?S="notmodified":(S=b.state,m=b.data,g=b.error,f=!g);else{g=S;if(e||!S)S="error",e<0&&(e=0)}w.status=e,w.statusText=(t||S)+"",f?p.resolveWith(c,[m,S,w]):p.rejectWith(c,[w,S,g]),w.statusCode(v),v=undefined,a&&h.trigger(f?"ajaxSuccess":"ajaxError",[w,l,f?m:g]),d.fireWith(c,[w,S]),a&&(h.trigger("ajaxComplete",[w,l]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof e=="object"&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=jQuery.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?jQuery(c):jQuery.event,p=jQuery.Deferred(),d=jQuery.Callbacks("once memory"),v=l.statusCode||{},m={},g={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(y===2){if(!s){s={};while(t=rheaders.exec(i))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return y===2?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=g[n]=g[n]||e,m[e]=t),this},overrideMimeType:function(e){return y||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),S(0,t),this}};p.promise(w).complete=d.add,w.success=w.done,w.error=w.fail,l.url=((e||l.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=jQuery.trim(l.dataType||"*").toLowerCase().match(rnotwhite)||[""],l.crossDomain==null&&(u=rurl.exec(l.url.toLowerCase()),l.crossDomain=!(!u||u[1]===ajaxLocParts[1]&&u[2]===ajaxLocParts[2]&&(u[3]||(u[1]==="http:"?"80":"443"))===(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=jQuery.param(l.data,l.traditional)),inspectPrefiltersOrTransports(prefilters,l,t,w);if(y===2)return w;a=l.global,a&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!rnoContent.test(l.type),r=l.url,l.hasContent||(l.data&&(r=l.url+=(rquery.test(r)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=rts.test(r)?r.replace(rts,"$1_="+nonce++):r+(rquery.test(r)?"&":"?")+"_="+nonce++)),l.ifModified&&(jQuery.lastModified[r]&&w.setRequestHeader("If-Modified-Since",jQuery.lastModified[r]),jQuery.etag[r]&&w.setRequestHeader("If-None-Match",jQuery.etag[r])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):l.accepts["*"]);for(f in l.headers)w.setRequestHeader(f,l.headers[f]);if(!l.beforeSend||l.beforeSend.call(c,w,l)!==!1&&y!==2){b="abort";for(f in{success:1,error:1,complete:1})w[f](l[f]);n=inspectPrefiltersOrTransports(transports,l,t,w);if(!n)S(-1,"No Transport");else{w.readyState=1,a&&h.trigger("ajaxSend",[w,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){w.abort("timeout")},l.timeout));try{y=1,n.send(m,S)}catch(E){if(!(y<2))throw E;S(-1,E)}}return w}return w.abort()},getJSON:function(e,t,n){return jQuery.get(e,t,n,"json")},getScript:function(e,t){return jQuery.get(e,undefined,t,"script")}}),jQuery.each(["get","post"],function(e,t){jQuery[t]=function(e,n,r,i){return jQuery.isFunction(n)&&(i=i||r,r=n,n=undefined),jQuery.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){jQuery.fn[t]=function(e){return this.on(t,e)}}),jQuery._evalUrl=function(e){return jQuery.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(e){var t;return jQuery.isFunction(e)?this.each(function(t){jQuery(this).wrapAll(e.call(this,t))}):(this[0]&&(t=jQuery(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return jQuery.isFunction(e)?this.each(function(t){jQuery(this).wrapInner(e.call(this,t))}):this.each(function(){var t=jQuery(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=jQuery.isFunction(e);return this.each(function(n){jQuery(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},jQuery.expr.filters.visible=function(e){return!jQuery.expr.filters.hidden(e)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(e,t){var n,r=[],i=function(e,t){t=jQuery.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(e)||e.jquery&&!jQuery.isPlainObject(e))jQuery.each(e,function(){i(this.name,this.value)});else for(n in e)buildParams(n,e[n],t,i);return r.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=jQuery.prop(this,"elements");return e?jQuery.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(e)&&(this.checked||!rcheckableType.test(e))}).map(function(e,t){var n=jQuery(this).val();return n==null?null:jQuery.isArray(n)?jQuery.map(n,function(e){return{name:t.name,value:e.replace(rCRLF,"\r\n")}}):{name:t.name,value:n.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.ActiveXObject&&jQuery(window).on("unload",function(){for(var e in xhrCallbacks)xhrCallbacks[e]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(e){var t;if(support.cors||xhrSupported&&!e.crossDomain)return{send:function(n,r){var i,s=e.xhr(),o=++xhrId;s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),!e.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete xhrCallbacks[o],t=s.onload=s.onerror=null,e==="abort"?s.abort():e==="error"?r(s.status,s.statusText):r(xhrSuccessStatus[s.status]||s.status,s.statusText,typeof s.responseText=="string"?{text:s.responseText}:undefined,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=xhrCallbacks[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return jQuery.globalEval(e),e}}}),jQuery.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),jQuery.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=jQuery("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i(e.type==="error"?404:200,e.type)}),document.head.appendChild(t[0])},abort:function(){n&&n()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[e]=!0,e}}),jQuery.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,o=e.jsonp!==!1&&(rjsonp.test(e.url)?"url":typeof e.data=="string"&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp")return r=e.jsonpCallback=jQuery.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(rjsonp,"$1"+r):e.jsonp!==!1&&(e.url+=(rquery.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||jQuery.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i=window[r],window[r]=function(){s=arguments},n.always(function(){window[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,oldCallbacks.push(r)),s&&jQuery.isFunction(i)&&i(s[0]),s=i=undefined}),"script"}),jQuery.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||document;var r=rsingleTag.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=jQuery.buildFragment([e],t,i),i&&i.length&&jQuery(i).remove(),jQuery.merge([],r.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(e,t,n){if(typeof e!="string"&&_load)return _load.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=jQuery.trim(e.slice(u)),e=e.slice(0,u)),jQuery.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(i="POST"),o.length>0&&jQuery.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?jQuery("<div>").append(jQuery.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,s||[e.responseText,t,e])}),this},jQuery.expr.filters.animated=function(e){return jQuery.grep(jQuery.timers,function(t){return e===t.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=jQuery.css(e,"position"),c=jQuery(e),h={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=jQuery.css(e,"top"),a=jQuery.css(e,"left"),f=(l==="absolute"||l==="fixed")&&(s+a).indexOf("auto")>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),jQuery.isFunction(t)&&(t=t.call(e,n,u)),t.top!=null&&(h.top=t.top-u.top+o),t.left!=null&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},jQuery.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){jQuery.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},s=r&&r.ownerDocument;if(!s)return;return t=s.documentElement,jQuery.contains(t,r)?(typeof r.getBoundingClientRect!==strundefined&&(i=r.getBoundingClientRect()),n=getWindow(s),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(!this[0])return;var e,t,n=this[0],r={top:0,left:0};return jQuery.css(n,"position")==="fixed"?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),jQuery.nodeName(e[0],"html")||(r=e.offset()),r.top+=jQuery.css(e[0],"borderTopWidth",!0),r.left+=jQuery.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-jQuery.css(n,"marginTop",!0),left:t.left-r.left-jQuery.css(n,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||docElem;while(e&&!jQuery.nodeName(e,"html")&&jQuery.css(e,"position")==="static")e=e.offsetParent;return e||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;jQuery.fn[e]=function(r){return access(this,function(e,r,i){var s=getWindow(e);if(i===undefined)return s?s[t]:e[r];s?s.scrollTo(n?window.pageXOffset:i,n?i:window.pageYOffset):e[r]=i},e,r,arguments.length,null)}}),jQuery.each(["top","left"],function(e,t){jQuery.cssHooks[t]=addGetHookIf(support.pixelPosition,function(e,n){if(n)return n=curCSS(e,t),rnumnonpx.test(n)?jQuery(e).position()[t]+"px":n})}),jQuery.each({Height:"height",Width:"width"},function(e,t){jQuery.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){jQuery.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return access(this,function(t,n,r){var i;return jQuery.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?jQuery.css(t,n,o):jQuery.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(e){return window.$===jQuery&&(window.$=_$),e&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery}),define("jquery",function(){}),function(e,t,n){function r(e){return function(){var t=arguments[0],n="["+(e?e+":":"")+t+"] ",r=arguments[1],i=arguments,s=function(e){return typeof e=="function"?e.toString().replace(/ \{[\s\S]*$/,""):typeof e=="undefined"?"undefined":typeof e!="string"?JSON.stringify(e):e},o,u;o=n+r.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n;if(t+2<i.length)return n=i[t+2],typeof n=="function"?n.toString().replace(/ ?\{[\s\S]*$/,""):typeof n=="undefined"?"undefined":typeof n!="string"?pt(n):n;return e}),o=o+"\nhttp://errors.angularjs.org/1.3.0-beta.18/"+(e?e+"/":"")+t;for(u=2;u<arguments.length;u++)console.log("----> "+arguments[u]),o=o+(u==2?"?":"&")+"p"+(u-2)+"="+encodeURIComponent(s(arguments[u]));return console.log("====> "+o),new Error(o)}}function S(e){if(e==null||W(e))return!1;var t=e.length;return e.nodeType===1&&t?!0:F(e)||R(e)||t===0||typeof t=="number"&&t>0&&t-1 in e}function x(e,t,n){var r,i;if(e)if(U(e))for(r in e)r!="prototype"&&r!="length"&&r!="name"&&(!e.hasOwnProperty||e.hasOwnProperty(r))&&t.call(n,e[r],r);else if(R(e)||S(e))for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r);else if(e.forEach&&e.forEach!==x)e.forEach(t,n);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r);return e}function T(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function N(e,t,n){var r=T(e);for(var i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function C(e){return function(t,n){e(n,t)}}function k(){return++E}function L(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function A(e){var t=e.$$hashKey;return x(arguments,function(t){t!==e&&x(t,function(t,n){e[n]=t})}),L(e,t),e}function O(e){return parseInt(e,10)}function M(e,t){return A(new(A(function(){},{prototype:e})),t)}function _(){}function D(e){return e}function P(e){return function(){return e}}function H(e){return typeof e=="undefined"}function B(e){return typeof e!="undefined"}function j(e){return e!=null&&typeof e=="object"}function F(e){return typeof e=="string"}function I(e){return typeof e=="number"}function q(e){return m.call(e)==="[object Date]"}function U(e){return typeof e=="function"}function z(e){return m.call(e)==="[object RegExp]"}function W(e){return e&&e.window===e}function X(e){return e&&e.$evalAsync&&e.$watch}function V(e){return m.call(e)==="[object File]"}function $(e){return m.call(e)==="[object Blob]"}function J(e){return typeof e=="boolean"}function K(e){return e&&U(e.then)}function G(e){return!!e&&!!(e.nodeName||e.prop&&e.attr&&e.find)}function Y(e){var t={},n=e.split(","),r;for(r=0;r<n.length;r++)t[n[r]]=!0;return t}function Z(e,t,n){var r=[];return x(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r}function et(e,t){var n=0,r;if(R(e)||F(e))return e.length;if(j(e))for(r in e)(!t||e.hasOwnProperty(r))&&n++;return n}function tt(e,t){return nt(e,t)!=-1}function nt(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function rt(e,t){var n=nt(e,t);return n>=0&&e.splice(n,1),t}function it(e){if(e)switch(w(e)){case"option":case"pre":case"title":return!0}return!1}function st(e,t,n,r){if(W(e)||X(e))throw g("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(!t){t=e;if(e)if(R(e))t=st(e,[],n,r);else if(q(e))t=new Date(e.getTime());else if(z(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(j(e)){var i=Object.create(Object.getPrototypeOf(e));t=st(e,i,n,r)}}else{if(e===t)throw g("cpi","Can't copy! Source and destination are identical.");n=n||[],r=r||[];if(j(e)){var s=nt(n,e);if(s!==-1)return r[s];n.push(e),r.push(t)}var o;if(R(e)){t.length=0;for(var u=0;u<e.length;u++)o=st(e[u],null,n,r),j(e[u])&&(n.push(e[u]),r.push(o)),t.push(o)}else{var a=t.$$hashKey;x(t,function(e,n){delete t[n]});for(var f in e)e.hasOwnProperty(f)&&(o=st(e[f],null,n,r),j(e[f])&&(n.push(e[f]),r.push(o)),t[f]=o);L(t,a)}}return t}function ot(e,t){var n=0;if(R(e)){t=t||[];for(;n<e.length;n++)t[n]=e[n]}else if(j(e)){t=t||{};var r=Object.keys(e);for(var i=r.length;n<i;n++){var s=r[n];if(s.charAt(0)!=="$"||s.charAt(1)!=="$")t[s]=e[s]}}return t||e}function ut(e,t){if(e===t)return!0;if(e===null||t===null)return!1;if(e!==e&&t!==t)return!0;var r=typeof e,i=typeof t,s,o,u;if(r==i&&r=="object"){if(!R(e)){if(q(e))return q(t)&&e.getTime()==t.getTime();if(z(e)&&z(t))return e.toString()==t.toString();if(X(e)||X(t)||W(e)||W(t)||R(t))return!1;u={};for(o in e){if(o.charAt(0)==="$"||U(e[o]))continue;if(!ut(e[o],t[o]))return!1;u[o]=!0}for(o in t)if(!u.hasOwnProperty(o)&&o.charAt(0)!=="$"&&t[o]!==n&&!U(t[o]))return!1;return!0}if(!R(t))return!1;if((s=e.length)==t.length){for(o=0;o<s;o++)if(!ut(e[o],t[o]))return!1;return!0}}return!1}function ft(e,t,n){return e.concat(d.call(t,n))}function lt(e,t){return d.call(e,t||0)}function ct(e,t){var n=arguments.length>2?lt(arguments,2):[];return!U(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat(d.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function ht(e,r){var i=r;return typeof e=="string"&&e.charAt(0)==="$"&&e.charAt(1)==="$"?i=n:W(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":X(r)&&(i="$SCOPE"),i}function pt(e,t){return typeof e=="undefined"?n:JSON.stringify(e,ht,t?"  ":null)}function dt(e){return F(e)?JSON.parse(e):e}function vt(e){e=h(e).clone();try{e.empty()}catch(t){}var n=3,r=h("<div>").append(e).html();try{return e[0].nodeType===n?o(r):r.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+o(t)})}catch(t){return o(r)}}function mt(e){try{return decodeURIComponent(e)}catch(t){}}function gt(e){var t={},n,r;return x((e||"").split("&"),function(e){if(e){n=e.replace(/\+/g,"%20").split("="),r=mt(n[0]);if(B(r)){var i=B(n[1])?mt(n[1]):!0;u.call(t,r)?R(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i}}}),t}function yt(e){var t=[];return x(e,function(e,n){R(e)?x(e,function(e){t.push(wt(n,!0)+(e===!0?"":"="+wt(e,!0)))}):t.push(wt(n,!0)+(e===!0?"":"="+wt(e,!0)))}),t.length?t.join("&"):""}function bt(e){return wt(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function wt(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function St(e,t){var n,r,i=Et.length;e=h(e);for(r=0;r<i;++r){n=Et[r]+t;if(F(n=e.attr(n)))return n}return null}function xt(e,t){var n,r,i={};x(Et,function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))}),x(Et,function(t){var i=t+"app",s;!n&&(s=e.querySelector("["+i.replace(":","\\:")+"]"))&&(n=s,r=s.getAttribute(i))}),n&&(i.strictDi=St(n,"strict-di")!==null,t(n,r?[r]:[],i))}function Tt(n,r,i){j(i)||(i={});var s={strictDi:!1};i=A(s,i);var o=function(){n=h(n);if(n.injector()){var e=n[0]===t?"document":vt(n);throw g("btstrpd","App Already Bootstrapped with this Element '{0}'",e)}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.unshift("ng");var s=_n(r,i.strictDi);return s.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),s},u=/^NG_DEFER_BOOTSTRAP!/;if(e&&!u.test(e.name))return o();e.name=e.name.replace(u,""),y.resumeBootstrap=function(e){x(e,function(e){r.push(e)}),o()}}function Ct(e,t){return t=t||"_",e.replace(Nt,function(e,n){return(n?t:"")+e.toLowerCase()})}function kt(){var t;p=e.jQuery,p&&p.fn.on?(h=p,A(p.fn,{scope:mn.scope,isolateScope:mn.isolateScope,controller:mn.controller,injector:mn.injector,inheritedData:mn.inheritedData}),t=p.cleanData,t=t.$$original||t,p.cleanData=function(e){for(var n=0,r;(r=e[n])!=null;n++)p(r).triggerHandler("$destroy");t(e)},p.cleanData.$$original=t):h=tn,y.element=h}function Lt(e,t,n){if(!e)throw g("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function At(e,t,n){return n&&R(e)&&(e=e[e.length-1]),Lt(U(e),t,"not a function, got "+(e&&typeof e=="object"?e.constructor.name||"Object":typeof e)),e}function Ot(e,t){if(e==="hasOwnProperty")throw g("badname","hasOwnProperty is not a valid {0} name",t)}function Mt(e,t,n){if(!t)return e;var r=t.split("."),i,s=e,o=r.length;for(var u=0;u<o;u++)i=r[u],e&&(e=(s=e)[i]);return!n&&U(e)?ct(s,e):e}function _t(e){var t=e[0],n=e[e.length-1];if(t===n)return h(t);var r=t,i=[r];do{r=r.nextSibling;if(!r)break;i.push(r)}while(r!==n);return h(i)}function Dt(e){function i(e,t,n){return e[t]||(e[t]=n())}var t=r("$injector"),n=r("ng"),s=i(e,"angular",Object);return s.$$minErr=s.$$minErr||r,i(s,"module",function(){var e={};return function(s,o,u){var a=function(e,t){if(e==="hasOwnProperty")throw n("badname","hasOwnProperty is not a valid {0} name",t)};return a(s,"module"),o&&e.hasOwnProperty(s)&&(e[s]=null),i(e,s,function(){function f(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),a}}if(!o)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",s);var e=[],n=[],r=[],i=f("$injector","invoke","push",n),a={_invokeQueue:e,_configBlocks:n,_runBlocks:r,requires:o,name:s,provider:f("$provide","provider"),factory:f("$provide","factory"),service:f("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),animation:f("$animateProvider","register"),filter:f("$filterProvider","register"),controller:f("$controllerProvider","register"),directive:f("$compileProvider","directive"),config:i,run:function(e){return r.push(e),this}};return u&&i(u),a})}})}function Ht(t){A(t,{bootstrap:Tt,copy:st,extend:A,equals:ut,element:h,forEach:x,injector:_n,noop:_,bind:ct,toJson:pt,fromJson:dt,identity:D,isUndefined:H,isDefined:B,isString:F,isFunction:U,isObject:j,isNumber:I,isElement:G,isArray:R,version:Pt,isDate:q,lowercase:o,uppercase:a,callbacks:{counter:0},$$minErr:r,$$csp:at}),b=Dt(e);try{b("ngLocale")}catch(n){b("ngLocale",[]).provider("$locale",ar)}b("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:$r}),t.provider("$compile",Un).directive({a:_i,input:ls,textarea:ls,form:Fi,script:Ys,select:to,style:ro,option:no,ngBind:Ls,ngBindHtml:Os,ngBindTemplate:As,ngClass:_s,ngClassEven:Ps,ngClassOdd:Ds,ngCloak:Hs,ngController:Bs,ngForm:Ii,ngHide:Vs,ngIf:Fs,ngInclude:Is,ngInit:Rs,ngNonBindable:Us,ngPluralize:zs,ngRepeat:Ws,ngShow:Xs,ngStyle:$s,ngSwitch:Js,ngSwitchWhen:Ks,ngSwitchDefault:Qs,ngOptions:eo,ngTransclude:Gs,ngModel:ys,ngList:Ts,ngChange:bs,pattern:Es,ngPattern:Es,required:ws,ngRequired:ws,minlength:xs,ngMinlength:xs,maxlength:Ss,ngMaxlength:Ss,ngValue:Cs,ngModelOptions:ks}).directive({ngInclude:qs}).directive(Di).directive(js),t.provider({$anchorScroll:Dn,$animate:Hn,$browser:Fn,$cacheFactory:In,$controller:Jn,$document:Kn,$exceptionHandler:Qn,$filter:ai,$interpolate:or,$interval:ur,$http:tr,$httpBackend:rr,$location:Tr,$log:Nr,$parse:Rr,$rootScope:Vr,$q:Ur,$$q:zr,$sce:ei,$sceDelegate:Zr,$sniffer:ti,$templateCache:qn,$timeout:ni,$window:ui,$$rAF:Xr,$$asyncCallback:Bn})}])}function Rt(){return++jt}function Xt(e){return e.replace(Ut,function(e,t,n,r){return r?n.toUpperCase():n}).replace(zt,"Moz$1")}function Gt(e){return!$t.test(e)}function Yt(e){return!e.nodeType||e.nodeType===1||e.nodeType===9}function Zt(e,t){var n,r,i,s,o=t.createDocumentFragment(),u=[],a;if(Gt(e))u.push(t.createTextNode(e));else{r=r||o.appendChild(t.createElement("div")),i=(Jt.exec(e)||["",""])[1].toLowerCase(),s=Qt[i]||Qt._default,r.innerHTML=s[1]+e.replace(Kt,"<$1></$2>")+s[2],a=s[0];while(a--)r=r.lastChild;u=ft(u,r.childNodes),r=o.firstChild,r.textContent=""}return o.textContent="",o.innerHTML="",x(u,function(e){o.appendChild(e)}),o}function en(e,n){n=n||t;var r;return(r=Vt.exec(e))?[n.createElement(r[1])]:(r=Zt(e,n))?r.childNodes:[]}function tn(e){if(e instanceof tn)return e;F(e)&&(e=Q(e));if(!(this instanceof tn)){if(F(e)&&e.charAt(0)!="<")throw Wt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new tn(e)}F(e)?hn(this,en(e)):hn(this,e)}function nn(e){return e.cloneNode(!0)}function rn(e,t){t||on(e);if(e.childNodes&&e.childNodes.length){var n=e.getElementsByTagName?lt(e.getElementsByTagName("*")):e.querySelectorAll?e.querySelectorAll("*"):[];for(var r=0,i=n.length;r<i;r++)on(n[r])}}function sn(e,t,n,r){if(B(r))throw Wt("offargs","jqLite#off() does not support the `selector` argument");var i=un(e,"events"),s=un(e,"handle");if(!s)return;H(t)?x(i,function(t,n){It(e,n,t),delete i[n]}):x(t.split(" "),function(t){H(n)?(It(e,t,i[t]),delete i[t]):rt(i[t]||[],n)})}function on(e,t){var r=e.ng339,i=Bt[r];if(i){if(t){delete Bt[r].data[t];return}i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),sn(e)),delete Bt[r],e.ng339=n}}function un(e,t,n){var r=e.ng339,i=Bt[r||-1];if(!B(n))return i&&i[t];i||(e.ng339=r=Rt(),i=Bt[r]={}),i[t]=n}function an(e,t,n){if(Yt(e)){var r=un(e,"data"),i=B(n),s=!i&&B(t),o=s&&!j(t);!r&&!o&&un(e,"data",r={});if(i)r[t]=n;else{if(!s)return r;if(o)return r&&r[t];A(r,t)}}}function fn(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function ln(e,t){t&&e.setAttribute&&x(t.split(" "),function(t){e.setAttribute("class",Q((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Q(t)+" "," ")))})}function cn(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");x(t.split(" "),function(e){e=Q(e),n.indexOf(" "+e+" ")===-1&&(n+=e+" ")}),e.setAttribute("class",Q(n))}}function hn(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;typeof n=="number"&&t.window!==t?n&&(t.item&&(t=d.call(t)),v.apply(e,t)):e[e.length++]=t}}function pn(e,t){return dn(e,"$"+(t||"ngController")+"Controller")}function dn(e,t,r){e.nodeType==9&&(e=e.documentElement);var i=R(t)?t:[t];while(e){for(var s=0,o=i.length;s<o;s++)if((r=h.data(e,i[s]))!==n)return r;e=e.parentNode||e.nodeType===11&&e.host}}function vn(e){rn(e,!0);while(e.firstChild)e.removeChild(e.firstChild)}function wn(e,t){var n=gn[t.toLowerCase()];return n&&yn[w(e)]&&n}function En(e,t){var n=e.nodeName;return(n==="INPUT"||n==="TEXTAREA")&&bn[t]}function Sn(e,n){var r=function(r,i){r.preventDefault||(r.preventDefault=function(){r.returnValue=!1}),r.stopPropagation||(r.stopPropagation=function(){r.cancelBubble=!0}),r.target||(r.target=r.srcElement||t);if(H(r.defaultPrevented)){var s=r.preventDefault;r.preventDefault=function(){r.defaultPrevented=!0,s.call(r)},r.defaultPrevented=!1}r.isDefaultPrevented=function(){return r.defaultPrevented||r.returnValue===!1};var o=ot(n[i||r.type]||[]);x(o,function(t){t.call(e,r)}),c<=8?(r.preventDefault=null,r.stopPropagation=null,r.isDefaultPrevented=null):(delete r.preventDefault,delete r.stopPropagation,delete r.isDefaultPrevented)};return r.elem=e,r}function xn(e,t){var r=typeof e,i;return r=="function"||r=="object"&&e!==null?typeof (i=e.$$hashKey)=="function"?i=e.$$hashKey():i===n&&(i=e.$$hashKey=(t||k)()):i=e,r+":"+i}function Tn(e,t){if(t){var n=0;this.nextUid=function(){return++n}}x(e,this.put,this)}function On(e){var t=e.toString().replace(Ln,""),n=t.match(Nn);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Mn(e,t,n){var r,i,s,o;if(typeof e=="function"){if(!(r=e.$inject)){r=[];if(e.length){if(t){if(!F(n)||!n)n=e.name||On(e);throw An("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n)}i=e.toString().replace(Ln,""),s=i.match(Nn),x(s[1].split(Cn),function(e){e.replace(kn,function(e,t,n){r.push(n)})})}e.$inject=r}}else R(e)?(o=e.length-1,At(e[o],"fn"),r=e.slice(0,o)):At(e,"fn",!0);return r}function _n(e,t){function c(e){return function(t,n){if(!j(t))return e(t,n);x(t,C(e))}}function h(e,t){Ot(e,"service");if(U(t)||R(t))t=a.instantiate(t);if(!t.$get)throw An("pget","Provider '{0}' must define $get factory method.",e);return u[e+i]=t}function p(e,t){return h(e,{$get:t})}function d(e,t){return p(e,["$injector",function(e){return e.instantiate(t)}])}function v(e,t){return p(e,P(t))}function m(e,t){Ot(e,"constant"),u[e]=t,f[e]=t}function g(e,t){var n=a.get(e+i),r=n.$get;n.$get=function(){var e=l.invoke(r,n);return l.invoke(t,null,{$delegate:e})}}function y(e){var t=[],n,r;return x(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=a.get(r[0]);i[r[1]].apply(i,r[2])}}if(o.get(e))return;o.put(e,!0);try{F(e)?(n=b(e),t=t.concat(y(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):U(e)?t.push(a.invoke(e)):R(e)?t.push(a.invoke(e)):At(e,"module")}catch(i){throw R(e)&&(e=e[e.length-1]),i.message&&i.stack&&i.stack.indexOf(i.message)==-1&&(i=i.message+"\n"+i.stack),An("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}),t}function w(e,n){function o(t){if(e.hasOwnProperty(t)){if(e[t]===r)throw An("cdep","Circular dependency found: {0}",t+" <- "+s.join(" <- "));return e[t]}try{return s.unshift(t),e[t]=r,e[t]=n(t)}catch(i){throw e[t]===r&&delete e[t],i}finally{s.shift()}}function a(e,n,r,i){typeof r=="string"&&(i=r,r=null);var s=[],u=Mn(e,t,i),a,f,l;for(f=0,a=u.length;f<a;f++){l=u[f];if(typeof l!="string")throw An("itkn","Incorrect injection token! Expected service name as string, got {0}",l);s.push(r&&r.hasOwnProperty(l)?r[l]:o(l))}return R(e)&&(e=e[a]),e.apply(n,s)}function f(e,t,n){var r=function(){},i,s;return r.prototype=(R(e)?e[e.length-1]:e).prototype,i=new r,s=a(e,i,t,n),j(s)||U(s)?s:i}return{invoke:a,instantiate:f,get:o,annotate:Mn,has:function(t){return u.hasOwnProperty(t+i)||e.hasOwnProperty(t)}}}t=t===!0;var r={},i="Provider",s=[],o=new Tn([],!0),u={$provide:{provider:c(h),factory:c(p),service:c(d),value:c(v),constant:c(m),decorator:g}},a=u.$injector=w(u,function(){throw An("unpr","Unknown provider: {0}",s.join(" <- "))},t),f={},l=f.$injector=w(f,function(e){var t=a.get(e+i);return l.invoke(t.$get,t,n,e)},t);return x(y(e),function(e){l.invoke(e||_)}),l}function Dn(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function s(e){var t=null;return x(e,function(e){!t&&w(e)==="a"&&(t=e)}),t}function o(){var e=n.hash(),r;e?(r=i.getElementById(e))?r.scrollIntoView():(r=s(i.getElementsByName(e)))?r.scrollIntoView():e==="top"&&t.scrollTo(0,0):t.scrollTo(0,0)}var i=t.document;return e&&r.$watch(function(){return n.hash()},function(){r.$evalAsync(o)}),o}]}function Bn(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function jn(e,t,r,i){function v(e){try{e.apply(null,lt(arguments,1))}finally{p--;if(p===0)while(d.length)try{d.pop()()}catch(t){r.error(t)}}}function y(e,t){(function n(){x(m,function(e){e()}),g=t(n,e)})()}function N(){E=null;if(b==s.url())return;b=s.url(),x(S,function(e){e(s.url())})}var s=this,o=t[0],u=e.location,a=e.history,f=e.setTimeout,l=e.clearTimeout,c={};s.isMock=!1;var p=0,d=[];s.$$completeOutstandingRequest=v,s.$$incOutstandingRequestCount=function(){p++},s.notifyWhenNoOutstandingRequests=function(e){x(m,function(e){e()}),p===0?e():d.push(e)};var m=[],g;s.addPollFn=function(e){return H(g)&&y(100,f),m.push(e),e};var b=u.href,w=t.find("base"),E=null;s.url=function(t,n){u!==e.location&&(u=e.location),a!==e.history&&(a=e.history);if(t){if(b==t)return;return b=t,i.history?n?a.replaceState(null,"",t):(a.pushState(null,"",t),w.attr("href",w.attr("href"))):(E=t,n?u.replace(t):u.href=t),s}return E||u.href.replace(/%27/g,"'")};var S=[],T=!1;s.onUrlChange=function(t){return T||(i.history&&h(e).on("popstate",N),i.hashchange?h(e).on("hashchange",N):s.addPollFn(N),T=!0),S.push(t),t},s.baseHref=function(){var e=w.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var C={},k="",L=s.baseHref();s.cookies=function(e,t){var i,s,u,a,f;if(!e){if(o.cookie!==k){k=o.cookie,s=k.split("; "),C={};for(a=0;a<s.length;a++)u=s[a],f=u.indexOf("="),f>0&&(e=decodeURIComponent(u.substring(0,f)),C[e]===n&&(C[e]=decodeURIComponent(u.substring(f+1))))}return C}t===n?o.cookie=encodeURIComponent(e)+"=;path="+L+";expires=Thu, 01 Jan 1970 00:00:00 GMT":F(t)&&(i=(o.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+L).length+1,i>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},s.defer=function(e,t){var n;return p++,n=f(function(){delete c[n],v(e)},t||0),c[n]=!0,n},s.defer.cancel=function(e){return c[e]?(delete c[e],l(e),v(_),!0):!1}}function Fn(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new jn(e,r,t,n)}]}function In(){this.$get=function(){function t(t,n){function c(e){e!=f&&(l?l==e&&(l=e.n):l=e,h(e.n,e.p),h(e,f),f=e,f.n=null)}function h(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var i=0,s=A({},n,{id:t}),o={},u=n&&n.capacity||Number.MAX_VALUE,a={},f=null,l=null;return e[t]={put:function(e,t){if(u<Number.MAX_VALUE){var n=a[e]||(a[e]={key:e});c(n)}if(H(t))return;return e in o||i++,o[e]=t,i>u&&this.remove(l.key),t},get:function(e){if(u<Number.MAX_VALUE){var t=a[e];if(!t)return;c(t)}return o[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=a[e];if(!t)return;t==f&&(f=t.p),t==l&&(l=t.n),h(t.n,t.p),delete a[e]}delete o[e],i--},removeAll:function(){o={},i=0,a={},f=l=null},destroy:function(){o=null,s=null,a=null,delete e[t]},info:function(){return A({},s,{size:i})}}}var e={};return t.info=function(){var t={};return x(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function qn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Un(e,r){var i={},s="Directive",u=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,a=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,f=Y("ngSrc,ngSrcset,src,srcset"),l=/^(on[a-z]+|formaction)$/;this.directive=function d(t,n){return Ot(t,"directive"),F(t)?(Lt(n,"directiveFactory"),i.hasOwnProperty(t)||(i[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var r=[];return x(i[t],function(i,s){try{var o=e.invoke(i);U(o)?o={compile:P(o)}:!o.compile&&o.link&&(o.compile=P(o.link)),o.priority=o.priority||0,o.index=s,o.name=o.name||t,o.require=o.require||o.controller&&o.name,o.restrict=o.restrict||"EA",r.push(o)}catch(u){n(u)}}),r}])),i[t].push(n)):x(t,C(d)),this},this.aHrefSanitizationWhitelist=function(e){return B(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return B(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,d,v,m,g,y,b,E,S,T,N){function P(e,t,n,r,i){e instanceof h||(e=h(e)),x(e,function(t,n){t.nodeType==3&&t.nodeValue.match(/\S+/)&&(e[n]=t=h(t).wrap("<span></span>").parent()[0])});var s=B(e,t,e,n,r,i);return H(e,"ng-scope"),function(n,r,i,o){Lt(n,"scope");var u=r?mn.clone.call(e):e;return x(i,function(e,t){u.data("$"+t+"Controller",e)}),u.data("$scope",n),r&&r(u,n),s&&s(n,u,u,o),u}}function H(e,t){try{e.addClass(t)}catch(n){}}function B(e,t,r,i,s,o){function m(e,r,i,s){var o,a,f,l,c,p,d,v,m=r.length,g=new Array(m);for(c=0;c<m;c++)g[c]=r[c];for(c=0,d=0,p=u.length;c<p;d++)f=g[d],o=u[c++],a=u[c++],o?(o.scope?(l=e.$new(),h.data(f,"$scope",l)):l=e,o.transcludeOnThisElement?v=I(e,o.transclude,s):!o.templateOnThisElement&&s?v=s:!s&&t?v=I(e,t):v=null,o(a,l,f,i,v)):a&&a(e,f.childNodes,n,s)}var u=[],a,f,l,c,p,d;for(var v=0;v<e.length;v++)a=new C,f=q(e[v],[],a,v===0?i:n,s),l=f.length?X(f,e[v],a,t,r,null,[],[],o):null,l&&l.scope&&H(a.$$element,"ng-scope"),p=l&&l.terminal||!(c=e[v].childNodes)||!c.length?null:B(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),u.push(l,p),d=d||l||p,o=null;return d?m:null}function I(e,t,n){var r=function(r,i,s){var o=!1;r||(r=e.$new(),r.$$transcluded=!0,o=!0);var u=t(r,i,s,n);return o&&u.on("$destroy",function(){r.$destroy()}),u};return r}function q(e,t,n,r,i){var s=e.nodeType,o=n.$attr,f,l;switch(s){case 1:$(t,Wn(w(e)),"E",r,i);for(var h,p,d,v,m,g,y=e.attributes,b=0,E=y&&y.length;b<E;b++){var S=!1,x=!1;h=y[b];if(!c||c>=8||h.specified){p=h.name,m=Q(h.value),v=Wn(p);if(g=_.test(v))p=Ct(v.substr(6),"-");var T=v.replace(/(Start|End)$/,"");J(T)&&v===T+"Start"&&(S=p,x=p.substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),d=Wn(p.toLowerCase()),o[d]=p;if(g||!n.hasOwnProperty(d))n[d]=m,wn(e,d)&&(n[d]=!0);it(e,t,m,d),$(t,d,"A",r,i,S,x)}}l=e.className;if(F(l)&&l!=="")while(f=a.exec(l))d=Wn(f[2]),$(t,d,"C",r,i)&&(n[d]=Q(f[3])),l=l.substr(f.index+f[0].length);break;case 3:et(t,e.nodeValue);break;case 8:try{f=u.exec(e.nodeValue),f&&(d=Wn(f[1]),$(t,d,"M",r,i)&&(n[d]=Q(f[2])))}catch(N){}}return t.sort(Y),t}function z(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){var s=e;do{if(!e)throw Rn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==1&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return h(r)}function W(e,t,n){return function(r,i,s,o,u){return i=z(i[0],t,n),e(r,i,s,o,u)}}function X(e,i,s,o,u,a,f,l,c){function ft(e,t,n,r){if(e){n&&(e=W(e,n,r)),e.require=L.require,e.directiveName=A;if(b===L||L.$$isolateScope)e=at(e,{isolateScope:!0});f.push(e)}if(t){n&&(t=W(t,n,r)),t.require=L.require,t.directiveName=A;if(b===L||L.$$isolateScope)t=at(t,{isolateScope:!0});l.push(t)}}function ct(e,t,n,r){var i,s="data",o=!1;if(F(t)){while((i=t.charAt(0))=="^"||i=="?")t=t.substr(1),i=="^"&&(s="inheritedData"),o=o||i=="?";i=null,r&&s==="data"&&(i=r[t]),i=i||n[s]("$"+t+"Controller");if(!i&&!o)throw Rn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i}return R(t)&&(i=[],x(t,function(t){i.push(ct(e,t,n,r))})),i}function ht(e,t,o,u,a){function D(e,t){var r;return arguments.length<2&&(t=e,e=n),N&&(r=L),a(e,t,r)}var c,p,v,E,S,T,k,L={},A;c=i===o?s:ot(s,new C(h(o),s.$attr)),p=c.$$element;if(b){var O=/^\s*([@=&])(\??)\s*(\w*)\s*$/;k=t.$new(!0),!w||w!==b&&w!==b.$$originalDirective?p.data("$isolateScopeNoTemplate",k):p.data("$isolateScope",k),H(p,"ng-isolate-scope"),x(b.scope,function(e,n){var i=e.match(O)||[],s=i[3]||n,o=i[2]=="?",u=i[1],a,f,l,h;k.$$isolateBindings[n]=u+s;switch(u){case"@":c.$observe(s,function(e){k[n]=e}),c.$$observers[s].$$scope=t,c[s]&&(k[n]=r(c[s])(t));break;case"=":if(o&&!c[s])return;f=g(c[s]),f.literal?h=ut:h=function(e,t){return e===t||e!==e&&t!==t},l=f.assign||function(){throw a=k[n]=f(t),Rn("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",c[s],b.name)},a=k[n]=f(t);var p=t.$watch(g(c[s],function(r){return h(r,k[n])||(h(r,a)?l(t,r=k[n]):k[n]=r),a=r}),null,f.literal);k.$on("$destroy",p);break;case"&":f=g(c[s]),k[n]=function(e){return f(t,e)};break;default:throw Rn("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b.name,n,e)}})}A=a&&D,m&&x(m,function(e){var n={$scope:e===b||e.$$isolateScope?k:t,$element:p,$attrs:c,$transclude:A},r;T=e.controller,T=="@"&&(T=c[e.name]),r=y(T,n),L[e.name]=r,N||p.data("$"+e.name+"Controller",r),e.controllerAs&&(n.$scope[e.controllerAs]=r)});for(v=0,E=f.length;v<E;v++)try{S=f[v],S(S.isolateScope?k:t,p,c,S.require&&ct(S.directiveName,S.require,p,L),A)}catch(M){d(M,vt(p))}var _=t;b&&(b.template||b.templateUrl===null)&&(_=k),e&&e(_,o.childNodes,n,a);for(v=l.length-1;v>=0;v--)try{S=l[v],S(S.isolateScope?k:t,p,c,S.require&&ct(S.directiveName,S.require,p,L),A)}catch(M){d(M,vt(p))}}c=c||{};var p=-Number.MAX_VALUE,v,m=c.controllerDirectives,b=c.newIsolateScopeDirective,w=c.templateDirective,E=c.nonTlbTranscludeDirective,S=!1,T=!1,N=c.hasElementTranscludeDirective,k=s.$$element=h(i),L,A,M,_=a,D=o,B,I;for(var X=0,$=e.length;X<$;X++){L=e[X];var J=L.$$start,Y=L.$$end;J&&(k=z(i,J,Y)),M=n;if(p>L.priority)break;if(I=L.scope)L.templateUrl||(j(I)?(Z("new/isolated scope",b||v,L,k),b=L):Z("new/isolated scope",b,L,k)),v=v||L;A=L.name,!L.templateUrl&&L.controller&&(I=L.controller,m=m||{},Z("'"+A+"' controller",m[A],L,k),m[A]=L);if(I=L.transclude)S=!0,L.$$tlb||(Z("transclusion",E,L,k),E=L),I=="element"?(N=!0,p=L.priority,M=k,k=s.$$element=h(t.createComment(" "+A+": "+s[A]+" ")),i=k[0],st(u,lt(M),i),D=P(M,o,p,_&&_.name,{nonTlbTranscludeDirective:E})):(M=h(nn(i)).contents(),k.empty(),D=P(M,o));if(L.template){T=!0,Z("template",w,L,k),w=L,I=U(L.template)?L.template(k,s):L.template,I=O(I);if(L.replace){_=L,Gt(I)?M=[]:M=h(tt(L.type,Q(I))),i=M[0];if(M.length!=1||i.nodeType!==1)throw Rn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",A,"");st(u,k,i);var et={$attr:{}},nt=q(i,[],et),rt=e.splice(X+1,e.length-(X+1));b&&V(nt),e=e.concat(nt).concat(rt),K(s,et),$=e.length}else k.html(I)}if(L.templateUrl)T=!0,Z("template",w,L,k),w=L,L.replace&&(_=L),ht=G(e.splice(X,e.length-X),k,s,u,S&&D,f,l,{controllerDirectives:m,newIsolateScopeDirective:b,templateDirective:w,nonTlbTranscludeDirective:E}),$=e.length;else if(L.compile)try{B=L.compile(k,s,D),U(B)?ft(null,B,J,Y):B&&ft(B.pre,B.post,J,Y)}catch(it){d(it,vt(k))}L.terminal&&(ht.terminal=!0,p=Math.max(p,L.priority))}return ht.scope=v&&v.scope===!0,ht.transcludeOnThisElement=S,ht.templateOnThisElement=T,ht.transclude=D,c.hasElementTranscludeDirective=N,ht}function V(e){for(var t=0,n=e.length;t<n;t++)e[t]=M(e[t],{$$isolateScope:!0})}function $(t,r,o,u,a,f,l){if(r===a)return null;var c=null;if(i.hasOwnProperty(r))for(var h,p=e.get(r+s),v=0,m=p.length;v<m;v++)try{h=p[v],(u===n||u>h.priority)&&h.restrict.indexOf(o)!=-1&&(f&&(h=M(h,{$$start:f,$$end:l})),t.push(h),c=h)}catch(g){d(g)}return c}function J(t){if(i.hasOwnProperty(t))for(var n,r=e.get(t+s),o=0,u=r.length;o<u;o++){n=r[o];if(n.multiElement)return!0}return!1}function K(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;x(e,function(r,i){i.charAt(0)!="$"&&(t[i]&&t[i]!==r&&(r+=(i==="style"?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),x(t,function(t,s){s=="class"?(H(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):s=="style"?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):s.charAt(0)!="$"&&!e.hasOwnProperty(s)&&(e[s]=t,r[s]=n[s])})}function G(e,t,n,r,i,s,o,u){var a=[],f,l,c=t[0],p=e.shift(),d=A({},p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),g=U(p.templateUrl)?p.templateUrl(t,n):p.templateUrl,y=p.type;return t.empty(),v.get(S.getTrustedResourceUrl(g),{cache:m}).success(function(v){var m,b,w,E;v=O(v);if(p.replace){Gt(v)?w=[]:w=h(tt(y,Q(v))),m=w[0];if(w.length!=1||m.nodeType!==1)throw Rn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,g);b={$attr:{}},st(r,t,m);var S=q(m,[],b);j(p.scope)&&V(S),e=S.concat(e),K(n,b)}else m=c,t.html(v);e.unshift(d),f=X(e,m,n,i,t,p,s,o,u),x(r,function(e,n){e==m&&(r[n]=t[0])}),l=B(t[0].childNodes,i);while(a.length){var T=a.shift(),N=a.shift(),C=a.shift(),k=a.shift(),L=t[0];if(N!==c){var A=N.className;if(!u.hasElementTranscludeDirective||!p.replace)L=nn(m);st(C,h(N),L),H(h(L),A)}f.transcludeOnThisElement?E=I(T,f.transclude,k):E=k,f(l,T,L,r,E)}a=null}).error(function(e,t,n,r){throw Rn("tpload","Failed to load template: {0}",r.url)}),function(t,n,r,i,s){var o=s;a?(a.push(n),a.push(r),a.push(i),a.push(o)):(f.transcludeOnThisElement&&(o=I(n,f.transclude,s)),f(l,n,r,i,o))}}function Y(e,t){var n=t.priority-e.priority;return n!==0?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Z(e,t,n,r){if(t)throw Rn("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,vt(r))}function et(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(t){var r=t.parent(),i=r.length;return i&&H(t.parent(),"ng-binding"),function(t,r){var s=r.parent(),o=s.data("$binding")||[];o.push(n),s.data("$binding",o),i||H(s,"ng-binding"),t.$watch(n,function(t){r[0].nodeValue=t})}}})}function tt(e,n){e=o(e||"html");switch(e){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function nt(e,t){if(t=="srcdoc")return S.HTML;var n=w(e);if(t=="xlinkHref"||n=="form"&&t=="action"||n!="img"&&(t=="src"||t=="ngSrc"))return S.RESOURCE_URL}function it(e,t,n,i){var s=r(n,!0);if(!s)return;if(i==="multiple"&&w(e)==="select")throw Rn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",vt(e));t.push({priority:100,compile:function(){return{pre:function(n,o,u){var a=u.$$observers||(u.$$observers={});if(l.test(i))throw Rn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");s=r(u[i],!0,nt(e,i),f[i]);if(!s)return;u[i]=s(n),(a[i]||(a[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||n).$watch(s,function(t,n){i==="class"&&t!=n?u.$updateClass(t,n):u.$set(i,t)})}}}})}function st(e,n,r){var i=n[0],s=n.length,o=i.parentNode,u,a;if(e)for(u=0,a=e.length;u<a;u++)if(e[u]==i){e[u++]=r;for(var f=u,l=f+s-1,c=e.length;f<c;f++,l++)l<c?e[f]=e[l]:delete e[f];e.length-=s-1;break}o&&o.replaceChild(r,i);var d=t.createDocumentFragment();d.appendChild(i),h(r).data(h(i).data()),p?p.cleanData.$$original([i]):delete h.cache[i[h.expando]];for(var v=1,m=n.length;v<m;v++){var g=n[v];h(g).remove(),d.appendChild(g),delete n[v]}n[0]=r,n.length=1}function at(e,t){return A(function(){return e.apply(null,arguments)},e,t)}var C=function(e,t){this.$$element=e,this.$attr=t||{}};C.prototype={$normalize:Wn,$addClass:function(e){e&&e.length>0&&T.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&T.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=$n(e,t),r=$n(t,e);n.length===0?T.removeClass(this.$$element,r):r.length===0?T.addClass(this.$$element,n):T.setClass(this.$$element,n,r)},$set:function(e,t,r,i){var s=this.$$element[0],o=wn(s,e),u=En(s,e),a=e,f,l;o?(this.$$element.prop(e,t),i=o):u&&(this[u]=t,a=u),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e],i||(this.$attr[e]=i=Ct(e,"-"))),l=w(this.$$element);if(l==="a"&&e==="href"||l==="img"&&e==="src")this[e]=t=N(t,e==="src");r!==!1&&(t===null||t===n?this.$$element.removeAttr(i):this.$$element.attr(i,t));var c=this.$$observers;c&&x(c[a],function(e){try{e(t)}catch(n){d(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers={}),i=r[e]||(r[e]=[]);return i.push(t),b.$evalAsync(function(){i.$$inter||t(n[e])}),function(){rt(i,t)}}};var k=r.startSymbol(),L=r.endSymbol(),O=k=="{{"||L=="}}"?D:function(t){return t.replace(/\{\{/g,k).replace(/}}/g,L)},_=/^ngAttr[A-Z]/;return P}]}function Wn(e){return Xt(e.replace(zn,""))}function Xn(e,t,n,r){}function Vn(e,t,n,r,i){}function $n(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var s=0;s<r.length;s++){var o=r[s];for(var u=0;u<i.length;u++)if(o==i[u])continue e;n+=(n.length>0?" ":"")+o}return n}function Jn(){var e={},t=!1,i=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){Ot(t,"controller"),j(t)?A(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(s,o){return function(u,a){var f,l,c,h;F(u)&&(l=u.match(i),c=l[1],h=l[3],u=e.hasOwnProperty(c)?e[c]:Mt(a.$scope,c,!0)||(t?Mt(o,c,!0):n),At(u,c,!0)),f=s.instantiate(u,a,c);if(h){if(!a||typeof a.$scope!="object")throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",c||u.name,h);a.$scope[h]=f}return f}}]}function Kn(){this.$get=["$window",function(e){return h(e.document)}]}function Qn(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function Gn(e){var t={},n,r,i;return e?(x(e.split("\n"),function(e){i=e.indexOf(":"),n=o(Q(e.substr(0,i))),r=Q(e.substr(i+1)),n&&(t[n]=t[n]?t[n]+", "+r:r)}),t):t}function Yn(e){var t=j(e)?e:n;return function(n){return t||(t=Gn(e)),n?t[o(n)]||null:t}}function Zn(e,t,n){return U(n)?n(e,t):(x(n,function(n){e=n(e,t)}),e)}function er(e){return 200<=e&&e<300}function tr(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,r=/^\)\]\}',?\n/,i={"Content-Type":"application/json;charset=utf-8"},s=this.defaults={transformResponse:[function(n){return F(n)&&(n=n.replace(r,""),e.test(n)&&t.test(n)&&(n=dt(n))),n}],transformRequest:[function(e){return j(e)&&!V(e)&&!$(e)?pt(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ot(i),put:ot(i),patch:ot(i)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},u=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,r,i,f,l){function p(e){function d(e){var n=A({},e,{data:Zn(e.data,e.headers,t.transformResponse)});return er(e.status)?n:f.reject(n)}function v(e){function a(e){var t;x(e,function(n,r){U(n)&&(t=n(),t!=null?e[r]=t:delete e[r])})}var t=s.headers,n=A({},e.headers),r,i,u;t=A({},t.common,t[o(e.method)]);e:for(r in t){i=o(r);for(u in n)if(o(u)===i)continue e;n[r]=t[r]}return a(n),n}var t={method:"get",transformRequest:s.transformRequest,transformResponse:s.transformResponse},r=v(e);A(t,e),t.headers=r,t.method=a(t.method);var i=function(e){r=e.headers;var t=Zn(e.data,Yn(r),e.transformRequest);return H(t)&&x(r,function(e,t){o(t)==="content-type"&&delete r[t]}),H(e.withCredentials)&&!H(s.withCredentials)&&(e.withCredentials=s.withCredentials),m(e,t,r).then(d,d)},u=[i,n],l=f.when(t);x(h,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&u.push(e.response,e.responseError)});while(u.length){var c=u.shift(),p=u.shift();l=l.then(c,p)}return l.success=function(e){return l.then(function(n){e(n.data,n.status,n.headers,t)}),l},l.error=function(e){return l.then(null,function(n){e(n.data,n.status,n.headers,t)}),l},l}function d(e){x(arguments,function(e){p[e]=function(t,n){return p(A(n||{},{method:e,url:t}))}})}function v(e){x(arguments,function(e){p[e]=function(t,n,r){return p(A(r||{},{method:e,url:t,data:n}))}})}function m(r,o,u){function y(e,t,n,r){h&&(er(e)?h.put(v,[e,t,Gn(n),r]):h.remove(v)),b(t,e,n,r),i.$$phase||i.$apply()}function b(e,t,n,i){t=Math.max(t,0),(er(t)?a.resolve:a.reject)({data:e,status:t,headers:Yn(n),config:r,statusText:i})}function w(){var e=nt(p.pendingRequests,r);e!==-1&&p.pendingRequests.splice(e,1)}var a=f.defer(),l=a.promise,h,d,v=g(r.url,r.params);p.pendingRequests.push(r),l.then(w,w),(r.cache||s.cache)&&r.cache!==!1&&(r.method==="GET"||r.method==="JSONP")&&(h=j(r.cache)?r.cache:j(s.cache)?s.cache:c);if(h){d=h.get(v);if(B(d)){if(K(d))return d.then(w,w),d;R(d)?b(d[1],d[0],ot(d[2]),d[3]):b(d,200,{},"OK")}else h.put(v,l)}if(H(d)){var m=oi(r.url)?t.cookies()[r.xsrfCookieName||s.xsrfCookieName]:n;m&&(u[r.xsrfHeaderName||s.xsrfHeaderName]=m),e(r.method,v,o,y,u,r.timeout,r.withCredentials,r.responseType)}return l}function g(e,t){if(!t)return e;var n=[];return N(t,function(e,t){if(e===null||H(e))return;R(e)||(e=[e]),x(e,function(e){j(e)&&(q(e)?e=e.toISOString():j(e)&&(e=pt(e))),n.push(wt(t)+"="+wt(e))})}),n.length>0&&(e+=(e.indexOf("?")==-1?"?":"&")+n.join("&")),e}var c=r("$http"),h=[];return x(u,function(e){h.unshift(F(e)?l.get(e):l.invoke(e))}),p.pendingRequests=[],d("get","delete","head","jsonp"),v("post","put","patch"),p.defaults=s,p}]}function nr(t){if(c<=8&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!e.XMLHttpRequest))return new e.ActiveXObject("Microsoft.XMLHTTP");if(e.XMLHttpRequest)return new e.XMLHttpRequest;throw r("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function rr(){this.$get=["$browser","$window","$document",function(e,t,n){return ir(e,nr,e.defer,t.angular.callbacks,n[0])}]}function ir(e,t,n,r,i){function u(e,t,n){var s=i.createElement("script"),o=null;return s.type="text/javascript",s.src=e,s.async=!0,o=function(e){It(s,"load",o),It(s,"error",o),i.body.removeChild(s),s=null;var u=-1,a="unknown";e&&(e.type==="load"&&!r[t].called&&(e={type:"error"}),a=e.type,u=e.type==="error"?404:200),n&&n(u,a)},Ft(s,"load",o),Ft(s,"error",o),i.body.appendChild(s),o}var s=-1;return function(i,a,f,l,h,p,d,v){function S(){m=s,y&&y(),b&&b.abort()}function T(t,r,i,s,o){E&&n.cancel(E),y=b=null,r===0&&(r=i?200:si(a).protocol=="file"?404:0),r=r===1223?204:r,o=o||"",t(r,i,s,o),e.$$completeOutstandingRequest(_)}var m;e.$$incOutstandingRequestCount(),a=a||e.url();if(o(i)=="jsonp"){var g="_"+(r.counter++).toString(36);r[g]=function(e){r[g].data=e,r[g].called=!0};var y=u(a.replace("JSON_CALLBACK","angular.callbacks."+g),g,function(e,t){T(l,e,r[g].data,"",t),r[g]=_})}else{var b=t(i);b.open(i,a,!0),x(h,function(e,t){B(e)&&b.setRequestHeader(t,e)}),b.onreadystatechange=function(){if(b&&b.readyState==4){var e=null,t=null,n="";m!==s&&(e=b.getAllResponseHeaders(),t="response"in b?b.response:b.responseText),m===s&&c<10||(n=b.statusText),T(l,m||b.status,t,e,n)}},d&&(b.withCredentials=!0);if(v)try{b.responseType=v}catch(w){if(v!=="json")throw w}b.send(f||null)}if(p>0)var E=n(S,p);else K(p)&&p.then(S)}}function or(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function f(e){return"\\\\\\"+e}function l(f,l,c,h){function L(e){try{return k(C(e))}catch(t){var n=sr("interr","Can't interpolate: {0}\n{1}",f,t.toString());r(n)}}h=!!h;var p,d,v=0,m=[],g=[],y=[],b=f.length,w=!1,E=!1,S,T=[];while(v<b){if((p=f.indexOf(e,v))==-1||(d=f.indexOf(t,p+s))==-1){v!==b&&(E=!0,m.push(f.substring(v)));break}v!==p&&(E=!0),m.push(f.substring(v,p)),S=f.substring(p+s,d),g.push(S),y.push(n(S,L)),v=d+o,w=!0}x(m,function(n,r){m[r]=m[r].replace(u,e).replace(a,t)}),m.length===g.length&&m.push("");if(c&&w&&(E||g.length>1))throw sr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);if(!l||w){T.length=m.length+g.length;var N=function(e){for(var t=0,n=g.length;t<n;t++){if(h&&H(e[t]))return;T[2*t]=m[t],T[2*t+1]=e[t]}return T[2*n]=m[n],T.join("")},C=function(e){return c?i.getTrusted(c,e):i.valueOf(e)},k=function(e){if(e==null)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=pt(e)}return e};return A(function(t){var n=0,i=g.length,s=new Array(i);try{for(;n<i;n++)s[n]=y[n](t);return N(s)}catch(o){var u=sr("interr","Can't interpolate: {0}\n{1}",f,o.toString());r(u)}},{exp:f,separators:m,expressions:g,$$watchDelegate:function(e,t,n,r){var i;return e.$watchGroup(y,function(r,s){var o=N(r);U(t)&&t.call(this,o,r!==s?i:o,e),i=o},n,r)}})}}var s=e.length,o=t.length,u=new RegExp(e.replace(/./g,f),"g"),a=new RegExp(t.replace(/./g,f),"g");return l.startSymbol=function(){return e},l.endSymbol=function(){return t},l}]}function ur(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function s(s,o,u,a){var f=t.setInterval,l=t.clearInterval,c=0,h=B(a)&&!a,p=(h?r:n).defer(),d=p.promise;return u=B(u)?u:0,d.then(null,null,s),d.$$intervalId=f(function(){p.notify(c++),u>0&&c>=u&&(p.resolve(c),l(d.$$intervalId),delete i[d.$$intervalId]),h||e.$apply()},o),i[d.$$intervalId]=p,d}var i={};return s.cancel=function(e){return e&&e.$$intervalId in i?(i[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete i[e.$$intervalId],!0):!1},s}]}function ar(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return e===1?"one":"other"}}}}function hr(e){var t=e.split("/"),n=t.length;while(n--)t[n]=bt(t[n]);return t.join("/")}function pr(e,t,n){var r=si(e,n);t.$$protocol=r.protocol,t.$$host=r.hostname,t.$$port=O(r.port)||lr[r.protocol]||null}function dr(e,t,n){var r=e.charAt(0)!=="/";r&&(e="/"+e);var i=si(e,n);t.$$path=decodeURIComponent(r&&i.pathname.charAt(0)==="/"?i.pathname.substring(1):i.pathname),t.$$search=gt(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&t.$$path.charAt(0)!="/"&&(t.$$path="/"+t.$$path)}function vr(e,t){if(t.indexOf(e)===0)return t.substr(e.length)}function mr(e){var t=e.indexOf("#");return t==-1?e:e.substr(0,t)}function gr(e){return e.substr(0,mr(e).lastIndexOf("/")+1)}function yr(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function br(e,t){this.$$html5=!0,t=t||"";var r=gr(e);pr(e,this,e),this.$$parse=function(t){var n=vr(r,t);if(!F(n))throw cr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,r);dr(n,this,e),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=yt(this.$$search),t=this.$$hash?"#"+bt(this.$$hash):"";this.$$url=hr(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$rewrite=function(i){var s,o;if((s=vr(e,i))!==n)return o=s,(s=vr(t,s))!==n?r+(vr("/",s)||s):e+o;if((s=vr(r,i))!==n)return r+s;if(r==i+"/")return r}}function wr(e,t){var n=gr(e);pr(e,this,e),this.$$parse=function(r){function o(e,t,n){var r=/^\/[A-Z]:(\/.*)/,i;return t.indexOf(n)===0&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var i=vr(e,r)||vr(n,r),s=i.charAt(0)=="#"?vr(t,i):this.$$html5?i:"";if(!F(s))throw cr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',r,t);dr(s,this,e),this.$$path=o(this.$$path,s,e),this.$$compose()},this.$$compose=function(){var n=yt(this.$$search),r=this.$$hash?"#"+bt(this.$$hash):"";this.$$url=hr(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$rewrite=function(t){if(mr(e)==mr(t))return t}}function Er(e,t){this.$$html5=!0,wr.apply(this,arguments);var n=gr(e);this.$$rewrite=function(r){var i;if(e==mr(r))return r;if(i=vr(n,r))return e+t+i;if(n===r+"/")return n},this.$$compose=function(){var n=yt(this.$$search),r=this.$$hash?"#"+bt(this.$$hash):"";this.$$url=hr(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+t+this.$$url}}function Sr(e){return function(){return this[e]}}function xr(e,t){return function(n){return H(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Tr(){var t="",n=!1;this.hashPrefix=function(e){return B(e)?(t=e,this):t},this.html5Mode=function(e){return B(e)?(n=e,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(r,i,s,o){function v(e){r.$broadcast("$locationChangeSuccess",u.absUrl(),e)}var u,a,f=i.baseHref(),l=i.url(),c;n?(c=yr(l)+(f||"/"),a=s.history?br:Er):(c=mr(l),a=wr),u=new a(c,"#"+t),u.$$parse(u.$$rewrite(l));var p=/^\s*(javascript|mailto):/i;o.on("click",function(n){if(n.ctrlKey||n.metaKey||n.which==2)return;var s=h(n.target);while(w(s[0])!=="a")if(s[0]===o[0]||!(s=s.parent())[0])return;var f=s.prop("href");j(f)&&f.toString()==="[object SVGAnimatedString]"&&(f=si(f.animVal).href);if(p.test(f))return;if(a===Er){var l=s.attr("href")||s.attr("xlink:href");if(l.indexOf("://")<0){var d="#"+t;if(l[0]=="/")f=c+d+l;else if(l[0]=="#")f=c+d+(u.path()||"/")+l;else{var v=u.path().split("/"),m=l.split("/");for(var g=0;g<m.length;g++){if(m[g]==".")continue;m[g]==".."?v.pop():m[g].length&&v.push(m[g])}f=c+d+v.join("/")}}}var y=u.$$rewrite(f);f&&!s.attr("target")&&y&&!n.isDefaultPrevented()&&(n.preventDefault(),y!=i.url()&&(u.$$parse(y),r.$apply(),e.angular["ff-684208-preventDefault"]=!0))}),u.absUrl()!=l&&i.url(u.absUrl(),!0),i.onUrlChange(function(e){u.absUrl()!=e&&(r.$evalAsync(function(){var t=u.absUrl();u.$$parse(e),r.$broadcast("$locationChangeStart",e,t).defaultPrevented?(u.$$parse(t),i.url(t)):v(t)}),r.$$phase||r.$digest())});var d=0;return r.$watch(function(){var t=i.url(),n=u.$$replace;if(!d||t!=u.absUrl())d++,r.$evalAsync(function(){r.$broadcast("$locationChangeStart",u.absUrl(),t).defaultPrevented?u.$$parse(t):(i.url(u.absUrl(),n),v(t))});return u.$$replace=!1,d}),u}]}function Nr(){var e=!0,t=this;this.debugEnabled=function(t){return B(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||_,s=!1;try{s=!!i.apply}catch(o){}return s?function(){var e=[];return x(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,t==null?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function kr(e,t){if(e==="__defineGetter__"||e==="__defineSetter__"||e==="__lookupGetter__"||e==="__lookupSetter__"||e==="__proto__")throw Cr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Lr(e,t){if(e){if(e.constructor===e)throw Cr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Cr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Cr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Cr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function _r(e,t){if(e){if(e.constructor===e)throw Cr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Ar||e===Or||e===Mr)throw Cr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function jr(e,t,n,r){var i=t.split("."),s;for(var o=0;i.length>1;o++){s=kr(i.shift(),r);var u=e[s];u||(u={},e[s]=u),e=u}return s=kr(i.shift(),r),Lr(e,r),Lr(e[s],r),e[s]=n,n}function Ir(e,t,r,i,s,o){return kr(e,o),kr(t,o),kr(r,o),kr(i,o),kr(s,o),function(u,a){var f=a&&a.hasOwnProperty(e)?a:u;return f==null?f:(f=f[e],t?f==null?n:(f=f[t],r?f==null?n:(f=f[r],i?f==null?n:(f=f[i],s?f==null?n:(f=f[s],f):f):f):f):f)}}function qr(e,t,r){if(Fr.hasOwnProperty(e))return Fr[e];var i=e.split("."),s=i.length,o;if(t.csp)s<6?o=Ir(i[0],i[1],i[2],i[3],i[4],r):o=function(e,t){var o=0,u;do u=Ir(i[o++],i[o++],i[o++],i[o++],i[o++],r)(e,t),t=n,e=u;while(o<s);return u};else{var u="var p;\n";x(i,function(e,t){kr(e,r),u+="if(s == null) return undefined;\ns="+(t?"s":'((k&&k.hasOwnProperty("'+e+'"))?k:s)')+"."+e+";\n"}),u+="return s;";var a=new Function("s","k",u);a.toString=P(u),o=a}return e!=="hasOwnProperty"&&(Fr[e]=o),o}function Rr(){var e={},t={csp:!1};this.$get=["$filter","$sniffer",function(n,r){function i(e,t,n,r,i){var s,o;return s=e.$watch(function(t){return i(t)},function(n,r,i){o=n,U(t)&&t.apply(this,arguments),B(n)&&i.$$postDigest(function(){B(o)&&s()})},n,r)}function s(e,t,n,r,i){function o(e){var t=!0;return x(e,function(e){B(e)||(t=!1)}),t}var s;return s=e.$watch(function(t){return i(t)},function(n,r,i){U(t)&&t.call(this,n,r,i),o(n)&&i.$$postDigest(function(){o(n)&&s()})},n)}function o(e,t,n,r,i){var s;return s=e.$watch(function(t){return i(t)},function(n,r,i){U(t)&&t.apply(this,arguments),s()},n,r)}function u(e,t){if(U(t)){var n=function(r,i){var s=e(r,i),o=t(s,r,i);return B(s)?o:s};return n.$$watchDelegate=e.$$watchDelegate,n}return e}return t.csp=r.csp,function(r,a){var f,l,c=r=Q(r);switch(typeof r){case"string":if(e.hasOwnProperty(c))f=e[c];else{r.charAt(0)===":"&&r.charAt(1)===":"&&(l=!0,r=r.substring(2));var h=new Hr(t),p=new Br(h,n,t);f=p.parse(r),f.constant?f.$$watchDelegate=o:l&&(f.$$watchDelegate=f.literal?s:i),c!=="hasOwnProperty"&&(e[c]=f)}return u(f,a);case"function":return u(r,a);default:return u(_,a)}}}]}function Ur(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Wr(function(t){e.$evalAsync(t)},t)}]}function zr(){this.$get=["$browser","$exceptionHandler",function(e,t){return Wr(function(t){e.defer(t)},t)}]}function Wr(e,t){function i(){this.$$pending=[]}function s(e,t){return function(n){t.call(e,n)}}function o(){this.promise=new i,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function p(e){return e}function d(e){return a(e)}function v(e){var t=new o,n=0,r=R(e)?[]:{};return x(e,function(e,i){n++,u(e).then(function(e){if(r.hasOwnProperty(i))return;r[i]=e,--n||t.resolve(r)},function(e){if(r.hasOwnProperty(i))return;t.reject(e)})}),n===0&&t.resolve(r),t.promise}var r=function(){return new o};i.prototype={then:function(e,n,r){var i=new o,s=function(n){try{i.resolve((U(e)?e:p)(n))}catch(r){i.reject(r),t(r)}},u=function(e){try{i.resolve((U(n)?n:d)(e))}catch(r){i.reject(r),t(r)}},a=function(e){try{i.notify((U(r)?r:p)(e))}catch(n){t(n)}};return this.$$pending?this.$$pending.push([s,u,a]):this.$$value.then(s,u,a),i.promise},"catch":function(e){return this.then(null,e)},"finally":function(e){return this.then(function(t){return l(t,!0,e)},function(t){return l(t,!1,e)})}},o.prototype={resolve:function(t){if(this.promise.$$pending){var r=this.promise.$$pending;this.promise.$$pending=n,this.promise.$$value=u(t),r.length&&e(s(this,function(){var e;for(var t=0,n=r.length;t<n;t++)e=r[t],this.promise.$$value.then(e[0],e[1],e[2])}))}},reject:function(e){this.resolve(c(e))},notify:function(t){if(this.promise.$$pending){var n=this.promise.$$pending;this.promise.$$pending.length&&e(function(){var e;for(var r=0,i=n.length;r<i;r++)e=n[r],e[2](t)})}}};var u=function(t){return K(t)?t:{then:function(n){var r=new o;return e(function(){r.resolve(n(t))}),r.promise}}},a=function(e){var t=new o;return t.reject(e),t.promise},f=function(t,n){var r=new o;return n?r.resolve(t):r.reject(t),r.promise},l=function(t,n,r){var i=null;try{i=(r||p)()}catch(s){return f(s,!1)}return K(i)?i.then(function(){return f(t,n)},function(e){return f(e,!1)}):f(t,n)},c=function(n){return{then:function(r,i){var s=new o;return e(function(){try{s.resolve((U(i)?i:d)(n))}catch(e){s.reject(e),t(e)}}),s.promise}}},h=function(n,r,i,s){var f=new o,l,c=function(e){try{return(U(r)?r:p)(e)}catch(n){return t(n),a(n)}},h=function(e){try{return(U(i)?i:d)(e)}catch(n){return t(n),a(n)}},v=function(e){try{return(U(s)?s:p)(e)}catch(n){t(n)}};return e(function(){u(n).then(function(e){if(l)return;l=!0,f.resolve(u(e).then(c,h,v))},function(e){if(l)return;l=!0,f.resolve(h(e))},function(e){if(l)return;f.notify(v(e))})}),f.promise},m=function g(e){function n(e){t.resolve(e)}function r(e){t.reject(e)}if(!U(e))throw new TypeError("Expected resolverFn");if(this instanceof g){var t=new o;return e(n,r),t.promise}return new g(e)};return m.defer=r,m.reject=a,m.when=h,m.all=v,m}function Xr(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,s=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return s.supported=i,s}]}function Vr(){var e=10,t=r("$rootScope"),n=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,i,s,o){function a(){this.$id=k(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function l(e){if(f.$$phase)throw t("inprog","{0} already in progress",f.$$phase);f.$$phase=e}function c(){f.$$phase=null}function h(e,t){var n=s(e);return At(n,t),n}function p(e,t,n){do e.$$listenerCount[n]-=t,e.$$listenerCount[n]===0&&delete e.$$listenerCount[n];while(e=e.$parent)}function d(){}a.prototype={constructor:a,$new:function(e){var t,n;return e?(n=new a,n.$root=this.$root,n.$$asyncQueue=this.$$asyncQueue,n.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=k(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),n=new this.$$childScopeClass),n["this"]=n,n.$parent=this,n.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=n,this.$$childTail=n):this.$$childHead=this.$$childTail=n,n},$watch:function(e,t,r,i){var s=h(e,"watch");if(s.$$watchDelegate)return s.$$watchDelegate(this,t,r,i,s);var o=this,u=o.$$watchers,a={fn:t,last:d,get:s,exp:e,eq:!!r};return n=null,U(t)||(a.fn=_),u||(u=o.$$watchers=[]),u.unshift(a),function(){rt(u,a),n=null,U(i)&&i()}},$watchGroup:function(e,t){var n=new Array(e.length),r=new Array(e.length),i=[],s=0,o=this,u;return e.length===1?this.$watch(e[0],function(i,s,o){r[0]=i,n[0]=s,t.call(this,r,i===s?r:n,o)}):(x(e,function(e,t){var a=o.$watch(e,function(i,o){r[t]=i,n[t]=o,s++},!1,function(){rt(i,a),i.length||u()});i.push(a)},this),u=o.$watch(function(){return s},function(i,s){t(r,i===s?r:n,o)}),function(){while(i.length)i[0]()})},$watchCollection:function(e,t){function v(e){r=e;var t,n,s;if(!j(r))i!==r&&(i=r,f++);else if(S(r)){i!==c&&(i=c,d=i.length=0,f++),t=r.length,d!==t&&(f++,i.length=d=t);for(var o=0;o<t;o++)s=i[o]!==i[o]&&r[o]!==r[o],!s&&i[o]!==r[o]&&(f++,i[o]=r[o])}else{i!==h&&(i=h={},d=0,f++),t=0;for(n in r)r.hasOwnProperty(n)&&(t++,i.hasOwnProperty(n)?(s=i[n]!==i[n]&&r[n]!==r[n],!s&&i[n]!==r[n]&&(f++,i[n]=r[n])):(d++,i[n]=r[n],f++));if(d>t){f++;for(n in i)i.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(d--,delete i[n])}}return f}function m(){p?(p=!1,t(r,r,n)):t(r,o,n);if(a)if(!j(r))o=r;else if(S(r)){o=new Array(r.length);for(var e=0;e<r.length;e++)o[e]=r[e]}else{o={};for(var i in r)u.call(r,i)&&(o[i]=r[i])}}var n=this,r,i,o,a=t.length>1,f=0,l=s(e,v),c=[],h={},p=!0,d=0;return this.$watch(l,m)},$digest:function(){var r,s,o,u,a=this.$$asyncQueue,f=this.$$postDigestQueue,h,p,v=e,m,g,y=this,b=[],w,E,S;l("$digest"),n=null;do{p=!1,g=y;while(a.length){try{S=a.shift(),S.scope.$eval(S.expression)}catch(x){c(),i(x)}n=null}e:do{if(u=g.$$watchers){h=u.length;while(h--)try{r=u[h];if(r)if((s=r.get(g))!==(o=r.last)&&!(r.eq?ut(s,o):typeof s=="number"&&typeof o=="number"&&isNaN(s)&&isNaN(o)))p=!0,n=r,r.last=r.eq?st(s,null):s,r.fn(s,o===d?s:o,g),v<5&&(w=4-v,b[w]||(b[w]=[]),E=U(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,E+="; newVal: "+pt(s)+"; oldVal: "+pt(o),b[w].push(E));else if(r===n){p=!1;break e}}catch(x){c(),i(x)}}if(!(m=g.$$childHead||g!==y&&g.$$nextSibling))while(g!==y&&!(m=g.$$nextSibling))g=g.$parent}while(g=m);if((p||a.length)&&!(v--))throw c(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,pt(b))}while(p||a.length);c();while(f.length)try{f.shift()()}catch(x){i(x)}},$destroy:function(){if(this.$$destroyed)return;var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0;if(this===f)return;x(this.$$listenerCount,ct(null,p,this)),e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=_,this.$on=this.$watch=this.$watchGroup=function(){return _}},$eval:function(e,t){return s(e)(this,t)},$evalAsync:function(e){!f.$$phase&&!f.$$asyncQueue.length&&o.defer(function(){f.$$asyncQueue.length&&f.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return l("$apply"),this.$eval(e)}catch(t){i(t)}finally{c();try{f.$digest()}catch(t){throw i(t),t}}},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){n[nt(n,t)]=null,p(i,1,e)}},$emit:function(e,t){var n=[],r,s=this,o=!1,u={name:e,targetScope:s,stopPropagation:function(){o=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},a=ft([u],arguments,1),f,l;do{r=s.$$listeners[e]||n,u.currentScope=s;for(f=0,l=r.length;f<l;f++){if(!r[f]){r.splice(f,1),f--,l--;continue}try{r[f].apply(null,a)}catch(c){i(c)}}if(o)return u.currentScope=null,u;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(e,t){var n=this,r=n,s=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1},u=ft([o],arguments,1),a,f,l;while(r=s){o.currentScope=r,a=r.$$listeners[e]||[];for(f=0,l=a.length;f<l;f++){if(!a[f]){a.splice(f,1),f--,l--;continue}try{a[f].apply(null,u)}catch(c){i(c)}}if(!(s=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))while(r!==n&&!(s=r.$$nextSibling))r=r.$parent}return o.currentScope=null,o}};var f=new a;return f}]}function $r(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*(https?|ftp|file|blob):|data:image\//;this.aHrefSanitizationWhitelist=function(t){return B(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return B(e)?(t=e,this):t},this.$get=function(){return function(r,i){var s=i?t:e,o;if(!c||c>=8){o=si(r).href;if(o!==""&&!o.match(s))return"unsafe:"+o}return r}}}function Qr(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Gr(e){if(e==="self")return e;if(F(e)){if(e.indexOf("***")>-1)throw Jr("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Qr(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(z(e))return new RegExp("^"+e.source+"$");throw Jr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Yr(e){var t=[];return B(e)&&x(e,function(e){t.push(Gr(e))}),t}function Zr(){this.SCE_CONTEXTS=Kr;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Yr(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Yr(e)),t},this.$get=["$injector",function(r){function s(e,t){return e==="self"?oi(t):!!e.exec(t.href)}function o(n){var r=si(n.toString()),i,o,u=!1;for(i=0,o=e.length;i<o;i++)if(s(e[i],r)){u=!0;break}if(u)for(i=0,o=t.length;i<o;i++)if(s(t[i],r)){u=!1;break}return u}function u(e){var t=function(t){this.$$unwrapTrustedValue=function(){return t}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function l(e,t){var r=f.hasOwnProperty(e)?f[e]:null;if(!r)throw Jr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(t===null||t===n||t==="")return t;if(typeof t!="string")throw Jr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function c(e){return e instanceof a?e.$$unwrapTrustedValue():e}function h(e,t){if(t===null||t===n||t==="")return t;var r=f.hasOwnProperty(e)?f[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===Kr.RESOURCE_URL){if(o(t))return t;throw Jr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Kr.HTML)return i(t);throw Jr("unsafe","Attempting to use an unsafe value in a safe context.")}var i=function(t){throw Jr("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(i=r.get("$sanitize"));var a=u(),f={};return f[Kr.HTML]=u(a),f[Kr.CSS]=u(a),f[Kr.URL]=u(a),f[Kr.JS]=u(a),f[Kr.RESOURCE_URL]=u(f[Kr.URL]),{trustAs:l,getTrusted:h,valueOf:c}}]}function ei(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sniffer","$sceDelegate",function(t,n,r){if(e&&n.msie&&n.msieDocumentMode<8)throw Jr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=ot(Kr);i.isEnabled=function(){return e},i.trustAs=r.trustAs,i.getTrusted=r.getTrusted,i.valueOf=r.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=D),i.parseAs=function(n,r){var s=t(r);return s.literal&&s.constant?s:t(r,function(e){return i.getTrusted(n,e)})};var s=i.parseAs,u=i.getTrusted,a=i.trustAs;return x(Kr,function(e,t){var n=o(t);i[Xt("parse_as_"+n)]=function(t){return s(e,t)},i[Xt("get_trusted_"+n)]=function(t){return u(e,t)},i[Xt("trust_as_"+n)]=function(t){return a(e,t)}}),i}]}function ti(){this.$get=["$window","$document",function(e,t){var n={},r=O((/android (\d+)/.exec(o((e.navigator||{}).userAgent))||[])[1]),i=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=s.documentMode,a,f=/^(Moz|webkit|O|ms)(?=[A-Z])/,l=s.body&&s.body.style,h=!1,p=!1,d;if(l){for(var v in l)if(d=f.exec(v)){a=d[0],a=a.substr(0,1).toUpperCase()+a.substr(1);break}a||(a="WebkitOpacity"in l&&"webkit"),h="transition"in l||a+"Transition"in l,p="animation"in l||a+"Animation"in l,r&&(!h||!p)&&(h=F(s.body.style.webkitTransition),p=F(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||r<4)&&!i,hashchange:"onhashchange"in e&&(!u||u>7),hasEvent:function(e){if(e=="input"&&c==9)return!1;if(H(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:at(),vendorPrefix:a,transitions:h,animations:p,android:r,msie:c,msieDocumentMode:u}}]}function ni(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,u,a){var f=B(a)&&!a,l=(f?r:n).defer(),c=l.promise,h;return h=t.defer(function(){try{l.resolve(o())}catch(t){l.reject(t),i(t)}finally{delete s[c.$$timeoutId]}f||e.$apply()},u),c.$$timeoutId=h,s[h]=l,c}var s={};return o.cancel=function(e){return e&&e.$$timeoutId in s?(s[e.$$timeoutId].reject("canceled"),delete s[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function si(e,t){var n=e;return c&&(ri.setAttribute("href",n),n=ri.href),ri.setAttribute("href",n),{href:ri.href,protocol:ri.protocol?ri.protocol.replace(/:$/,""):"",host:ri.host,search:ri.search?ri.search.replace(/^\?/,""):"",hash:ri.hash?ri.hash.replace(/^#/,""):"",hostname:ri.hostname,port:ri.port,pathname:ri.pathname.charAt(0)==="/"?ri.pathname:"/"+ri.pathname}}function oi(e){var t=F(e)?si(e):e;return t.protocol===ii.protocol&&t.host===ii.host}function ui(){this.$get=P(e)}function ai(e){function n(r,i){if(j(r)){var s={};return x(r,function(e,t){s[t]=n(t,e)}),s}return e.factory(r+t,i)}var t="Filter";this.register=n,this.$get=["$injector",function(e){return function(n){return e.get(n+t)}}],n("currency",li),n("date",Ni),n("filter",fi),n("json",Ci),n("limitTo",Ai),n("lowercase",ki),n("number",ci),n("orderBy",Oi),n("uppercase",Li)}function fi(){return function(e,t,n){if(!R(e))return e;var r=typeof n,i=[];i.check=function(e){for(var t=0;t<i.length;t++)if(!i[t](e))return!1;return!0},r!=="function"&&(r==="boolean"&&n?n=function(e,t){return y.equals(e,t)}:n=function(e,t){if(e&&t&&typeof e=="object"&&typeof t=="object"){for(var r in e)if(r.charAt(0)!=="$"&&u.call(e,r)&&n(e[r],t[r]))return!0;return!1}return t=(""+t).toLowerCase(),(""+e).toLowerCase().indexOf(t)>-1});var s=function(e,t){if(typeof t=="string"&&t.charAt(0)==="!")return!s(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return n(e,t);case"object":switch(typeof t){case"object":return n(e,t);default:for(var r in e)if(r.charAt(0)!=="$"&&s(e[r],t))return!0}return!1;case"array":for(var i=0;i<e.length;i++)if(s(e[i],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var o in t)(function(e){if(typeof t[e]=="undefined")return;i.push(function(n){return s(e=="$"?n:n&&n[e],t[e])})})(o);break;case"function":i.push(t);break;default:return e}var a=[];for(var f=0;f<e.length;f++){var l=e[f];i.check(l)&&a.push(l)}return a}}function li(e){var t=e.NUMBER_FORMATS;return function(e,n){return H(n)&&(n=t.CURRENCY_SYM),pi(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function ci(e){var t=e.NUMBER_FORMATS;return function(e,n){return pi(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function pi(e,t,n,r,i){if(e==null||!isFinite(e)||j(e))return"";var s=e<0;e=Math.abs(e);var o=e+"",u="",a=[],f=!1;if(o.indexOf("e")!==-1){var l=o.match(/([\d\.]+)e(-?)(\d+)/);l&&l[2]=="-"&&l[3]>i+1?(o="0",e=0):(u=o,f=!0)}if(!f){var c=(o.split(hi)[1]||"").length;H(i)&&(i=Math.min(Math.max(t.minFrac,c),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+ -i);var h=(""+e).split(hi),p=h[0];h=h[1]||"";var d,v=0,m=t.lgSize,g=t.gSize;if(p.length>=m+g){v=p.length-m;for(d=0;d<v;d++)(v-d)%g===0&&d!==0&&(u+=n),u+=p.charAt(d)}for(d=v;d<p.length;d++)(p.length-d)%m===0&&d!==0&&(u+=n),u+=p.charAt(d);while(h.length<i)h+="0";i&&i!=="0"&&(u+=r+h.substr(0,i))}else i>0&&e>-1&&e<1&&(u=e.toFixed(i));return a.push(s?t.negPre:t.posPre),a.push(u),a.push(s?t.negSuf:t.posSuf),a.join("")}function di(e,t,n){var r="";e<0&&(r="-",e=-e),e=""+e;while(e.length<t)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function vi(e,t,n,r){return n=n||0,function(i){var s=i["get"+e]();if(n>0||s>-n)s+=n;return s===0&&n==-12&&(s=12),di(s,t,r)}}function mi(e,t){return function(n,r){var i=n["get"+e](),s=a(t?"SHORT"+e:e);return r[s][i]}}function gi(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=di(Math[t>0?"floor":"ceil"](t/60),2)+di(Math.abs(t%60),2),n}function yi(e){var t=(new Date(e,0,1)).getDay();return new Date(e,0,(t<=4?5:12)-t)}function bi(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function wi(e){return function(t){var n=yi(t.getFullYear()),r=bi(t),i=+r- +n,s=1+Math.round(i/6048e5);return di(s,e)}}function Ei(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Ni(e){function n(e){var n;if(n=e.match(t)){var r=new Date(0),i=0,s=0,o=n[8]?r.setUTCFullYear:r.setFullYear,u=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=O(n[9]+n[10]),s=O(n[9]+n[11])),o.call(r,O(n[1]),O(n[2])-1,O(n[3]));var a=O(n[4]||0)-i,f=O(n[5]||0)-s,l=O(n[6]||0),c=Math.round(parseFloat("0."+(n[7]||0))*1e3);return u.call(r,a,f,l,c),r}return e}var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,r){var i="",s=[],o,u;r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,F(t)&&(t=Ti.test(t)?O(t):n(t)),I(t)&&(t=new Date(t));if(!q(t))return t;while(r)u=xi.exec(r),u?(s=ft(s,u,1),r=s.pop()):(s.push(r),r=null);return x(s,function(n){o=Si[n],i+=o?o(t,e.DATETIME_FORMATS):n.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function Ci(){return function(e){return pt(e,!0)}}function Ai(){return function(e,t){if(!R(e)&&!F(e))return e;Math.abs(Number(t))===Infinity?t=Number(t):t=O(t);if(F(e))return t?t>=0?e.slice(0,t):e.slice(t,e.length):"";var n=[],r,i;t>e.length?t=e.length:t<-e.length&&(t=-e.length),t>0?(r=0,i=t):(r=e.length+t,i=e.length);for(;r<i;r++)n.push(e[r]);return n}}function Oi(e){return function(t,n,r){function o(e,t){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(i!==0)return i}return 0}function u(e,t){return t?function(t,n){return e(n,t)}:e}function a(e,t){var n=typeof e,r=typeof t;return n==r?(q(e)&&q(t)&&(e=e.valueOf(),t=t.valueOf()),n=="string"&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:e<t?-1:1):n<r?-1:1}if(!R(t))return t;if(!n)return t;n=R(n)?n:[n],n=Z(n,function(t){var n=!1,r=t||D;if(F(t)){if(t.charAt(0)=="+"||t.charAt(0)=="-")n=t.charAt(0)=="-",t=t.substring(1);r=e(t);if(r.constant){var i=r();return u(function(e,t){return a(e[i],t[i])},n)}}return u(function(e,t){return a(r(e),r(t))},n)});var i=[];for(var s=0;s<t.length;s++)i.push(t[s]);return i.sort(u(o,r))}}function Mi(e){return U(e)&&(e={link:e}),e.restrict=e.restrict||"AC",P(e)}function Bi(e,t,n,r){function f(t,n){n=n?"-"+Ct(n,"-"):"",r.removeClass(e,(t?hs:cs)+n),r.addClass(e,(t?cs:hs)+n)}var i=this,s=e.parent().controller("form")||Pi,o=0,u=i.$error={},a=[];i.$name=t.name||t.ngForm,i.$dirty=!1,i.$pristine=!0,i.$valid=!0,i.$invalid=!1,i.$submitted=!1,s.$addControl(i),e.addClass(ps),f(!0),i.$rollbackViewValue=function(){x(a,function(e){e.$rollbackViewValue()})},i.$commitViewValue=function(){x(a,function(e){e.$commitViewValue()})},i.$addControl=function(e){Ot(e.$name,"input"),a.push(e),e.$name&&(i[e.$name]=e)},i.$removeControl=function(e){e.$name&&i[e.$name]===e&&delete i[e.$name],x(u,function(t,n){i.$setValidity(n,!0,e)}),rt(a,e)},i.$setValidity=function(e,t,n){var r=u[e];if(t)r&&(rt(r,n),r.length||(o--,o||(f(t),i.$valid=!0,i.$invalid=!1),u[e]=!1,f(!0,e),s.$setValidity(e,!0,i)));else{o||f(t);if(r){if(tt(r,n))return}else u[e]=r=[],o++,f(!1,e),s.$setValidity(e,!1,i);r.push(n),i.$valid=!1,i.$invalid=!0}},i.$setDirty=function(){r.removeClass(e,ps),r.addClass(e,ds),i.$dirty=!0,i.$pristine=!1,s.$setDirty()},i.$setPristine=function(){r.setClass(e,ps,ds+" "+Hi),i.$dirty=!1,i.$pristine=!0,i.$submitted=!1,x(a,function(e){e.$setPristine()})},i.$setSubmitted=function(){r.addClass(e,Hi),i.$submitted=!0,s.$setSubmitted()}}function Qi(e,t,r,i){return e.$setValidity(t,r),r?i:n}function Gi(e,t){var n,r;if(t)for(n=0;n<t.length;++n){r=t[n];if(e[r])return!0}return!1}function Yi(e,t,n,r,i){if(j(i)){e.$$hasNativeValidators=!0;var s=function(s){if(!e.$error[t]&&!Gi(i,r)&&Gi(i,n)){e.$setValidity(t,!1);return}return s};e.$parsers.push(s)}}function Zi(e,t,n,r,i,o){var u=t.prop(s),a=t[0].placeholder,f={};r.$$validityState=u;if(!i.android){var l=!1;t.on("compositionstart",function(e){l=!0}),t.on("compositionend",function(){l=!1,h()})}var h=function(i){if(l)return;var s=t.val(),o=i&&i.type;if(c&&(i||f).type==="input"&&t[0].placeholder!==a){a=t[0].placeholder;return}if(!n.ngTrim||n.ngTrim!=="false")s=Q(s);var h=u&&r.$$hasNativeValidators;if(r.$viewValue!==s||s===""&&h)e.$$phase?r.$setViewValue(s,o,h):e.$apply(function(){r.$setViewValue(s,o,h)})};if(i.hasEvent("input"))t.on("input",h);else{var p,d=function(e){p||(p=o.defer(function(){h(e),p=null}))};t.on("keydown",function(e){var t=e.keyCode;if(t===91||15<t&&t<19||37<=t&&t<=40)return;d(e)}),i.hasEvent("paste")&&t.on("paste cut",d)}t.on("change",h),r.$render=function(){t.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function es(e){if(q(e))return e;if(F(e)){Xi.lastIndex=0;var t=Xi.exec(e);if(t){var n=+t[1],r=+t[2],i=yi(n),s=(r-1)*7;return new Date(n,0,i.getDate()+s)}}return NaN}function ts(e,t){return function(n){var r,i;if(q(n))return n;if(F(n)){e.lastIndex=0,r=e.exec(n);if(r)return r.shift(),i={yyyy:0,MM:1,dd:1,HH:0,mm:0},x(r,function(e,n){n<t.length&&(i[t[n]]=+e)}),new Date(i.yyyy,i.MM-1,i.dd,i.HH,i.mm)}return NaN}}function ns(e,t,r,i){return function(o,u,a,f,l,c,h){Zi(o,u,a,f,l,c),f.$parsers.push(function(i){return f.$isEmpty(i)?(f.$setValidity(e,!0),null):t.test(i)?(f.$setValidity(e,!0),r(i)):(f.$setValidity(e,!1),n)}),f.$formatters.push(function(e){return q(e)?h("date")(e,i):""});if(a.min){var p=function(e){var t=f.$isEmpty(e)||r(e)>=r(a.min);return f.$setValidity("min",t),t?e:n};f.$parsers.push(p),f.$formatters.push(p)}if(a.max){var d=function(e){var t=f.$isEmpty(e)||r(e)<=r(a.max);return f.$setValidity("max",t),t?e:n};f.$parsers.push(d),f.$formatters.push(d)}}}function is(e,t,r,i,s,o){Zi(e,t,r,i,s,o),i.$parsers.push(function(e){var t=i.$isEmpty(e);return t||Ui.test(e)?(i.$setValidity("number",!0),e===""?null:t?e:parseFloat(e)):(i.$setValidity("number",!1),n)}),Yi(i,"number",rs,null,i.$$validityState),i.$formatters.push(function(e){return i.$isEmpty(e)?"":""+e});if(r.min){var u=function(e){var t=parseFloat(r.min);return Qi(i,"min",i.$isEmpty(e)||e>=t,e)};i.$parsers.push(u),i.$formatters.push(u)}if(r.max){var a=function(e){var t=parseFloat(r.max);return Qi(i,"max",i.$isEmpty(e)||e<=t,e)};i.$parsers.push(a),i.$formatters.push(a)}i.$formatters.push(function(e){return Qi(i,"number",i.$isEmpty(e)||I(e),e)})}function ss(e,t,n,r,i,s){Zi(e,t,n,r,i,s),r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||qi.test(n)}}function os(e,t,n,r,i,s){Zi(e,t,n,r,i,s),r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Ri.test(n)}}function us(e,t,n,r){H(n.name)&&t.attr("name",k());var i=function(i){t[0].checked&&e.$apply(function(){r.$setViewValue(n.value,i&&i.type)})};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function as(e,t,n,i,s){var o;if(B(i)){o=e(i);if(!o.constant)throw(new r("ngModel"))("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(t)}return s}function fs(e,t,n,r,i,s,o,u){var a=as(u,e,"ngTrueValue",n.ngTrueValue,!0),f=as(u,e,"ngFalseValue",n.ngFalseValue,!1),l=function(n){e.$apply(function(){r.$setViewValue(t[0].checked,n&&n.type)})};t.on("click",l),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e!==a},r.$formatters.push(function(e){return ut(e,a)}),r.$parsers.push(function(e){return e?a:f})}function Ms(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){var i=e[r];for(var s=0;s<t.length;s++)if(i==t[s])continue e;n.push(i)}return n}function i(e){if(R(e))return e;if(F(e))return e.split(" ");if(j(e)){var t=[],n=0;return x(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(s,o,u){function f(e){var t=c(e,1);u.$addClass(t)}function l(e){var t=c(e,-1);u.$removeClass(t)}function c(e,t){var n=o.data("$classCounts")||{},r=[];return x(e,function(e){if(t>0||n[e])n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e)}),o.data("$classCounts",n),r.join(" ")}function h(e,t){var i=r(t,e),s=r(e,t);s=c(s,-1),i=c(i,1),i.length===0?n.removeClass(o,s):s.length===0?n.addClass(o,i):n.setClass(o,i,s)}function p(e){if(t===!0||s.$index%2===t){var n=i(e||[]);if(!a)f(n);else if(!ut(e,a)){var r=i(a);h(r,n)}}a=ot(e)}var a;s.$watch(u[e],p,!0),u.$observe("class",function(t){p(s.$eval(u[e]))}),e!=="ngClass"&&s.$watch("$index",function(n,r){var o=n&1;if(o!==(r&1)){var a=i(s.$eval(u[e]));o===t?f(a):l(a)}})}}}]}var i=/^\/(.+)\/([a-z]*)$/,s="validity",o=function(e){return F(e)?e.toLowerCase():e},u=Object.prototype.hasOwnProperty,a=function(e){return F(e)?e.toUpperCase():e},f=function(e){return F(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)}):e},l=function(e){return F(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)&-33)}):e};"i"!=="I".toLowerCase()&&(o=f,a=l);var c,h,p,d=[].slice,v=[].push,m=Object.prototype.toString,g=r("ng"),y=e.angular||(e.angular={}),b,w,E=0;c=O((/msie (\d+)/.exec(o(navigator.userAgent))||[])[1]),isNaN(c)&&(c=O((/trident\/.*; rv:(\d+)/.exec(o(navigator.userAgent))||[])[1])),_.$inject=[],D.$inject=[];var R=function(){return U(Array.isArray)?Array.isArray:function(e){return m.call(e)==="[object Array]"}}(),Q=function(){return String.prototype.trim?function(e){return F(e)?e.trim():e}:function(e){return F(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();c<9?w=function(e){return e=e.nodeName?e:e[0],o(e.scopeName&&e.scopeName!="HTML"?e.scopeName+":"+e.nodeName:e.nodeName)}:w=function(e){return o(e.nodeName?e.nodeName:e[0].nodeName)};var at=function(){if(B(at.isActive_))return at.isActive_;var e=!!t.querySelector("[ng-csp]")||!!t.querySelector("[data-ng-csp]");if(!e)try{new Function("")}catch(n){e=!0}return at.isActive_=e},Et=["ng-","data-ng-","ng:","x-ng-"],Nt=/[A-Z]/g,Pt={full:"1.3.0-beta.18",major:1,minor:3,dot:0,codeName:"spontaneous-combustion"};tn.expando="ng339";var Bt=tn.cache={},jt=1,Ft=e.document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},It=e.document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},qt=tn._data=function(e){return this.cache[e[this.expando]]||{}},Ut=/([\:\-\_]+(.))/g,zt=/^moz([A-Z])/,Wt=r("jqLite"),Vt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,$t=/<|&#?\w+;/,Jt=/<([\w:]+)/,Kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qt={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qt.optgroup=Qt.option,Qt.tbody=Qt.tfoot=Qt.colgroup=Qt.caption=Qt.thead,Qt.th=Qt.td;var mn=tn.prototype={ready:function(n){function i(){if(r)return;r=!0,n()}var r=!1;t.readyState==="complete"?setTimeout(i):(this.on("DOMContentLoaded",i),tn(e).on("load",i))},toString:function(){var e=[];return x(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return e>=0?h(this[e]):h(this[this.length+e])},length:0,push:v,sort:[].sort,splice:[].splice},gn={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){gn[o(e)]=e});var yn={};x("input,select,option,textarea,button,form,details".split(","),function(e){yn[e]=!0});var bn={ngMinlength:"minlength",ngMaxlength:"maxlength",ngPattern:"pattern"};x({data:an,removeData:on},function(e,t){tn[t]=e}),x({data:an,inheritedData:dn,scope:function(e){return h.data(e,"$scope")||dn(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return h.data(e,"$isolateScope")||h.data(e,"$isolateScopeNoTemplate")},controller:pn,injector:function(e){return dn(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:fn,css:function(e,t,r){t=Xt(t);if(!B(r)){var i;return c<=8&&(i=e.currentStyle&&e.currentStyle[t],i===""&&(i="auto")),i=i||e.style[t],c<=8&&(i=i===""?n:i),i}e.style[t]=r},attr:function(e,t,r){var i=o(t);if(gn[i]){if(!B(r))return e[t]||(e.attributes.getNamedItem(t)||_).specified?i:n;r?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(B(r))e.setAttribute(t,r);else if(e.getAttribute){var s=e.getAttribute(t,2);return s===null?n:s}},prop:function(e,t,n){if(!B(n))return e[t];e[t]=n},text:function(){function e(e,t){if(H(t)){var n=e.nodeType;return n===1||n===3?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(H(t)){if(e.multiple&&w(e)==="select"){var n=[];return x(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n.length===0?null:n}return e.value}e.value=t},html:function(e,t){if(H(t))return e.innerHTML;rn(e,!0),e.innerHTML=t},empty:vn},function(e,t){tn.prototype[t]=function(t,r){var i,s,o=this.length;if(e!==vn&&(e.length==2&&e!==fn&&e!==pn?t:r)===n){if(j(t)){for(i=0;i<o;i++)if(e===an)e(this[i],t);else for(s in t)e(this[i],s,t[s]);return this}var u=e.$dv,a=u===n?Math.min(o,1):o;for(var f=0;f<a;f++){var l=e(this[f],t,r);u=u?u+l:l}return u}for(i=0;i<o;i++)e(this[i],t,r);return this}}),x({removeData:on,on:function io(e,n,r,i){if(B(i))throw Wt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(!Yt(e))return;var s=un(e,"events"),o=un(e,"handle");s||un(e,"events",s={}),o||un(e,"handle",o=Sn(e,s)),x(n.split(" "),function(n){var i=s[n];if(!i){if(n=="mouseenter"||n=="mouseleave"){var u=t.body.contains||t.body.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1};s[n]=[];var a={mouseleave:"mouseout",mouseenter:"mouseover"};io(e,a[n],function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!u(t,r))&&o(e,n)})}else Ft(e,n,o),s[n]=[];i=s[n]}i.push(r)})},off:sn,one:function(e,t,n){e=h(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;rn(e),x(new tn(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return x(e.childNodes,function(e){e.nodeType===1&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){x(new tn(t),function(t){(e.nodeType===1||e.nodeType===11)&&e.appendChild(t)})},prepend:function(e,t){if(e.nodeType===1){var n=e.firstChild;x(new tn(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=h(t)[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:function(e){rn(e);var t=e.parentNode;t&&t.removeChild(e)},after:function(e,t){var n=e,r=e.parentNode;x(new tn(t),function(e){r.insertBefore(e,n.nextSibling),n=e})},addClass:cn,removeClass:ln,toggleClass:function(e,t,n){t&&x(t.split(" "),function(t){var r=n;H(r)&&(r=!fn(e,t)),(r?cn:ln)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},next:function(e){if(e.nextElementSibling)return e.nextElementSibling;var t=e.nextSibling;while(t!=null&&t.nodeType!==1)t=t.nextSibling;return t},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:nn,triggerHandler:function(e,t,n){var r,i,s,o=t.type||t,u=(un(e,"events")||{})[o];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:_,type:o,target:e},t.type&&(r=A(r,t)),i=ot(u),s=n?[r].concat(n):[r],x(i,function(t){t.apply(e,s)}))}},function(e,t){tn.prototype[t]=function(t,n,r){var i;for(var s=0;s<this.length;s++)H(i)?(i=e(this[s],t,n,r),B(i)&&(i=h(i))):hn(i,e(this[s],t,n,r));return B(i)?i:this},tn.prototype.bind=tn.prototype.on,tn.prototype.unbind=tn.prototype.off}),Tn.prototype={put:function(e,t){this[xn(e,this.nextUid)]=t},get:function(e){return this[xn(e,this.nextUid)]},remove:function(e){var t=this[e=xn(e,this.nextUid)];return delete this[e],t}};var Nn=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Cn=/,/,kn=/^\s*(_?)(\S+?)\1\s*$/,Ln=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,An=r("$injector");_n.$$annotate=Mn;var Pn=r("$animate"),Hn=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var r=t+"-animation";if(t&&t.charAt(0)!=".")throw Pn("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=r,e.factory(r,n)},this.classNameFilter=function(e){return arguments.length===1&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(e,t){function n(e){e&&t(e)}return{enter:function(e,t,r,i){return r?r.after(e):t.prepend(e),n(i),_},leave:function(e,t){return e.remove(),n(t),_},move:function(e,t,n,r){return this.enter(e,t,n,r)},addClass:function(e,t,r){return t=F(t)?t:R(t)?t.join(" "):"",x(e,function(e){cn(e,t)}),n(r),_},removeClass:function(e,t,r){return t=F(t)?t:R(t)?t.join(" "):"",x(e,function(e){ln(e,t)}),n(r),_},setClass:function(e,t,r,i){return x(e,function(e){cn(e,t),ln(e,r)}),n(i),_},enabled:_}}]}],Rn=r("$compile");Un.$inject=["$provide","$$sanitizeUriProvider"];var zn=/^(x[\:\-_]|data[\:\-_])/i,sr=r("$interpolate"),fr=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,lr={http:80,https:443,ftp:21},cr=r("$location");Er.prototype=wr.prototype=br.prototype={$$html5:!1,$$replace:!1,absUrl:Sr("$$absUrl"),url:function(e,t){if(H(e))return this.$$url;var n=fr.exec(e);return n[1]&&this.path(decodeURIComponent(n[1])),(n[2]||n[1])&&this.search(n[3]||""),this.hash(n[5]||"",t),this},protocol:Sr("$$protocol"),host:Sr("$$host"),port:Sr("$$port"),path:xr("$$path",function(e){return e.charAt(0)=="/"?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(F(e))this.$$search=gt(e);else{if(!j(e))throw cr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");x(e,function(t,n){t==null&&delete e[n]}),this.$$search=e}break;default:H(t)||t===null?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:xr("$$hash",D),replace:function(){return this.$$replace=!0,this}};var Cr=r("$parse"),Ar=Function.prototype.call,Or=Function.prototype.apply,Mr=Function.prototype.bind,Dr={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},"undefined":_,"+":function(e,t,r,i){return r=r(e,t),i=i(e,t),B(r)?B(i)?r+i:r:B(i)?i:n},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),(B(n)?n:0)-(B(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"^":function(e,t,n,r){return n(e,t)^r(e,t)},"=":_,"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"&":function(e,t,n,r){return n(e,t)&r(e,t)},"|":function(e,t,n,r){return r(e,t)(e,t,n(e,t))},"!":function(e,t,n){return!n(e,t)}},Pr={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Hr=function(e){this.options=e};Hr.prototype={constructor:Hr,lex:function(e){this.text=e,this.index=0,this.ch=n,this.tokens=[];while(this.index<this.text.length){this.ch=this.text.charAt(this.index);if(this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else if(this.isWhitespace(this.ch))this.index++;else{var t=this.ch+this.peek(),r=t+this.peek(2),i=Dr[this.ch],s=Dr[t],o=Dr[r];o?(this.tokens.push({index:this.index,text:r,fn:o}),this.index+=3):s?(this.tokens.push({index:this.index,text:t,fn:s}),this.index+=2):i?(this.tokens.push({index:this.index,text:this.ch,fn:i}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e){return e.indexOf(this.ch)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return"0"<=e&&e<="9"},isWhitespace:function(e){return e===" "||e==="\r"||e==="	"||e==="\n"||e===""||e===""},isIdent:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||e==="$"},isExpOperator:function(e){return e==="-"||e==="+"||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=B(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Cr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){var e="",t=this.index;while(this.index<this.text.length){var n=o(this.text.charAt(this.index));if(n=="."||this.isNumber(n))e+=n;else{var r=this.peek();if(n=="e"&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&e.charAt(e.length-1)=="e")e+=n;else{if(!this.isExpOperator(n)||!!r&&!!this.isNumber(r)||e.charAt(e.length-1)!="e")break;this.throwError("Invalid exponent")}}this.index++}e=1*e,this.tokens.push({index:t,text:e,constant:!0,fn:function(){return e}})},readIdent:function(){var e=this,t="",n=this.index,r,i,s,o;while(this.index<this.text.length){o=this.text.charAt(this.index);if(o!=="."&&!this.isIdent(o)&&!this.isNumber(o))break;o==="."&&(r=this.index),t+=o,this.index++}if(r){i=this.index;while(i<this.text.length){o=this.text.charAt(i);if(o==="("){s=t.substr(r-n+1),t=t.substr(0,r-n),this.index=i;break}if(!this.isWhitespace(o))break;i++}}var u={index:n,text:t};if(Dr.hasOwnProperty(t))u.fn=Dr[t],u.constant=!0;else{var a=qr(t,this.options,this.text);u.fn=A(function(e,t){return a(e,t)},{assign:function(n,r){return jr(n,t,r,e.text)}})}this.tokens.push(u),s&&(this.tokens.push({index:r,text:"."}),this.tokens.push({index:r+1,text:s}))},readString:function(e){var t=this.index;this.index++;var n="",r=e,i=!1;while(this.index<this.text.length){var s=this.text.charAt(this.index);r+=s;if(i){if(s==="u"){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var u=Pr[s];n+=u||s}i=!1}else if(s==="\\")i=!0;else{if(s===e){this.index++,this.tokens.push({index:t,text:r,string:n,constant:!0,fn:function(){return n}});return}n+=s}this.index++}this.throwError("Unterminated quote",t)}};var Br=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};Br.ZERO=A(function(){return 0},{constant:!0}),Br.prototype={constructor:Br,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var t=this.expect();e=t.fn,e||this.throwError("not a primary expression",t),t.constant&&(e.constant=!0,e.literal=!0)}var n,r;while(n=this.expect("(","[","."))n.text==="("?(e=this.functionCall(e,r),r=null):n.text==="["?(r=e,e=this.objectIndex(e)):n.text==="."?(r=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw Cr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(this.tokens.length===0)throw Cr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){if(this.tokens.length>0){var i=this.tokens[0],s=i.text;if(s===e||s===t||s===n||s===r||!e&&!t&&!n&&!r)return i}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(e,t){return A(function(n,r){return e(n,r,t)},{constant:t.constant})},ternaryFn:function(e,t,n){return A(function(r,i){return e(r,i)?t(r,i):n(r,i)},{constant:e.constant&&t.constant&&n.constant})},binaryFn:function(e,t,n){return A(function(r,i){return t(r,i,e,n)},{constant:e.constant&&n.constant})},statements:function(){var e=[];for(;;){this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain());if(!this.expect(";"))return e.length===1?e[0]:function(t,n){var r;for(var i=0;i<e.length;i++){var s=e[i];s&&(r=s(t,n))}return r}}},filterChain:function(){var e=this.expression(),t;for(;;){if(!(t=this.expect("|")))return e;e=this.binaryFn(e,t.fn,this.filter())}},filter:function(){function r(e,r,i){var s=[i];for(var o=0;o<n.length;o++)s.push(n[o](e,r));return t.apply(e,s)}var e=this.expect(),t=this.$filter(e.text),n=[];while(this.expect(":"))n.push(this.expression());return P(r)},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary(),t,n;return(n=this.expect("="))?(e.assign||this.throwError("implies assignment but ["+this.text.substring(0,n.index)+"] can not be assigned to",n),t=this.ternary(),function(n,r){return e.assign(n,t(n,r),r)}):e},ternary:function(){var e=this.logicalOR(),t,n;if(!(n=this.expect("?")))return e;t=this.assignment();if(n=this.expect(":"))return this.ternaryFn(e,t,this.assignment());this.throwError("expected :",n)},logicalOR:function(){var e=this.logicalAND(),t;for(;;){if(!(t=this.expect("||")))return e;e=this.binaryFn(e,t.fn,this.logicalAND())}},logicalAND:function(){var e=this.equality(),t;if(t=this.expect("&&"))e=this.binaryFn(e,t.fn,this.logicalAND());return e},equality:function(){var e=this.relational(),t;if(t=this.expect("==","!=","===","!=="))e=this.binaryFn(e,t.fn,this.equality());return e},relational:function(){var e=this.additive(),t;if(t=this.expect("<",">","<=",">="))e=this.binaryFn(e,t.fn,this.relational());return e},additive:function(){var e=this.multiplicative(),t;while(t=this.expect("+","-"))e=this.binaryFn(e,t.fn,this.multiplicative());return e},multiplicative:function(){var e=this.unary(),t;while(t=this.expect("*","/","%"))e=this.binaryFn(e,t.fn,this.unary());return e},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(Br.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(e){var t=this,n=this.expect().text,r=qr(n,this.options,this.text);return A(function(t,n,i){return r(i||e(t,n))},{assign:function(r,i,s){var o=e(r,s);return o||e.assign(r,o={}),jr(o,n,i,t.text)}})},objectIndex:function(e){var t=this,r=this.expression();return this.consume("]"),A(function(i,s){var o=e(i,s),u=r(i,s),a;return kr(u,t.text),o?(a=Lr(o[u],t.text),a):n},{assign:function(n,i,s){var o=kr(r(n,s),t.text),u=Lr(e(n,s),t.text);return u||e.assign(n,u={}),u[o]=i}})},functionCall:function(e,t){var n=[];if(this.peekToken().text!==")")do n.push(this.expression());while(this.expect(","));this.consume(")");var r=this;return function(i,s){var o=[],u=t?t(i,s):i;for(var a=0;a<n.length;a++)o.push(n[a](i,s));var f=e(i,s,u)||_;Lr(u,r.text),_r(f,r.text);var l=f.apply?f.apply(u,o):f(o[0],o[1],o[2],o[3],o[4]);return Lr(l,r.text)}},arrayDeclaration:function(){var e=[],t=!0;if(this.peekToken().text!=="]")do{if(this.peek("]"))break;var n=this.expression();e.push(n),n.constant||(t=!1)}while(this.expect(","));return this.consume("]"),A(function(t,n){var r=[];for(var i=0;i<e.length;i++)r.push(e[i](t,n));return r},{literal:!0,constant:t})},object:function(){var e=[],t=!0;if(this.peekToken().text!=="}")do{if(this.peek("}"))break;var n=this.expect(),r=n.string||n.text;this.consume(":");var i=this.expression();e.push({key:r,value:i}),i.constant||(t=!1)}while(this.expect(","));return this.consume("}"),A(function(t,n){var r={};for(var i=0;i<e.length;i++){var s=e[i];r[s.key]=s.value(t,n)}return r},{literal:!0,constant:t})}};var Fr={},Jr=r("$sce"),Kr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ri=t.createElement("a"),ii=si(e.location.href,!0);ai.$inject=["$provide"],li.$inject=["$locale"],ci.$inject=["$locale"];var hi=".",Si={yyyy:vi("FullYear",4),yy:vi("FullYear",2,0,!0),y:vi("FullYear",1),MMMM:mi("Month"),MMM:mi("Month",!0),MM:vi("Month",2,1),M:vi("Month",1,1),dd:vi("Date",2),d:vi("Date",1),HH:vi("Hours",2),H:vi("Hours",1),hh:vi("Hours",2,-12),h:vi("Hours",1,-12),mm:vi("Minutes",2),m:vi("Minutes",1),ss:vi("Seconds",2),s:vi("Seconds",1),sss:vi("Milliseconds",3),EEEE:mi("Day"),EEE:mi("Day",!0),a:Ei,Z:gi,ww:wi(2),w:wi(1)},xi=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Ti=/^\-?\d+$/;Ni.$inject=["$locale"];var ki=P(o),Li=P(a);Oi.$inject=["$parse"];var _i=P({restrict:"E",compile:function(e,n){c<=8&&(!n.href&&!n.name&&n.$set("href",""),e.append(t.createComment("IE fix")));if(!n.href&&!n.xlinkHref&&!n.name)return function(e,t){var n=m.call(t.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),Di={};x(gn,function(e,t){if(e=="multiple")return;var n=Wn("ng-"+t);Di[n]=function(){return{restrict:"A",priority:100,link:function(e,r,i){e.$watch(i[n],function(n){i.$set(t,!!n)})}}}}),x(bn,function(e,t){Di[t]=function(){return{priority:100,link:function(e,n,r){if(t==="ngPattern"&&r.ngPattern.charAt(0)=="/"){var s=r.ngPattern.match(i);if(s){r.$set("ngPattern",new RegExp(s[1],s[2]));return}}e.$watch(r[t],function(n){r.$set(t,n)})}}}}),x(["src","srcset","href"],function(e){var t=Wn("ng-"+e);Di[t]=function(){return{priority:99,link:function(n,r,i){var s=e,o=e;e==="href"&&m.call(r.prop("href"))==="[object SVGAnimatedString]"&&(o="xlinkHref",i.$attr[o]="xlink:href",s=null),i.$observe(t,function(t){if(!t){e==="href"&&i.$set(o,null);return}i.$set(o,t),c&&s&&r.prop(s,i[o])})}}}});var Pi={$addControl:_,$removeControl:_,$setValidity:_,$setDirty:_,$setPristine:_,$setSubmitted:_},Hi="ng-submitted";Bi.$inject=["$element","$attrs","$scope","$animate"];var ji=function(e){return["$timeout",function(t){var r={name:"form",restrict:e?"EAC":"E",controller:Bi,compile:function(){return{pre:function(e,r,i,s){if(!i.action){var o=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault?t.preventDefault():t.returnValue=!1};Ft(r[0],"submit",o),r.on("$destroy",function(){t(function(){It(r[0],"submit",o)},0,!1)})}var u=r.parent().controller("form"),a=i.name||i.ngForm;a&&jr(e,a,s,a),u&&r.on("$destroy",function(){u.$removeControl(s),a&&jr(e,a,n,a),A(s,Pi)})}}}};return r}]},Fi=ji(),Ii=ji(!0),qi=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Ri=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ui=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,zi=/^(\d{4})-(\d{2})-(\d{2})$/,Wi=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)$/,Xi=/^(\d{4})-W(\d\d)$/,Vi=/^(\d{4})-(\d\d)$/,$i=/^(\d\d):(\d\d)$/,Ji=/(\s+|^)default(\s+|$)/,Ki={text:Zi,date:ns("date",zi,ts(zi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ns("datetimelocal",Wi,ts(Wi,["yyyy","MM","dd","HH","mm"]),"yyyy-MM-ddTHH:mm"),time:ns("time",$i,ts($i,["HH","mm"]),"HH:mm"),week:ns("week",Xi,es,"yyyy-Www"),month:ns("month",Vi,ts(Vi,["yyyy","MM"]),"yyyy-MM"),number:is,url:ss,email:os,radio:us,checkbox:fs,hidden:_,button:_,submit:_,reset:_,file:_},rs=["badInput"],ls=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:function(i,s,u,a){a[0]&&(Ki[o(u.type)]||Ki.text)(i,s,u,a[0],t,e,n,r)}}}],cs="ng-valid",hs="ng-invalid",ps="ng-pristine",ds="ng-dirty",vs="ng-untouched",ms="ng-touched",gs=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout",function(e,t,i,s,o,u,a){function m(e,t){t=t?"-"+Ct(t,"-"):"",u.removeClass(s,(e?hs:cs)+t),u.addClass(s,(e?cs:hs)+t)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$validators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=i.name;var f=o(i.ngModel),l=f.assign,c=null,h=this;if(!l)throw r("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",i.ngModel,vt(s));this.$render=_,this.$isEmpty=function(e){return H(e)||e===""||e===null||e!==e};var p=s.inheritedData("$formController")||Pi,d=0,v=this.$error={};s.addClass(ps).addClass(vs),m(!0),this.$setValidity=function(e,t){if(v[e]===!t)return;t?(v[e]&&d--,d||(m(!0),h.$valid=!0,h.$invalid=!1)):(m(!1),h.$invalid=!0,h.$valid=!1,d++),v[e]=!t,m(t,e),p.$setValidity(e,t,h)},this.$setPristine=function(){h.$dirty=!1,h.$pristine=!0,u.removeClass(s,ds),u.addClass(s,ps)},this.$setUntouched=function(){h.$touched=!1,h.$untouched=!0,u.setClass(s,vs,ms)},this.$setTouched=function(){h.$touched=!0,h.$untouched=!1,u.setClass(s,ms,vs)},this.$rollbackViewValue=function(){a.cancel(c),h.$viewValue=h.$$lastCommittedViewValue,h.$render()},this.$validate=function(){if(h.$modelValue!==h.$modelValue)return;var e=h.$modelValue;h.$$runValidators(h.$$invalidModelValue||h.$modelValue,h.$viewValue),e!==h.$modelValue&&h.$$writeModelToScope()},this.$$runValidators=function(e,t){x(h.$validators,function(n,r){h.$setValidity(r,n(e,t))}),h.$modelValue=h.$valid?e:n,h.$$invalidModelValue=h.$valid?n:e},this.$commitViewValue=function(e){var t=h.$viewValue;a.cancel(c);if(!e&&h.$$lastCommittedViewValue===t)return;h.$$lastCommittedViewValue=t,h.$pristine&&(h.$dirty=!0,h.$pristine=!1,u.removeClass(s,ps),u.addClass(s,ds),p.$setDirty());var n=t;x(h.$parsers,function(e){n=e(n)}),h.$modelValue!==n&&(H(h.$$invalidModelValue)||h.$$invalidModelValue!=n)&&(h.$$runValidators(n,t),h.$$writeModelToScope())},this.$$writeModelToScope=function(){var n;h.$options&&h.$options.getterSetter&&U(n=f(e))?n(h.$modelValue):l(e,h.$modelValue),x(h.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t,n){h.$viewValue=e,(!h.$options||h.$options.updateOnDefault)&&h.$$debounceViewValueCommit(t,n)},this.$$debounceViewValueCommit=function(e,t){var n=0,r=h.$options,i;r&&B(r.debounce)&&(i=r.debounce,I(i)?n=i:I(i[e])?n=i[e]:I(i["default"])&&(n=i["default"])),a.cancel(c),n?c=a(function(){h.$commitViewValue(t)},n):h.$commitViewValue(t)},e.$watch(function(){var n=f(e);h.$options&&h.$options.getterSetter&&U(n)&&(n=n());if(h.$modelValue!==n&&(H(h.$$invalidModelValue)||h.$$invalidModelValue!=n)){var r=h.$formatters,i=r.length,s=n;while(i--)s=r[i](s);h.$$runValidators(n,s),h.$viewValue!==s&&(h.$viewValue=h.$$lastCommittedViewValue=s,h.$render())}return n})}],ys=function(){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:gs,link:{pre:function(e,t,n,r){r[2]&&(r[0].$options=r[2].$options);var i=r[0],s=r[1]||Pi;s.$addControl(i),e.$on("$destroy",function(){s.$removeControl(i)})},post:function(e,t,n,r){var i=r[0];i.$options&&i.$options.updateOn&&t.on(i.$options.updateOn,function(t){e.$apply(function(){i.$$debounceViewValueCommit(t&&t.type)})}),t.on("blur",function(t){if(i.$touched)return;e.$apply(function(){i.$setTouched()})})}}}},bs=P({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),ws=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()})}}},Es=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,s){if(!s)return;var o,u=i.ngPattern||i.pattern;i.$observe("pattern",function(e){F(e)&&e.length>0&&(e=new RegExp(e));if(e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",u,e,vt(t));o=e||n,s.$validate()}),s.$validators.pattern=function(e){return s.$isEmpty(e)||H(o)||o.test(e)}}}},Ss=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;var i=0;n.$observe("maxlength",function(e){i=O(e)||0,r.$validate()}),r.$validators.maxlength=function(e){return r.$isEmpty(e)||e.length<=i}}}},xs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;var i=0;n.$observe("minlength",function(e){i=O(e)||0,r.$validate()}),r.$validators.minlength=function(e){return r.$isEmpty(e)||e.length>=i}}}},Ts=function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,i){var s=t.attr(r.$attr.ngList)||", ",o=r.ngTrim!=="false",u=o?Q(s):s,a=function(e){if(H(e))return;var t=[];return e&&x(e.split(u),function(e){e&&t.push(o?Q(e):e)}),t};i.$parsers.push(a),i.$formatters.push(function(e){return R(e)?e.join(s):n}),i.$isEmpty=function(e){return!e||!e.length}}}},Ns=/^(true|false|\d+)$/,Cs=function(){return{restrict:"A",priority:100,compile:function(e,t){return Ns.test(t.ngValue)?function(t,n,r){r.$set("value",t.$eval(r.ngValue))}:function(t,n,r){t.$watch(r.ngValue,function(t){r.$set("value",t)})}}}},ks=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var r=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=Q(this.$options.updateOn.replace(Ji,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Ls=Mi({compile:function(e){return e.addClass("ng-binding"),function(e,t,r){t.data("$binding",r.ngBind),e.$watch(r.ngBind,function(r){t.text(r==n?"":r)})}}}),As=["$interpolate",function(e){return function(t,n,r){var i=e(n.attr(r.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",i),r.$observe("ngBindTemplate",function(e){n.text(e)})}}],Os=["$sce","$parse",function(e,t){return{restrict:"A",compile:function(n,r){return n.addClass("ng-binding"),function(n,r,i){r.data("$binding",i.ngBindHtml);var s=t(i.ngBindHtml),o=t(i.ngBindHtml,function(t){return(t||"").toString()});n.$watch(o,function(){r.html(e.getTrustedHtml(s(n))||"")})}}}}],_s=Ms("",!0),Ds=Ms("Odd",0),Ps=Ms("Even",1),Hs=Mi({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Bs=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],js={};x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Wn("ng-"+e);js[t]=["$parse",function(n){return{restrict:"A",compile:function(r,i){var s=n(i[t]);return function(n,r){r.on(o(e),function(e){n.$apply(function(){s(n,{$event:e})})})}}}}]});var Fs=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,s,o){var u,a,f;n.$watch(i.ngIf,function(s){s?a||o(function(n,s){a=s,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),u={clone:n},e.enter(n,r.parent(),r)}):(f&&(f.remove(),f=null),a&&(a.$destroy(),a=null),u&&(f=_t(u.clone),e.leave(f,function(){f=null}),u=null))})}}}],Is=["$http","$templateCache","$anchorScroll","$animate","$sce",function(e,t,n,r,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:y.noop,compile:function(s,o){var u=o.ngInclude||o.src,a=o.onload||"",f=o.autoscroll;return function(s,o,l,c,h){var p=0,d,v,m,g=function(){v&&(v.remove(),v=null),d&&(d.$destroy(),d=null),m&&(r.leave(m,function(){v=null}),v=m,m=null)};s.$watch(i.parseAsResourceUrl(u),function(u){var l=function(){B(f)&&(!f||s.$eval(f))&&n()},v=++p;u?(e.get(u,{cache:t}).success(function(e){if(v!==p)return;var t=s.$new();c.template=e;var n=h(t,function(e){g(),r.enter(e,null,o,l)});d=t,m=n,d.$emit("$includeContentLoaded"),s.$eval(a)}).error(function(){v===p&&(g(),s.$emit("$includeContentError"))}),s.$emit("$includeContentRequested")):(g(),c.template=null)})}}}}],qs=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,n,r,i){n.html(i.template),e(n.contents())(t)}}}],Rs=Mi({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Us=Mi({terminal:!0,priority:1e3}),zs=["$locale","$interpolate",function(e,t){var n=/{}/g;return{restrict:"EA",link:function(r,i,s){var u=s.count,a=s.$attr.when&&i.attr(s.$attr.when),f=s.offset||0,l=r.$eval(a)||{},c={},h=t.startSymbol(),p=t.endSymbol(),d=/^when(Minus)?(.+)$/;x(s,function(e,t){d.test(t)&&(l[o(t.replace("when","").replace("Minus","-"))]=i.attr(s.$attr[t]))}),x(l,function(e,r){c[r]=t(e.replace(n,h+u+"-"+f+p))}),r.$watch(function(){var n=parseFloat(r.$eval(u));return isNaN(n)?"":(n in l||(n=e.pluralCat(n-f)),c[n](r))},function(t){i.text(t)})}}}],Ws=["$parse","$animate",function(e,n){function o(e){return e.clone[0]}function u(e){return e.clone[e.clone.length-1]}var i="$$NG_REMOVED",s=r("ngRepeat");return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(r,a,f,l,c){var p=f.ngRepeat,d=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),v,m,g,y,b,w,E,T,N,C,k={$id:xn};if(!d)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);E=d[1],T=d[2],g=d[3],v=d[4],v?(m=e(v),y=function(e,t,n){return C&&(k[C]=e),k[N]=t,k.$index=n,m(r,k)}):(b=function(e,t){return xn(t)},w=function(e){return e}),d=E.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!d)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",E);N=d[3]||d[1],C=d[2];var L={};r.$watchCollection(T,function(f){var l,d,v=a[0],m,E={},T,k,A,O,M,_,D,P=[],H;g&&(r[g]=f);var B=function(e,t){e[N]=A,C&&(e[C]=k),e.$index=t,e.$first=t===0,e.$last=t===T-1,e.$middle=!e.$first&&!e.$last,e.$odd=!(e.$even=(t&1)===0)};if(S(f))_=f,M=y||b;else{M=y||w,_=[];for(var j in f)f.hasOwnProperty(j)&&j.charAt(0)!="$"&&_.push(j);_.sort()}T=_.length,d=P.length=_.length;for(l=0;l<d;l++){k=f===_?l:_[l],A=f[k],O=M(k,A,l),Ot(O,"`track by` id");if(L.hasOwnProperty(O))D=L[O],delete L[O],E[O]=D,P[l]=D;else{if(E.hasOwnProperty(O))throw x(P,function(e){e&&e.scope&&(L[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",p,O);P[l]={id:O},E[O]=!1}}for(var F in L)L.hasOwnProperty(F)&&(D=L[F],H=_t(D.clone),n.leave(H),x(H,function(e){e[i]=!0}),D.scope.$destroy());for(l=0,d=_.length;l<d;l++){k=f===_?l:_[l],A=f[k],D=P[l],P[l-1]&&(v=u(P[l-1]));if(D.scope){m=v;do m=m.nextSibling;while(m&&m[i]);o(D)!=m&&n.move(_t(D.clone),null,h(v)),v=u(D),B(D.scope,l)}else c(function(e,r){D.scope=r,e[e.length++]=t.createComment(" end ngRepeat: "+p+" "),n.enter(e,null,h(v)),v=e,D.clone=e,E[D.id]=D,B(D.scope,l)})}L=E})}}}],Xs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(r){e[r?"removeClass":"addClass"](n,"ng-hide")})}}}],Vs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(r){e[r?"addClass":"removeClass"](n,"ng-hide")})}}}],$s=Mi(function(e,t,n){e.$watch(n.ngStyle,function(n,r){r&&n!==r&&x(r,function(e,n){t.css(n,"")}),n&&t.css(n)},!0)}),Js=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,s){var o=i.ngSwitch||i.on,u=[],a=[],f=[],l=[];n.$watch(o,function(o){var c,h;for(c=0,h=f.length;c<h;++c)f[c].remove();f.length=0;for(c=0,h=l.length;c<h;++c){var p=_t(a[c].clone);l[c].$destroy(),f[c]=p,e.leave(p,function(){f.splice(c,1)})}a.length=0,l.length=0;if(u=s.cases["!"+o]||s.cases["?"])n.$eval(i.change),x(u,function(n){n.transclude(function(r,i){l.push(i);var s=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:r};a.push(o),e.enter(r,s.parent(),s)})})})}}}],Ks=Mi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),Qs=Mi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),Gs=Mi({restrict:"EAC",link:function(e,t,n,i,s){if(!s)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",vt(t));s(function(e){t.empty(),t.append(e)})}}),Ys=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if(n.type=="text/ng-template"){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Zs=r("ngOptions"),eo=P({restrict:"A",terminal:!0}),to=["$compile","$parse",function(e,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:_};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r=this,i={},o=s,u,a;r.databound=n.ngModel,r.init=function(e,t,n){o=e,u=t,a=n},r.addOption=function(t,n){Ot(t,'"option value"'),i[t]=!0,o.$viewValue==t&&(e.val(t),a.parent()&&a.remove()),n[0].hasAttribute("selected")&&(n[0].selected=!0)},r.removeOption=function(e){this.hasOption(e)&&(delete i[e],o.$viewValue==e&&this.renderUnknownOption(e))},r.renderUnknownOption=function(t){var n="? "+xn(t)+" ?";a.val(n),e.prepend(a),e.val(n),a.prop("selected",!0)},r.hasOption=function(e){return i.hasOwnProperty(e)},t.$on("$destroy",function(){r.renderUnknownOption=_})}],link:function(s,o,u,a){function N(e,t,n,r){n.$render=function(){var e=n.$viewValue;r.hasOption(e)?(b.parent()&&b.remove(),t.val(e),e===""&&m.prop("selected",!0)):H(e)&&m?t.val(""):r.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){b.parent()&&b.remove(),n.$setViewValue(t.val())})})}function C(e,t,n){var r;n.$render=function(){var e=new Tn(n.$viewValue);x(t.find("option"),function(t){t.selected=B(e.get(t.value))})},e.$watch(function(){ut(r,n.$viewValue)||(r=ot(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];x(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function k(t,s,o){function x(){var e=!1;if(p){var n=o.$modelValue;if(E&&R(n)){e=new Tn([]);var r={};for(var i=0;i<n.length;i++)r[f]=n[i],e.put(E(t,r),n[i])}else e=new Tn(n)}return e}function N(){var e={"":[]},n=[""],r,i,u,d,w,N,C=o.$modelValue,k=b(t)||[],L=l?T(k):k,A,O,M,_,D,P={},H,j=x(),F,I,q;for(D=0;M=L.length,D<M;D++){A=D;if(l){A=L[D];if(A.charAt(0)==="$")continue;P[l]=A}P[f]=k[A],r=h(t,P)||"",(i=e[r])||(i=e[r]=[],n.push(r));if(p)H=B(j.remove(E?E(t,P):m(t,P)));else{if(E){var R={};R[f]=C,H=E(t,R)===E(t,P)}else H=C===m(t,P);j=j||H}q=a(t,P),q=B(q)?q:"",i.push({id:E?E(t,P):l?L[D]:D,label:q,selected:H})}p||(v||C===null?e[""].unshift({id:"",label:"",selected:!j}):j||e[""].unshift({id:"?",label:"",selected:!0}));for(_=0,O=n.length;_<O;_++){r=n[_],i=e[r],S.length<=_?(d={element:y.clone().attr("label",r),label:i.label},w=[d],S.push(w),s.append(d.element)):(w=S[_],d=w[0],d.label!=r&&d.element.attr("label",d.label=r)),F=null;for(D=0,M=i.length;D<M;D++)u=i[D],(N=w[D+1])?(F=N.element,N.label!==u.label&&F.text(N.label=u.label),N.id!==u.id&&F.val(N.id=u.id),F[0].selected!==u.selected&&(F.prop("selected",N.selected=u.selected),c&&F.prop("selected",N.selected))):(u.id===""&&v?I=v:(I=g.clone()).val(u.id).prop("selected",u.selected).attr("selected",u.selected).text(u.label),w.push(N={element:I,label:u.label,id:u.id,selected:u.selected}),F?F.after(I):d.element.append(I),F=I);D++;while(w.length>D)w.pop().element.remove()}while(S.length>_)S.pop()[0].element.remove()}var u;if(!(u=d.match(i)))throw Zs("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",d,vt(s));var a=r(u[2]||u[1]),f=u[4]||u[6],l=u[5],h=r(u[3]||""),m=r(u[2]?u[1]:f),b=r(u[7]),w=u[8],E=w?r(u[8]):null,S=[[{element:s,label:""}]];v&&(e(v)(t),v.removeClass("ng-scope"),v.remove()),s.empty(),s.on("change",function(){t.$apply(function(){var e,r=b(t)||[],i={},u,a,c,h,d,v,g,y;if(p){a=[];for(d=0,g=S.length;d<g;d++){e=S[d];for(h=1,v=e.length;h<v;h++)if((c=e[h].element)[0].selected){u=c.val(),l&&(i[l]=u);if(E)for(y=0;y<r.length;y++){i[f]=r[y];if(E(t,i)==u)break}else i[f]=r[u];a.push(m(t,i))}}}else{u=s.val();if(u=="?")a=n;else if(u==="")a=null;else if(E)for(y=0;y<r.length;y++){i[f]=r[y];if(E(t,i)==u){a=m(t,i);break}}else i[f]=r[u],l&&(i[l]=u),a=m(t,i)}o.$setViewValue(a),N()})}),o.$render=N,t.$watchCollection(b,N),p&&t.$watchCollection(function(){return o.$modelValue},N)}if(!a[1])return;var f=a[0],l=a[1],p=u.multiple,d=u.ngOptions,v=!1,m,g=h(t.createElement("option")),y=h(t.createElement("optgroup")),b=g.clone();for(var w=0,E=o.children(),S=E.length;w<S;w++)if(E[w].value===""){m=v=E.eq(w);break}f.init(l,v,b),p&&(l.$isEmpty=function(e){return!e||e.length===0}),d?k(s,o,l):p?C(s,o,l):N(s,o,l,f)}}}],no=["$interpolate",function(e){var t={addOption:_,removeOption:_};return{restrict:"E",priority:100,compile:function(n,r){if(H(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var s="$selectController",o=n.parent(),u=o.data(s)||o.parent().data(s);u&&u.databound?n.prop("selected",!1):u=t,i?e.$watch(i,function(t,i){r.$set("value",t),i!==t&&u.removeOption(i),u.addOption(t,n)}):u.addOption(r.value,n),n.on("$destroy",function(){u.removeOption(r.value)})}}}}],ro=P({restrict:"E",terminal:!1});if(e.angular.bootstrap){console.log("WARNING: Tried to load angular more than once.");return}kt(),Ht(y),h(t).ready(function(){xt(t,Tt)})}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-animate){display:none !important;}ng\\:form{display:block;}</style>'),define("angular",["jquery"],function(e){return function(){var t,n;return t||e.angular}}(this)),define("directive/share_directive",["angular"],function(e){var t=e.module("directive/share_directive",[]);t.directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){t.which===13&&(e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault())})}}),t.directive("blurMe",["$timeout","$parse",function(e,t){return{link:function(n,r,i){var s=t(i.blurMe);n.$watch(s,function(t){t===!0&&e(function(){r[0].blur()})}),r.bind("focus",function(){s.assign!==undefined&&n.$apply(s.assign(n,!1))})}}}]),t.directive("focusMe",["$timeout","$parse",function(e,t){return{link:function(n,r,i){var s=t(i.focusMe);n.$watch(s,function(t){t===!0&&e(function(){r[0].focus(),r[0].select!==undefined&&r[0].select()})}),r.bind("blur",function(){s.assign!==undefined&&n.$apply(s.assign(n,!1))})}}}])}),define("service/ui",["angular","directive/share_directive"],function(e){var t=e.module("service/ui",["directive/share_directive"]);t.factory("service/ui/prompt",["$modal","service/ui/alert",function(t,n){return function(r,i,s,o){var u='<form name="form" novalidate><div id="service/ui/prompt/dialog" class="modal-header alert alert-info"><h3 class="modal-title">'+r+"</h3>"+"</div>"+'<div class="modal-body">'+'<input id="service/ui/prompt/prompt_txt" name="answer" ng-model="$parent.answer" type="text" ng-required="!is_null_allow" focus-me={{true}}>'+'<label class="error" ng-show="form.answer.$error.required">require</label>'+"</div>"+'<div class="modal-footer">'+'<button id="service/ui/prompt/cancel_btn" class="btn btn-warning" ng-click="cancel()" type="button">cancel</button>'+'<button ng-show="$parent.prefill!=null" ng-disabled="is_unchange()" ng-click="reset()" class="btn btn-primary" type="button">reset</button>'+'<button id="service/ui/prompt/ok_btn" ng-disabled="form.$invalid || is_unchange()" type="submit" class="btn btn-success" ng-click="ok()">ok</button>'+"</div>";"</form>";var a=function(t,r,i,s,o){t.prefill=i,t.answer=i,t.is_null_allow=s,t.is_float=o,t.is_unchange=function(){return e.equals(t.answer,t.prefill)},t.reset=function(){t.prefill!=null&&(t.answer=t.prefill)},t.ok=function(){if(t.answer&&t.is_float&&isNaN(+t.answer)){n("invalid number");return}t.is_float?t.is_null_allow&&t.answer.length==0?r.close(null):r.close(+t.answer):r.close(t.answer)},t.cancel=function(){r.dismiss("_cancel_")}};a.$inject=["$scope","$modalInstance","prefill","is_null_allow","is_float"];var f=t.open({template:u,controller:a,resolve:{prefill:function(){return i},is_null_allow:function(){return s},is_float:function(){return o}},size:"md"});return f.result}}]),t.factory("service/ui/confirm",["$modal",function(e){return function(t,n){var r="";n=="green"?r="alert alert-success":n=="blue"?r="alert alert-info":n=="orange"?r="alert alert-warning":n=="red"&&(r="alert alert-danger");var i='<div id="service/ui/confirm/dialog" class="modal-header '+r+'">'+'<h3 class="modal-title">confirm</h3>'+"</div>"+'<div class="modal-body">'+'<h1 id="service/ui/confirm/message_txt">'+t+"</h1>"+"</div>"+'<div class="modal-footer">'+'<button id="service/ui/confirm/cancel_btn" class="btn btn-warning" ng-click="cancel()" type="button">cancel</button>'+'<button id="service/ui/confirm/ok_btn" type="submit" class="btn btn-success" ng-click="ok()">ok</button>'+"</div>",s=function(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("_cancel_")}};s.$inject=["$scope","$modalInstance"];var o=e.open({template:i,controller:s,size:"md"});return o.result}}]),t.factory("service/ui/alert",["$modal",function(e){return function(t,n,r){n===undefined&&(n="alert"),r===undefined&&(r="red");var i;if(typeof t=="string"){i=t;if(i==="_cancel_"||i===undefined||i==="backdrop click"||i==="escape key press")return}else t.status===0?i="internet is disconnected!":(n="please report ajax bug:",i="url: "+t.config.url);var s="";r=="green"?s="alert alert-success":r=="blue"?s="alert alert-info":r=="orange"?s="alert alert-warning":r=="red"&&(s="alert alert-danger");var o='<form name="form" novalidate><div id="service/ui/alert/dialog" class="modal-header '+s+'">'+'<h3 class="modal-title">'+n+"</h3>"+"</div>"+'<div class="modal-body">'+'<h1 id="service/ui/alert/message_lbl">'+i+"</h1>"+"</div>"+'<div class="modal-footer">'+'<button id="service/ui/alert/ok_btn" type="submit" class="btn btn-success" ng-click="ok()">ok</button>'+"</div>"+"</form>",u=function(e,t){e.ok=function(){t.close()}};u.$inject=["$scope","$modalInstance"];var a=e.open({template:o,controller:u,size:"md"})}}])}),define("app/product_app/model",["angular"],function(e){var t=e.module("product_app/model",[]);t.factory("product_app/model/Product",["product_app/model/Prod_sku_assoc","$injector",function(e,t){function n(e,t,n,r){this.product_id=e,this.name=t,this.sp_lst=n,this.prod_sku_assoc_lst=r}function r(e){if(e.length==0)return null;var t={},n=e[0],r=1;for(var i=0;i<e.length;i++){var s=e[i];t[s]==null?t[s]=1:t[s]++,t[s]>r&&(n=s,r=t[s])}return n}function i(e){if(e.length==0)return null;e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}return n.prototype={constructor:n,get_suggest_main:function(e){if(e=="name")return this.name;var t=null,n=this.get_suggest_extra(e);if(n!=null)if(e=="price"||e=="cost")t=i(n);else if(e=="crv"||e=="is_taxable")t=r(n);return t},get_suggest_extra:function(e){var t=[],n=this.sp_lst;for(var r=0;r<n.length;r++)if(e=="price")n[r].price!=null&&t.push(n[r].price);else if(e=="cost")n[r].get_cost()!=null&&t.push(n[r].get_cost());else if(e=="crv")n[r].get_crv()!=null&&t.push(n[r].get_crv());else if(e=="is_taxable")t.push(n[r].is_taxable);else{if(e!="name")return null;t.push(n[r].name)}return t},get_tax_suggest_statistic:function(){var e=this.get_suggest_extra("is_taxable"),t=0;nontaxable_count=0;for(var n=0;n<e.length;n++)e[n]==1?t++:nontaxable_count++;tax_percent=Math.round(t*100/e.length);var r={is_taxable:!0,value:tax_percent},i={is_taxable:!1,value:100-tax_percent};return[r,i]}},n.build=function(r){Store_product=t.get("sp_app/model/Store_product");var i=null;r.store_product_set!=undefined&&(i=r.store_product_set.map(Store_product.build));var s=null;return r.prodskuassoc_set!=undefined&&(s=r.prodskuassoc_set.map(e.build)),new n(r.product_id,r.name,i,s)},n}]),t.factory("product_app/model/Prod_sku_assoc",[function(){function e(e,t,n,r){this.product_id=e,this.creator_id=t,this.store_lst=n,this.sku_str=r}return e.build=function(t){return new e(t.product_id,t.creator_id,t.store_set,t.sku_str)},e}])}),define("app/sp_app/model",["angular","app/group_app/model","app/product_app/model"],function(e){var t=e.module("sp_app/model",["group_app/model","product_app/model","sp_app/model"]);t.factory("sp_app/model/Store_product",["$injector",function(e){function t(e,t,n,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){this.id=e,this.product_id=t,this.store_id=n,this.name=i,this.price=r(s),this.value_customer_price=r(o),this.crv=r(u),this.is_taxable=a,this.is_sale_report=f,this.p_type=l,this.p_tag=c,this.cost=r(h),this.vendor=p,this.buydown=r(d),this.product=v,this.group_lst=m,this.breakdown_assoc_lst=g,this.kit_assoc_lst=y,this.sp_doc_id=b,this.sp_doc_rev=w}function n(e,t){var n=null;for(var r=0;r<t.length;r++)if(t[r].id==e){n=t[r];break}return n}function r(e){return e==null?null:parseFloat(e)}function i(e,t){if(e==null)return undefined;if(e.breakdown_assoc_lst==undefined)return undefined;if(e.breakdown_assoc_lst.length==0)return e[t];var n=0;for(var r=0;r<e.breakdown_assoc_lst.length;r++){var s=e.breakdown_assoc_lst[r];n+=i(s.breakdown,t)*s.qty}return n=parseFloat(n.toFixed(2)),n}function s(n){var r=[];if(n.group_lst!=undefined){var i=e.get("group_app/model/Group");r=n.group_lst.map(i.build)}var o=null;if(n.product!=undefined){var u=e.get("product_app/model/Product");o=u.build(n.product)}var a=[];if(n.breakdown_assoc_lst!=undefined&&n.breakdown_assoc_lst.length!=0){var f=e.get("sp_app/model/Kit_breakdown_assoc");a=n.breakdown_assoc_lst.map(f.build)}var l=[];return n.kit_assoc_lst!=undefined&&n.breakdown_assoc_lst.length!=0&&(l=n.kit_assoc_lst.map(s)),new t(n.id,n.product_id,n.store_id,n.name,n.price,n.value_customer_price,n.crv,n.is_taxable,n.is_sale_report,n.p_type,n.p_tag,n.cost,n.vendor,n.buydown,o,r,a,l,null,null)}return t.prototype={constructor:t,get_offline_create_sku:function(){return this.is_create_offline?this.product.prod_sku_assoc_lst[0].sku_str:null},is_instantiate_offline:function(){return this.get_rev()!==null},get_rev:function(){return this.sp_doc_rev},is_create_offline:function(){return this.product_id===null},is_kit:function(){return this.breakdown_assoc_lst.length!=0},get_crv:function(){return i(this,"crv")},get_cost:function(){return i(this,"cost")},get_buydown:function(){return i(this,"buydown")},get_my_sku_assoc_lst:function(){var e=[];for(var t=0;t<this.product.prod_sku_assoc_lst.length;t++){var n=this.product.prod_sku_assoc_lst[t],r=n.store_lst.indexOf(this.store_id);r!=-1&&e.push(n)}return e},get_ancestor_lst:function(){if(this.kit_assoc_lst.length===0)return[];var e=[];for(var t=0;t<this.kit_assoc_lst.length;t++){var r=this.kit_assoc_lst[t],i=r.get_ancestor_lst();for(var s=0;s<i.length;s++)n(i[s].id,e)==null&&e.push(i[s])}return e},get_decendent_lst:function(){if(this.breakdown_assoc_lst.length==0)return[];var e=[];for(var t=0;t<this.breakdown_assoc_lst.length;t++){var r=this.breakdown_assoc_lst[t].breakdown,i=r.get_decendent_lst();n(r.id,e)==null&&e.push(r);for(var s=0;s<i.length;s++)n(i[s].breakdown.id,e)==null&&e.push(i[s].breakdown)}return e},is_breakdown_can_be_add:function(e){var t=e.get_decendent_lst();t.push(e);var r=this.get_ancestor_lst();r.push(this);for(var i=0;i<t.length;i++){var s=t[i];if(n(s.id,r)!=null)return!1}return!0}},t.build=s,t}]),t.factory("sp_app/model/Kit_breakdown_assoc",["$injector",function(e){function t(e,t,n){this.id=e,this.breakdown=t,this.qty=n}return t.build=function(n){var r=e.get("sp_app/model/Store_product"),i=r.build(n.breakdown);return new t(n.id,i,n.qty)},t}]),t.factory("sp_app/model/Non_inventory",[function(){function e(e,t,n,r,i){this.name=e,this.price=t,this.is_taxable=n,this.crv=r,this.cost=i}return e.prototype={constructor:e,get_b4_tax_price:function(){var e=this.price+this.crv;return e},get_product_tax:function(e){var t=0;return this.is_taxable&&(t=this.get_b4_tax_price()*e/100),t},get_otd_price:function(e){return this.get_b4_tax_price()+this.get_product_tax(e)}},e}])}),define("app/group_app/model",["angular","app/sp_app/model"],function(e){var t=e.module("group_app/model",["sp_app/model"]);t.factory("group_app/model/Group",["$injector",function(e){function t(e,t,n){this.id=e,this.name=t,this.sp_lst=n}return t.build=function(n){var r=null,i=e.get("sp_app/model/Store_product");return n.sp_lst!=undefined&&(r=n.sp_lst.map(i.build)),new t(n.id,n.name,r)},t}])}),define("app/group_app/service/api",["angular","app/group_app/model"],function(e){var t=e.module("group_app/service/api",["group_app/model"]);t.factory("group_app/service/api",["$http","$q","group_app/model/Group",function(e,t,n){function r(r){var i=t.defer();return e({url:"/group/get_item",method:"GET",params:{group_id:r}}).then(function(e){i.resolve(n.build(e.data))},function(e){i.reject(e)}),i.promise}function i(n,r){var i=t.defer();return e({url:"/group/update_angular",method:"POST",data:{group:JSON.stringify(n),id:r}}).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise}function s(){var r=t.defer();return e({url:"/group/get_lst",method:"GET"}).then(function(e){r.resolve(e.data.map(n.build))},function(e){r.reject(e)}),r.promise}function o(r){var i=t.defer();return e({url:"/group/insert_angular",method:"POST",data:{group:JSON.stringify(r)}}).then(function(e){i.resolve(n.build(e.data))},function(e){return t.reject(e)}),i.promise}function u(n){var i=t.defer();return r(n).then(function(t){t.sp_lst.length===0?e({url:"/group/delete_angular",method:"POST",data:{group_id:n}}).then(function(){i.resolve()},function(e){i.reject(e)}):i.reject("group must be empty to be deleted")},function(e){i.reject(e)}),i.promise}return{delete_item:u,create:o,get_lst:s,get_item:r,edit_item:i}}])}),define("app/group_app/service/search_dlg",["angular","service/ui","app/group_app/service/api","directive/share_directive"],function(e){var t=e.module("group_app/service/search_dlg",["service/ui","directive/share_directive"]);t.factory("group_app/service/search_dlg/multiple",["$modal","service/ui/alert","group_app/service/api",function(e,t,n){return function(){var r='<div class="modal-header"><h3 class="modal-title">select groups</h3></div><div class="modal-body"><input ng-model="query" type="text" placeholder="offline filter" focus-me={{true}}><div><div class="col-sm-6"><table ng-hide="group_lst.length==0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>group</th><th>select</th></tr><tr ng-repeat="group in group_lst | orderBy:\'name\' | filter:query"><td>{{group.name}}</td><td class="alncenter"><button ng-click="toggle_select(group)" class="btn glyphicon" ng-class="is_group_selected(group) ? \'btn-warning glyphicon-check\' : \'btn-primary glyphicon-unchecked\'"></button></td></tr></table><pre ng-show="group_lst.length==0">there is no group to select</pre></div><div class="col-sm-6"><table class="table table-hover table-bordered table-condensed table-striped"><tr><th>group</th><th>remove</th></tr><tr ng-repeat="group in group_result_lst"><td>{{group.name}}</td><td class="alnright"><button ng-click="toggle_select(group)" class="btn btn-warning glyphicon glyphicon-trash"></button></td></tr></table></div><div class="clear"></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-warning">cancel</button><button ng-disabled="group_result_lst.length==0" ng-click="reset()" class="btn btn-primary">reset</button><button id="group_app/service/search_dlg/multiple/ok_btn" ng-disabled="group_result_lst.length==0" ng-click="ok()" class="btn btn-success">ok</button></div>',i=function(e,t,n){e.group_lst=n,e.group_result_lst=[],e.toggle_select=function(t){if(e.is_group_selected(t)){var n=null;for(var r=0;r<e.group_result_lst.length;r++)if(t.id==e.group_result_lst[r].id){n=r;break}e.group_result_lst.splice(n,1)}else e.group_result_lst.push(t)},e.is_group_selected=function(t){var n=!1;for(var r=0;r<e.group_result_lst.length;r++)if(t.id==e.group_result_lst[r].id){n=!0;break}return n},e.reset=function(){e.group_result_lst=[]},e.cancel=function(){t.dismiss("_cancel_")},e.ok=function(){t.close(e.group_result_lst)}};i.$inject=["$scope","$modalInstance","group_lst"];var s=e.open({template:r,controller:i,size:"lg",resolve:{group_lst:function(){var e=n.get_lst();return e.then(function(){},function(e){t(e)}),e}}});return s.result}}])}),define("app/sp_app/service/api/group",["angular","app/sp_app/model"],function(e){var t=e.module("sp_app/service/api/group",["sp_app/model"]);t.factory("sp_app/service/api/group",["$http","$q","sp_app/model/Store_product",function(e,t,n){return{update:function(r){var i=t.defer();return e({url:"/product/group/update_angular",method:"POST",data:{sp:JSON.stringify(r)}}).then(function(e){i.resolve(n.build(e.data))},function(e){i.reject(e)}),i.promise}}}])}),define("service/misc",["angular"],function(e){var t=e.module("service/misc",[]);t.factory("service/misc",[function(){function e(e,t){var n=null;for(var r=0;r<t.length;r++)if(t[r].id==e){n=t[r];break}return n}function t(e,t,n){var r=null;for(var i=0;i<n.length;i++)if(n[i][e]==t){r=n[i];break}return r}function n(e){return parseFloat(e.toFixed(2))}return{get_item_from_lst_base_on_id:e,get_item_from_lst_base_on_property:t,round_float_2_decimal:n}}])}),define("app/sp_app/service/edit/group",["angular","app/group_app/service/search_dlg","app/sp_app/service/api/group","service/ui","service/misc"],function(e){var t=e.module("sp_app/service/edit/group",["group_app/service/search_dlg","service/ui","sp_app/service/api/group","service/misc"]);t.factory("sp_app/service/edit/group",["$modal","group_app/service/search_dlg/multiple","service/ui/alert","sp_app/service/api/group","service/misc",function(t,n,r,i,s){var o='<div class="modal-header"><h3 class="modal-title">Group info: {{sp.name}}</h3></div><div class="modal-body"><button id="sp_app/service/edit/group/add_btn" ng-click="add()" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></button></br><table ng-hide="sp.group_lst.length==0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>group</th><th>remove</th></tr><tr ng-repeat="group_edit in sp.group_lst"><td>{{group_edit.name}}</td><td class="alncenter"><button ng-click="remove(group_edit)" class="btn btn-danger glyphicon glyphicon-trash"></button></td></tr></table><div ng-show="sp.group_lst.length==0"></br><pre>No group!</pre></div></div><div class="modal-footer"><button class="btn btn-warning" ng-click="cancel()">cancel</button><button ng-disabled="is_unchange()" class="btn btn-primary" ng-click="reset()">reset</button><button id="sp_app/service/edit/group/ok_btn" ng-disabled="is_unchange()||form.$invalid" class="btn btn-success" ng-click="ok()">ok</button></div>',u=function(t,o,u,a){t.original_sp=a,t.sp=e.copy(a),t.is_unchange=function(){return e.equals(t.original_sp,t.sp)},t.add=function(){var e=n(!0);e.then(function(e){for(var n=0;n<e.length;n++)s.get_item_from_lst_base_on_id(e[n].id,t.sp.group_lst)==null&&t.sp.group_lst.push(e[n])},function(){})},t.remove=function(e){for(var n=0;n<t.sp.group_lst.length;n++)t.sp.group_lst[n].id===e.id&&t.sp.group_lst.splice(n,1)},t.reset=function(){t.sp=e.copy(t.original_sp)},t.cancel=function(){o.dismiss("cancel")},t.ok=function(){i.update(t.sp).then(function(n){e.copy(n,t.original_sp),o.close(t.original_sp)},function(e){r(e)})}};return u.$inject=["$scope","$modalInstance","$http","original_sp"],function(e){var n=t.open({template:o,controller:u,backdrop:"static",size:"lg",resolve:{original_sp:function(){return e}}});return n.result}}])}),define("app/sp_app/service/api/search",["angular","app/sp_app/model","app/product_app/model"],function(e){var t=e.module("sp_app/service/api/search",["sp_app/model","product_app/model"]);t.factory("sp_app/service/api/search",["$http","$q","sp_app/model/Store_product","product_app/model/Product",function(e,t,n,r){return{product_id_search:function(r){var i=t.defer();return e({url:"/product/search_by_product_id",method:"GET",params:{product_id:r}}).then(function(e){var t=n.build(e.data);i.resolve(t)},function(e){i.reject(e)}),i.promise},name_search:function(r,i){var s=t.defer();r=r.trim();if(r.length==0)return s.reject("error: name search is empty"),s.promise;var o=r.split(" ");return o.length>2?(s.reject("error: search 2 words maximum"),s.promise):(e({url:"/product/search_by_name_angular",method:"GET",params:{name_str:r,after:i}}).then(function(e){s.resolve(e.data.map(n.build))},function(e){s.reject(e)}),s.promise)},sku_search:function(i){i=i.trim();if(i.length==0)return t.reject("error: sku is empty");if(i.indexOf(" ")>=0)return t.reject("error: sku cannot contain space");var s=t.defer();return e({url:"/product/search_by_sku_angular",method:"GET",params:{sku_str:i}}).then(function(e){var t={prod_store__prod_sku__1_1:e.data.prod_store__prod_sku__1_1.map(n.build),prod_store__prod_sku__1_0:e.data.prod_store__prod_sku__1_0.map(n.build),prod_store__prod_sku__0_0:e.data.prod_store__prod_sku__0_0.map(r.build)};s.resolve(t)},function(e){s.reject(e)}),s.promise},name_sku_search:function(r){var i=r.split(" ");if(i.length>2){var s=t.defer();return s.reject("2 words search max"),s.promise}var s=t.defer();return e({url:"/product/search_by_name_sku_angular",method:"GET",params:{search_str:r}}).then(function(e){s.resolve(e.data.map(n.build))},function(e){s.reject(e)}),s.promise}}}])}),define("app/sp_ll_app/service/search/name_sku_online_dlg",["angular","directive/share_directive","app/sp_app/service/api/search","service/misc"],function(e){var t=e.module("sp_ll_app/service/search/name_sku_online_dlg",["directive/share_directive","sp_app/service/api/search","service/misc"]);t.factory("sp_ll_app/service/search/name_sku_online_dlg/multiple",["$modal","sp_app/service/api/search","service/misc",function(e,t,n){var r='<div class="modal-header"><h3 class="modal-title">search</h3></div><div class="modal-body"><input id="sp_ll_app/service/search/name_sku_online_dlg/multiple/search_txt" type="text" ng-model="$parent.search_str" ng-enter="search()" placeholder="name/sku" focus-me="{{true}}"><input ng-model="$parent.query" type="text" placeholder="local filter"><div><div class="col-sm-6"><div ng-hide="message.length == 0"><pre>{{message}}</pre></div><table class="table table-hover table-bordered table-condensed table-striped"><tr><th>name</th><th>price</th><th>select</th></tr><tr ng-repeat="sp_multiple in sp_lst | orderBy:\'name\' | filter:$parent.query"><td>{{sp_multiple.name}}</td><td class="alnright">{{sp_multiple.price | currency}}</td><td class="alncenter"><button ng-class="is_sp_selected(sp_multiple) ? \'btn-warning glyphicon-check\' : \'btn-primary glyphicon-unchecked\'" class="btn glyphicon" ng-click="toggle_select(sp_multiple)"></button></td></tr></table></div><div class="col-sm-6"><table class="table table-hover table-bordered table-condensed table-striped"><tr><th>name</th><th>price</th><th>remove</th></tr><tr ng-repeat="sp_select in result_sp_lst | orderBy:\'name\'"><td>{{sp_select.name}}</td><td class="alnright">{{sp_select.price|currency}}</td><td class="alncenter"><button class="btn btn-warning glyphicon glyphicon-trash" ng-click="remove(sp_select)"></button></td></tr></table></div></div><div class="clear"></div></div><div class="modal-footer"><button class="btn btn-warning" ng-click="cancel()">cancel</button><button ng-disabled="result_sp_lst.length==0" class="btn btn-primary" ng-click="reset()">reset</button><button id="sp_ll_app/service/search/name_sku_online_dlg/multiple/ok_btn" ng-disabled="result_sp_lst.length==0" class="btn btn-success" ng-click="ok()">ok</button></div>',i=function(e,r,i){e.message="",e.sp_lst="",e.result_sp_lst=[],e.query="",e.ok=function(){r.close(e.result_sp_lst)},e.is_sp_selected=function(t){return n.get_item_from_lst_base_on_id(t.id,e.result_sp_lst)!=null},e.reset=function(){e.result_sp_lst=[]},e.toggle_select=function(t){e.is_sp_selected(t)?e.remove(t):e.result_sp_lst.push(t)},e.remove=function(t){var n=null;for(var r=0;r<e.result_sp_lst.length;r++)if(t.id==e.result_sp_lst[r].id){n=r;break}e.result_sp_lst.splice(n,1)},e.search=function(){e.query="",e.search_str=e.search_str.trim(),e.last_search_str=e.search_str;if(e.search_str.length==0){e.sp_lst=[],e.message="";return}t.name_sku_search(e.search_str).then(function(t){e.sp_lst=t,e.sp_lst.length==0?e.message="no result for '"+e.search_str+"'":e.message=""},function(t){e.message=t})},e.cancel=function(){r.dismiss("_cancel_")}};return i.$inject=["$scope","$modalInstance","$http"],function(){var t=e.open({template:r,controller:i,size:"lg"});return t.result}}]),t.factory("sp_ll_app/service/search/name_sku_online_dlg/single",["$modal","sp_app/service/api/search",function(e,t){var n='<div class="modal-header"><h3 class="modal-title">search</h3></div><div class="modal-body"><input id="sp_ll_app/service/search/name_sku_online_dlg/single/search_txt" type="text" ng-model="$parent.search_str" ng-enter="search()" placeholder="name/sku" focus-me={{true}}><table ng-hide="sp_lst.length==0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>name</th><th>price</th><th>select</th></tr><tr ng-repeat="search_sp_single in sp_lst"><td>{{search_sp_single.name}}</td><td>{{search_sp_single.price}}</td><td class="alncenter"><button class="btn btn-primary btn-xs" ng-click="select(search_sp_single)">select</button></td></tr></table><div ng-hide="message.length == 0"><pre>{{message}}</pre></div></div><div class="modal-footer"><button class="btn btn-warning" ng-click="cancel()">cancel</button></div>',r=function(e,n,r){e.message="",e.sp_lst="",e.select=function(e){n.close(e)},e.search=function(){e.search_str=e.search_str.trim(),e.last_search_str=e.search_str;if(e.search_str.length==0){e.sp_lst=[],e.message="";return}t.name_sku_search(e.search_str).then(function(t){e.sp_lst=t,e.sp_lst.length==0?e.message="no result for '"+e.search_str+"'":e.message=""},function(t){e.message=t})},e.cancel=function(){n.dismiss("_cancel_")}};return r.$inject=["$scope","$modalInstance","$http"],function(){var t=e.open({template:n,controller:r,size:"lg"});return t.result}}])}),define("app/sp_app/service/api/kit",["angular","app/sp_app/model"],function(e){var t=e.module("sp_app/service/api/kit",["sp_app/model"]);t.factory("sp_app/service/api/kit",["$http","$q","sp_app/model/Store_product",function(e,t,n){return{update:function(r){var i=t.defer();return e({url:"/product/kit/update_angular",method:"POST",data:{sp:JSON.stringify(r)}}).then(function(e){i.resolve(n.build(e.data))},function(e){i.reject(e)}),i.promise}}}])}),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("pouchdb_raw",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PouchDB=e()}}(function(){var define,module,exports;return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){function l(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n)===!0)return e[n];return!1}function c(e){return function(t,n){t||n[0].error?e(t||n[0]):e(null,n[0])}}function h(e){var t={},n=[];return i.traverseRevTree(e,function(e,r,i,s){var o=r+"-"+i;return e&&(t[o]=0),s!==undefined&&n.push({from:s,to:o}),o}),n.reverse(),n.forEach(function(e){t[e.from]===undefined?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}function p(e,t,n){var i="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.descending&&i.reverse();if(!i.length)return e._allDocs({limit:0},n);var s={offset:t.skip};return f.all(i.map(function(n,i){var o=r.extend(!0,{key:n,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete o[e]}),new f(function(t,r){e._allDocs(o,function(e,i){if(e)return r(e);s.total_rows=i.total_rows,t(i.rows[0]||{key:n,error:"not_found"})})})})).then(function(e){return s.rows=e,s})}function d(){var e=this;o.call(this),e.autoCompact=function(t){return!e.auto_compaction||e.type()==="http"?t:function(n,r){if(n)t(n);else{var i=r.length,s=function(){i--,i||t(null,r)};if(!r.length)return t(null,r);r.forEach(function(t){t.ok&&t.id?e.compactDocument(t.id,1,s):s()})}}};var t=0,n,r=["change","delete","create","update"];this.on("newListener",function(i){if(!~r.indexOf(i))return;if(t){t++;return}t++;var s=0;n=this.changes({conflicts:!0,include_docs:!0,continuous:!0,since:"now",onChange:function(t){if(t.seq<=s)return;s=t.seq,e.emit("change",t),t.doc._deleted?e.emit("delete",t):t.doc._rev.split("-")[0]==="1"?e.emit("create",t):e.emit("update",t)}})}),this.on("removeListener",function(e){if(!~r.indexOf(e))return;t--;if(t)return;n.cancel()})}var r=e("./utils"),i=e("./merge"),s=e("./deps/errors"),o=e("events").EventEmitter,u=e("./deps/upsert"),a=e("./changes"),f=r.Promise;r.inherits(d,o),t.exports=d,d.prototype.post=r.adapterFun("post",function(e,t,n){typeof t=="function"&&(n=t,t={});if(typeof e!="object"||Array.isArray(e))return n(s.NOT_AN_OBJECT);this.bulkDocs({docs:[e]},t,this.autoCompact(c(n)))}),d.prototype.put=r.adapterFun("put",r.getArguments(function(e){var t,n,i,o,u=e.shift(),a="_id"in u;if(typeof u!="object"||Array.isArray(u))return o=e.pop(),o(s.NOT_AN_OBJECT);u=r.clone(u);for(;;){t=e.shift(),n=typeof t,n==="string"&&!a?(u._id=t,a=!0):n!=="string"||!a||"_rev"in u?n==="object"?i=t:n==="function"&&(o=t):u._rev=t;if(!e.length)break}i=i||{};var f=r.invalidIdError(u._id);if(f)return o(f);if(r.isLocalId(u._id)&&typeof this._putLocal=="function")return u._deleted?this._removeLocal(u,o):this._putLocal(u,o);this.bulkDocs({docs:[u]},i,this.autoCompact(c(o)))})),d.prototype.putAttachment=r.adapterFun("putAttachment",function(e,t,n,r,i,o){function a(e){return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:r},u.put(e)}var u=this;return typeof i=="function"&&(o=i,i=r,r=n,n=null),typeof i=="undefined"&&(i=r,r=n,n=null),u.get(e).then(function(e){if(e._rev!==n)throw s.REV_CONFLICT;return a(e)},function(t){if(t.error===s.MISSING_DOC.error)return a({_id:e});throw t})}),d.prototype.removeAttachment=r.adapterFun("removeAttachment",function(e,t,n,r){var i=this;i.get(e,function(e,o){if(e){r(e);return}if(o._rev!==n){r(s.REV_CONFLICT);return}if(!o._attachments)return r();delete o._attachments[t],Object.keys(o._attachments).length===0&&delete o._attachments,i.put(o,r)})}),d.prototype.remove=r.adapterFun("remove",function(e,t,n,i){var s;typeof t=="string"?(s={_id:e,_rev:t},typeof n=="function"&&(i=n,n={})):(s=e,typeof t=="function"?(i=t,n={}):(i=n,n=t)),n=r.clone(n||{}),n.was_delete=!0;var o={_id:s._id,_rev:s._rev||n.rev};o._deleted=!0;if(r.isLocalId(o._id)&&typeof this._removeLocal=="function")return this._removeLocal(s,i);this.bulkDocs({docs:[o]},n,c(i))}),d.prototype.revsDiff=r.adapterFun("revsDiff",function(e,t,n){function a(e,t){u.has(e)||u.set(e,{missing:[]}),u.get(e).missing.push(t)}function f(t,n){var r=e[t].slice(0);i.traverseRevTree(n,function(e,n,i,s,o){var u=n+"-"+i,f=r.indexOf(u);if(f===-1)return;r.splice(f,1),o.status!=="available"&&a(t,u)}),r.forEach(function(e){a(t,e)})}typeof t=="function"&&(n=t,t={}),t=r.clone(t);var s=Object.keys(e);if(!s.length)return n(null,{});var o=0,u=new r.Map;s.map(function(t){this._getRevisionTree(t,function(r,i){if(r&&r.status===404&&r.message==="missing")u.set(t,{missing:e[t]});else{if(r)return n(r);f(t,i)}if(++o===s.length){var a={};return u.forEach(function(e,t){a[t]=e}),n(null,a)}})},this)}),d.prototype.compactDocument=r.adapterFun("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(s,o){if(s)return n(s);var u=h(o),a=[],f=[];Object.keys(u).forEach(function(e){u[e]>t&&a.push(e)}),i.traverseRevTree(o,function(e,t,n,r,i){var s=t+"-"+n;i.status==="available"&&a.indexOf(s)!==-1&&(i.status="missing",f.push(s))}),r._doCompaction(e,o,f,n)})}),d.prototype.compact=r.adapterFun("compact",function(e,t){typeof e=="function"&&(t=e,e={});var n=this;e=r.clone(e||{}),n.get("_local/compaction")["catch"](function(){return!1}).then(function(r){if(typeof n._compact=="function")return r&&r.last_seq&&(e.last_seq=r.last_seq),n._compact(e,t)})}),d.prototype._compact=function(e,t){function u(){s.get("_local/compaction")["catch"](function(){return!1}).then(function(e){return e=e||{_id:"_local/compaction"},e.last_seq=o,s.put(e)}).then(function(){t()},t)}function a(){r--,!r&&n&&u()}function f(e){r++,s.compactDocument(e.id,0).then(a,t)}var n=!1,r=0,i={returnDocs:!1},s=this,o;e.last_seq&&(i.since=e.last_seq),s.changes(i).on("change",f).on("complete",function(e){n=!0,o=e.last_seq,r||u()}).on("error",t)},d.prototype.get=r.adapterFun("get",function(e,t,n){function a(){var r=[],i=o.length;if(!i)return n(null,r);o.forEach(function(s){u.get(e,{rev:s,revs:t.revs,attachments:t.attachments},function(e,t){e?r.push({missing:s}):r.push({ok:t}),i--,i||n(null,r)})})}typeof t=="function"&&(n=t,t={});if(typeof e!="string")return n(s.INVALID_ID);if(r.isLocalId(e)&&typeof this._getLocal=="function")return this._getLocal(e,n);var o=[],u=this;if(t.open_revs){if(t.open_revs==="all")this._getRevisionTree(e,function(e,t){e&&(t=[]),o=i.collectLeaves(t).map(function(e){return e.rev}),a()});else{if(!Array.isArray(t.open_revs))return n(s.error(s.UNKNOWN_ERROR,"function_clause"));o=t.open_revs;for(var f=0;f<o.length;f++){var c=o[f];if(typeof c!="string"||!/^\d+-/.test(c))return n(s.error(s.BAD_REQUEST,"Invalid rev format"))}a()}return}return this._get(e,t,function(e,s){t=r.clone(t);if(e)return n(e);var o=s.doc;if(!o)return n(new Error("no doc!"));var a=s.metadata,f=s.ctx;if(t.conflicts){var c=i.collectConflicts(a);c.length&&(o._conflicts=c)}if(t.revs||t.revs_info){var h=i.rootToLeaf(a.rev_tree),p=l(h,function(e){return e.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])!==-1}),d=p.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,v=p.ids.length-d;p.ids.splice(d,v),p.ids.reverse(),t.revs&&(o._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map(function(e){return e.id})});if(t.revs_info){var m=p.pos+p.ids.length;o._revs_info=p.ids.map(function(e){return m--,{rev:m+"-"+e.id,status:e.opts.status}})}}t.local_seq&&(o._local_seq=s.metadata.seq);if(t.attachments&&o._attachments){var g=o._attachments,y=Object.keys(g).length;if(y===0)return n(null,o);Object.keys(g).forEach(function(e){this._getAttachment(g[e],{encode:!0,ctx:f},function(t,r){var i=o._attachments[e];i.data=r,delete i.stub,--y||n(null,o)})},u)}else{if(o._attachments)for(var b in o._attachments)o._attachments.hasOwnProperty(b)&&(o._attachments[b].stub=!0);n(null,o)}})}),d.prototype.getAttachment=r.adapterFun("getAttachment",function(e,t,n,i){var o=this;n instanceof Function&&(i=n,n={}),n=r.clone(n),this._get(e,n,function(e,r){if(e)return i(e);if(!r.doc._attachments||!r.doc._attachments[t])return i(s.MISSING_DOC);n.ctx=r.ctx,o._getAttachment(r.doc._attachments[t],n,i)})}),d.prototype.allDocs=r.adapterFun("allDocs",function(e,t){typeof e=="function"&&(t=e,e={}),e=r.clone(e),e.skip=typeof e.skip!="undefined"?e.skip:0;if("keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(n){t(s.error(s.QUERY_PARSE_ERROR,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(this.type()!=="http")return p(this,e,t)}return this._allDocs(e,t)}),d.prototype.changes=function(e,t){return typeof e=="function"&&(t=e,e={}),new a(this,e,t)},d.prototype.close=r.adapterFun("close",function(e){return this._closed=!0,this._close(e)}),d.prototype.info=r.adapterFun("info",function(e){var t=this;this._info(function(n,r){if(n)return e(n);r.db_name=r.db_name||t._db_name,r.auto_compaction=!!t._auto_compaction&&t.type()!=="http",e(null,r)})}),d.prototype.id=r.adapterFun("id",function(e){return this._id(e)}),d.prototype.type=function(){return typeof this._type=="function"?this._type():this.adapter},d.prototype.bulkDocs=r.adapterFun("bulkDocs",function(e,t,n){typeof t=="function"&&(n=t,t={}),t=r.clone(t),Array.isArray(e)&&(e={docs:e});if(!e||!e.docs||!Array.isArray(e.docs))return n(s.MISSING_BULK_DOCS);for(var i=0;i<e.docs.length;++i)if(typeof e.docs[i]!="object"||Array.isArray(e.docs[i]))return n(s.NOT_AN_OBJECT);return e=r.clone(e),"new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0),this._bulkDocs(e,t,this.autoCompact(n))}),d.prototype.registerDependentDatabase=r.adapterFun("registerDependentDatabase",function(e,t){function r(t){return t.dependentDbs=t.dependentDbs||{},t.dependentDbs[e]?!1:(t.dependentDbs[e]=!0,t)}var n=new this.constructor(e,{adapter:this._adapter});u(this,"_local/_pouch_dependentDbs",r,function(e){return e?t(e):t(null,{db:n})})})},{"./changes":6,"./deps/errors":11,"./deps/upsert":13,"./merge":18,"./utils":23,events:27}],2:[function(e,t,n){(function(n){function o(e){var t=o.options,n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=i)}),r}function u(e){return/^_(design|local)/.test(e)?e:encodeURIComponent(e)}function a(e){return!e._attachments||!Object.keys(e._attachments)?i.Promise.resolve():i.Promise.all(Object.keys(e._attachments).map(function(t){var r=e._attachments[t];if(r.data&&typeof r.data!="string"){if(typeof n===undefined||n.browser)return new i.Promise(function(e){var t=new FileReader;t.onloadend=function(t){r.data=i.btoa(i.arrayBufferToBinaryString(t.target.result)),e()},t.readAsArrayBuffer(r.data)});r.data=r.data.toString("base64")}}))}function f(e,t){if(/http(s?):/.test(e)){var n=o(e);n.remote=!0;if(n.user||n.password)n.auth={username:n.user,password:n.password};var r=n.path.replace(/(^\/|\/$)/g,"").split("/");n.db=r.pop(),n.path=r.join("/"),t=t||{},t=i.clone(t),n.headers=t.headers||{};if(t.auth||n.auth){var s=t.auth||n.auth,u=i.btoa(s.username+":"+s.password);n.headers.Authorization="Basic "+u}return t.headers&&(n.headers=t.headers),n}return{host:"",path:"/",db:e,auth:!1}}function l(e,t){return c(e,e.db+"/"+t)}function c(e,t){if(e.remote){var n=e.path?"/":"";return e.protocol+"://"+e.host+":"+e.port+"/"+e.path+n+t}return"/"+t}function h(e,t){function d(e,t){return i.ajax(i.extend({},p,e),t)}var n=this;n.getHost=e.getHost?e.getHost:f;var o=n.getHost(e.name,e),h=l(o,"");n.getUrl=function(){return h},n.getHeaders=function(){return i.clone(o.headers)};var p=e.ajax||{};e=i.clone(e);var v=function(){d({headers:o.headers,method:"PUT",url:h},function(e,r){e&&e.status===401?d({headers:o.headers,method:"HEAD",url:h},function(e,r){e?t(e):t(null,n)}):!e||e.status===412?t(null,n):t(e)})};e.skipSetup||d({headers:o.headers,method:"GET",url:h},function(e,r){e?e.status===404?v():t(e):t(null,n)}),n.type=function(){return"http"},n.id=i.adapterFun("id",function(e){d({headers:o.headers,method:"GET",url:c(o,"")},function(t,n){var r=n&&n.uuid?n.uuid+o.db:l(o,"");e(null,r)})}),n.request=i.adapterFun("request",function(e,t){e.headers=o.headers,e.url=l(o,e.url),d(e,t)}),n.compact=i.adapterFun("compact",function(e,t){typeof e=="function"&&(t=e,e={}),e=i.clone(e),d({headers:o.headers,url:l(o,"_compact"),method:"POST"},function(){function r(){n.info(function(n,i){i.compact_running?setTimeout(r,e.interval||200):t()})}typeof t=="function"&&r()})}),n._info=function(e){d({headers:o.headers,method:"GET",url:l(o,"")},function(t,n){t?e(t):(n.host=l(o,""),e(null,n))})},n.get=i.adapterFun("get",function(e,t,n){typeof t=="function"&&(n=t,t={}),t=i.clone(t),t.auto_encode===undefined&&(t.auto_encode=!0);var r=[];t.revs&&r.push("revs=true"),t.revs_info&&r.push("revs_info=true"),t.local_seq&&r.push("local_seq=true"),t.open_revs&&(t.open_revs!=="all"&&(t.open_revs=JSON.stringify(t.open_revs)),r.push("open_revs="+t.open_revs)),t.attachments&&r.push("attachments=true"),t.rev&&r.push("rev="+t.rev),t.conflicts&&r.push("conflicts="+t.conflicts),r=r.join("&"),r=r===""?"":"?"+r,t.auto_encode&&(e=u(e));var s={headers:o.headers,method:"GET",url:l(o,e+r)},a=e.split("/");if(a.length>1&&a[0]!=="_design"&&a[0]!=="_local"||a.length>2&&a[0]==="_design"&&a[0]!=="_local")s.binary=!0;d(s,function(e,t,r){if(e)return n(e);n(null,t,r)})}),n.remove=i.adapterFun("remove",function(e,t,n,r){var i;typeof t=="string"?(i={_id:e,_rev:t},typeof n=="function"&&(r=n,n={})):(i=e,typeof t=="function"?(r=t,n={}):(r=n,n=t));var s=i._rev||n.rev;d({headers:o.headers,method:"DELETE",url:l(o,u(i._id))+"?rev="+s},r)}),n.getAttachment=i.adapterFun("getAttachment",function(e,t,r,s){typeof r=="function"&&(s=r,r={}),r=i.clone(r),r.auto_encode===undefined&&(r.auto_encode=!0),r.auto_encode&&(e=u(e)),r.auto_encode=!1,n.get(e+"/"+t,r,s)}),n.removeAttachment=i.adapterFun("removeAttachment",function(e,t,n,r){d({headers:o.headers,method:"DELETE",url:l(o,u(e)+"/"+t)+"?rev="+n},r)}),n.putAttachment=i.adapterFun("putAttachment",function(e,t,n,r,s,a){typeof s=="function"&&(a=s,s=r,r=n,n=null),typeof s=="undefined"&&(s=r,r=n,n=null);var f=u(e)+"/"+t,c=l(o,f);n&&(c+="?rev="+n);var h={headers:i.clone(o.headers),method:"PUT",url:c,processData:!1,body:r,timeout:6e4};h.headers["Content-Type"]=s,d(h,a)}),n.put=i.adapterFun("put",i.getArguments(function(e){var t,n,r,f=e.shift(),c="_id"in f,h=e.pop();if(typeof f!="object"||Array.isArray(f))return h(s.NOT_AN_OBJECT);f=i.clone(f),a(f).then(function(){for(;;){t=e.shift(),n=typeof t,n==="string"&&!c?(f._id=t,c=!0):n!=="string"||!c||"_rev"in f?n==="object"&&(r=i.clone(t)):f._rev=t;if(!e.length)break}r=r||{};var s=i.invalidIdError(f._id);if(s)throw s;var a=[];r&&typeof r.new_edits!="undefined"&&a.push("new_edits="+r.new_edits),a=a.join("&"),a!==""&&(a="?"+a),d({headers:o.headers,method:"PUT",url:l(o,u(f._id))+a,body:f},function(e,t){if(e)return h(e);t.ok=!0,h(null,t)})})["catch"](h)})),n.post=i.adapterFun("post",function(e,t,r){typeof t=="function"&&(r=t,t={}),t=i.clone(t);if(typeof e!="object")return r(s.NOT_AN_OBJECT);"_id"in e||(e._id=i.uuid()),n.put(e,t,function(e,t){if(e)return r(e);t.ok=!0,r(null,t)})}),n._bulkDocs=function(e,t,n){typeof t.new_edits!="undefined"&&(e.new_edits=t.new_edits),i.Promise.all(e.docs.map(a)).then(function(){d({headers:o.headers,method:"POST",url:l(o,"_bulk_docs"),body:e},function(e,t){if(e)return n(e);t.forEach(function(e){e.ok=!0}),n(null,t)})})["catch"](n)},n.allDocs=i.adapterFun("allDocs",function(e,t){typeof e=="function"&&(t=e,e={}),e=i.clone(e);var n=[],r,s="GET";e.conflicts&&n.push("conflicts=true"),e.descending&&n.push("descending=true"),e.include_docs&&n.push("include_docs=true"),e.key&&n.push("key="+encodeURIComponent(JSON.stringify(e.key))),e.startkey&&n.push("startkey="+encodeURIComponent(JSON.stringify(e.startkey))),e.endkey&&n.push("endkey="+encodeURIComponent(JSON.stringify(e.endkey))),typeof e.inclusive_end!="undefined"&&n.push("inclusive_end="+!!e.inclusive_end),typeof e.limit!="undefined"&&n.push("limit="+e.limit),typeof e.skip!="undefined"&&n.push("skip="+e.skip),n=n.join("&"),n!==""&&(n="?"+n);if(typeof e.keys!="undefined"){var u=2e3,a="keys="+encodeURIComponent(JSON.stringify(e.keys));a.length+n.length+1<=u?n+=(n.indexOf("?")!==-1?"&":"?")+a:(s="POST",r=JSON.stringify({keys:e.keys}))}d({headers:o.headers,method:s,url:l(o,"_all_docs"+n),body:r},t)}),n._changes=function(e){var t="batch_size"in e?e.batch_size:r;e=i.clone(e),e.timeout=e.timeout||3e4;var n={timeout:e.timeout-5e3},u=typeof e.limit!="undefined"?e.limit:!1;u===0&&(u=1);var a;"returnDocs"in e?a=e.returnDocs:a=!0;var f=u;e.style&&(n.style=e.style);if(e.include_docs||e.filter&&typeof e.filter=="function")n.include_docs=!0;e.continuous&&(n.feed="longpoll"),e.conflicts&&(n.conflicts=!0),e.descending&&(n.descending=!0),e.filter&&typeof e.filter=="string"&&(n.filter=e.filter,e.filter==="_view"&&e.view&&typeof e.view=="string"&&(n.view=e.view));if(e.query_params&&typeof e.query_params=="object")for(var c in e.query_params)e.query_params.hasOwnProperty(c)&&(n[c]=e.query_params[c]);var h,p,v=function(r,i){if(e.aborted)return;n.since=r,e.descending?u&&(n.limit=f):n.limit=!u||f>t?t:f;var s="?"+Object.keys(n).map(function(e){return e+"="+n[e]}).join("&"),a={headers:o.headers,method:"GET",url:l(o,"_changes"+s),timeout:e.timeout};p=r;if(e.aborted)return;h=d(a,i)},m=10,g=0,y={results:[]},b=function(n,r){if(e.aborted)return;var o=0;if(r&&r.results){o=r.results.length,y.last_seq=r.last_seq;var l={};l.query=e.query_params,r.results=r.results.filter(function(t){f--;var n=i.filterChange(e)(t);return n&&(a&&y.results.push(t),i.call(e.onChange,t)),n})}else if(n){e.aborted=!0,i.call(e.complete,n);return}r&&r.last_seq&&(p=r.last_seq);var c=u&&f<=0||r&&o<t||e.descending;if(e.continuous&&!(u&&f<=0)||!c){n?g+=1:g=0;var h=1<<g,d=m*h,w=e.maximumWait||3e4;if(d>w){i.call(e.complete,n||s.UNKNOWN_ERROR);return}setTimeout(function(){v(p,b)},d)}else i.call(e.complete,null,y)};return v(e.since||0,b),{cancel:function(){e.aborted=!0,h&&h.abort()}}},n.revsDiff=i.adapterFun("revsDiff",function(e,t,n){typeof t=="function"&&(n=t,t={}),d({headers:o.headers,method:"POST",url:l(o,"_revs_diff"),body:JSON.stringify(e)},n)}),n._close=function(e){e()},n.destroy=i.adapterFun("destroy",function(e){d({url:l(o,""),method:"DELETE",headers:o.headers},function(t,r){t?(n.emit("error",t),e(t)):(n.emit("destroyed"),e(null,r))})})}var r=25,i=e("../utils"),s=e("../deps/errors");o.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},h.destroy=i.toPromise(function(e,t,n){var r=f(e,t);t=t||{},typeof t=="function"&&(n=t,t={}),t=i.clone(t),t.headers=r.headers,t.method="DELETE",t.url=l(r,"");var s=t.ajax||{};t=i.extend({},t,s),i.ajax(t,n)}),h.valid=function(){return!0},t.exports=h}).call(this,e("/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"../deps/errors":11,"../utils":23,"/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":28}],3:[function(e,t,n){(function(n,r){function l(e,t,n){try{e.apply(t,n)}catch(r){window.PouchDB&&window.PouchDB.emit("error",r)}}function c(){if(f.running||!f.queue.length)return;f.running=!0;var e=f.queue.shift();e.action(function(t,r){l(e.callback,this,[t,r]),f.running=!1,n.nextTick(c)})}function h(e){return function(t){var n=t.target&&t.target.error&&t.target.error.name||t.target;e(o.error(o.IDB_ERROR,n,t.type))}}function p(){var e="_pouch__checkModernIdb_"+(r.navigator&&r.navigator.appVersion),t=i.hasLocalStorage()&&r.localStorage[e];if(t)return JSON.parse(t);var n="_pouch__checkModernIdb",s=r.indexedDB.open(n,1).onupgradeneeded===null;return r.indexedDB.deleteDatabase&&r.indexedDB.deleteDatabase(n),i.hasLocalStorage()&&(r.localStorage[e]=JSON.stringify(s)),s}function d(e,t,n){var r={data:u.stringify(e)};return r.winningRev=t,r.deletedOrLocal=n?"1":"0",r.id=e.id,r}function v(e){if(!e)return null;if(!e.data)return e;var t=u.parse(e.data);return t.winningRev=e.winningRev,t.deletedOrLocal=e.deletedOrLocal==="1",t}function m(e,t){var n=this;f.queue.push({action:function(t){g(n,e,t)},callback:t}),c()}function g(e,t,u){function C(e){e.createObjectStore(l,{keyPath:"id"}).createIndex("seq","seq",{unique:!0}),e.createObjectStore(c,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(p,{keyPath:"digest"}),e.createObjectStore(g,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(b)}function k(e,t){var n=e.currentTarget.transaction,r=n.objectStore(l);r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),r.openCursor().onsuccess=function(e){var s=e.target.result;if(s){var o=s.value,u=i.isDeleted(o);o.deletedOrLocal=u?"1":"0",r.put(o),s["continue"]()}else t(n)}}function L(e){e.createObjectStore(y,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function A(e,t){t=t||e.currentTarget.transaction;var n=t.objectStore(y),o=t.objectStore(l),u=t.objectStore(c),a=o.openCursor();a.onsuccess=function(e){var t=e.target.result;if(t){var a=t.value,f=a.id,l=i.isLocalId(f),c=s.winningRev(a);if(l){var h=f+"::"+c,p=f+"::",d=f+"::~",v=u.index("_doc_id_rev"),m=r.IDBKeyRange.bound(p,d,!1,!1),g=v.openCursor(m);g.onsuccess=function(e){g=e.target.result;if(!g)o["delete"](t.primaryKey),t["continue"]();else{var r=g.value;r._doc_id_rev===h&&n.put(r),u["delete"](g.primaryKey),g["continue"]()}}}else t["continue"]()}}}function O(e,t,n){var u="startkey"in t?t.startkey:!1,a="endkey"in t?t.endkey:!1,f="key"in t?t.key:!1,h=t.skip||0,p=typeof t.limit=="number"?t.limit:-1,d=t.inclusive_end!==!1,m="descending"in t&&t.descending?"prev":null,g=!1;m&&u&&a&&(g=a,a=!1);var y=null;try{u&&a?y=r.IDBKeyRange.bound(u,a,!1,!d):u?m?y=r.IDBKeyRange.upperBound(u):y=r.IDBKeyRange.lowerBound(u):a?m?y=r.IDBKeyRange.lowerBound(a,!d):y=r.IDBKeyRange.upperBound(a,!d):f&&(y=r.IDBKeyRange.only(f))}catch(b){return b.name==="DataError"&&b.code===0?n(null,{total_rows:e,offset:t.skip,rows:[]}):n(o.error(o.IDB_ERROR,b.name,b.message))}var w=T.transaction([l,c],"readonly");w.oncomplete=function(){n(null,{total_rows:e,offset:t.skip,rows:x})};var E=w.objectStore(l),S=m?E.openCursor(y,m):E.openCursor(y),x=[];S.onsuccess=function(e){function u(e,r){var u={id:e.id,key:e.id,value:{rev:o}};if(t.include_docs){u.doc=r,u.doc._rev=o,u.doc._doc_id_rev&&delete u.doc._doc_id_rev,t.conflicts&&(u.doc._conflicts=s.collectConflicts(e));for(var a in u.doc._attachments)u.doc._attachments.hasOwnProperty(a)&&(u.doc._attachments[a].stub=!0)}var f=i.isDeleted(e,o);if(t.deleted==="ok")f&&(u.value.deleted=!0,u.doc=null),x.push(u);else if(!f&&h--<=0){if(g){if(d&&u.key<g)return;if(!d&&u.key<=g)return}x.push(u);if(--p===0)return}n["continue"]()}if(!e.target.result)return;var n=e.target.result,r=v(n.value),o=r.winningRev||s.winningRev(r);if(!t.include_docs)u(r);else{var a=w.objectStore(c).index("_doc_id_rev"),f=r.id+"::"+o;a.get(f).onsuccess=function(e){u(v(n.value),e.target.result)}}}}function M(e){if(N!==-1)return e(null,N);var t,n=T.transaction([l],"readonly"),i=n.objectStore(l).index("deletedOrLocal");i.count(r.IDBKeyRange.only("0")).onsuccess=function(e){t=e.target.result},n.onerror=h(e),n.oncomplete=function(){N=t,e(null,N)}}var f=3,l="document-store",c="by-sequence",p="attach-store",g="meta-store",y="local-store",b="detect-blob-support",w=t.name,E=null,S=null,x=!1,T=null,N=-1;e.type=function(){return"idb"},e._id=i.toPromise(function(e){e(null,S)}),e._bulkDocs=function(n,r,u){function A(e){var t=e.target.result;t.updateSeq=(t.updateSeq||0)+k,R.objectStore(g).put(t)}function O(){++L===b.length&&(R.objectStore(g).get(g).onsuccess=A)}function M(){if(!b.length)return;var t=new i.Map;b.forEach(function(n,r){if(n._id&&i.isLocalId(n._id)){e[n._deleted?"_removeLocal":"_putLocal"](n,{ctx:R},function(e,t){e?x[r]=e:x[r]={},O()});return}var s=n.metadata.id;t.has(s)?t.get(s).push([n,r]):t.set(s,[[n,r]])}),t.forEach(function(e,t){function r(){O(),++n<e.length&&i()}function i(){var i=e[n],s=i[0],o=i[1];C.has(t)?j(C.get(t),s,o,r):F(s,o,r)}var n=0;i()})}function _(e){function n(){++t===b.length&&e()}if(!b.length)return e();var t=0;b.forEach(function(e){if(e._id&&i.isLocalId(e._id))return n();var t=e.metadata.id,r=R.objectStore(l).get(t);r.onsuccess=function(r){var i=v(r.target.result);i&&C.set(t,i),n()}})}function D(){var e=x.map(function(e){if(e._bulk_seq)delete e._bulk_seq;else if(!Object.keys(e).length)return{ok:!0};if(e.error)return e;var t=e.metadata,n=s.winningRev(t);return{ok:!0,id:t.id,rev:n}});m.Changes.notify(w),N=-1,u(null,e)}function P(e,t){if(e.stub)return t();if(typeof e.data=="string"){var n;try{n=atob(e.data)}catch(r){var s=o.error(o.BAD_ARG,"Attachments need to be base64 encoded");return u(s)}if(E){var a=e.content_type;n=i.fixBinary(n),e.data=i.createBlob([n],{type:a})}i.MD5(n).then(function(n){e.digest="md5-"+n,t()});return}var f=new FileReader;f.onloadend=function(n){var r=i.arrayBufferToBinaryString(this.result||"");E||(e.data=btoa(r)),i.MD5(r).then(function(n){e.digest="md5-"+n,t()})},f.readAsArrayBuffer(e.data)}function H(e){function n(){t++,b.length===t&&e()}if(!b.length)return e();var t=0;b.forEach(function(e){function i(){r++,r===t.length&&n()}var t=e.data&&e.data._attachments?Object.keys(e.data._attachments):[];if(!t.length)return n();var r=0;for(var s in e.data._attachments)e.data._attachments.hasOwnProperty(s)&&P(e.data._attachments[s],i)})}function B(e,t,n,r,s){function f(e){o||(e?(o=e,r(o)):u===a.length&&g())}function h(e){u++,f(e)}function g(){function a(o){var u=e.metadata;u.seq=o.target.result,delete u.rev;var a=d(u,t,n),f=R.objectStore(l).put(a);f.onsuccess=function(){delete u.deletedOrLocal,delete u.winningRev,x[s]=e,C.set(e.metadata.id,e.metadata),i.call(r)}}k++,e.data._doc_id_rev=e.data._id+"::"+e.data._rev;var o=R.objectStore(c),u=o.index("_doc_id_rev"),f=o.put(e.data);f.onsuccess=a,f.onerror=function(t){t.preventDefault(),t.stopPropagation();var n=u.getKey(e.data._doc_id_rev);n.onsuccess=function(t){var n=o.put(e.data,t.target.result);k--,n.onsuccess=a}}}var o=null,u=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev,n&&(e.data._deleted=!0);var a=e.data._attachments?Object.keys(e.data._attachments):[];for(var p in e.data._attachments)if(!e.data._attachments[p].stub){var v=e.data._attachments[p].data;delete e.data._attachments[p].data;var m=e.data._attachments[p].digest;q(e,m,v,h)}else u++,f();a.length||g()}function j(e,t,n,r){var u=s.merge(e.rev_tree,t.metadata.rev_tree[0],1e3),f=i.isDeleted(e),l=i.isDeleted(t.metadata),c=f&&l&&a||!f&&a&&u.conflicts!=="new_leaf";if(c)return x[n]=I(o.REV_CONFLICT,t._bulk_seq),r();t.metadata.rev_tree=u.tree;var h=s.winningRev(t.metadata);l=i.isDeleted(t.metadata,h),B(t,h,l,r,n)}function F(e,t,n){var u=s.winningRev(e.metadata),a=i.isDeleted(e.metadata,u);if("was_delete"in r&&a)return x[t]=o.MISSING_DOC,n();B(e,u,a,n,t)}function I(e,t){return e._bulk_seq=t,e}function q(e,t,n,r){var s=R.objectStore(p);s.get(t).onsuccess=function(o){var u=o.target.result&&o.target.result.refs||{},a=[e.metadata.id,e.metadata.rev].join("@"),f={digest:t,body:n,refs:u};f.refs[a]=!0,s.put(f).onsuccess=function(e){i.call(r)}}}var a=r.new_edits,f=n.docs,b=f.map(function(e,t){if(e._id&&i.isLocalId(e._id))return e;var n=i.parseDoc(e,a);return n._bulk_seq=t,n}),S=b.filter(function(e){return e.error});if(S.length)return u(S[0]);var x=new Array(b.length),C=new i.Map,k=0,L=0,R;H(function(){var e=[l,c,p,g,y];R=T.transaction(e,"readwrite"),R.onerror=h(u),R.ontimeout=h(u),R.oncomplete=D,_(M)})},e._get=function(t,n,r){function d(){r(f,{doc:u,metadata:a,ctx:h})}var u,a,f,h;n=i.clone(n),n.ctx?h=n.ctx:h=T.transaction([l,c,p],"readonly"),h.objectStore(l).get(t).onsuccess=function(e){a=v(e.target.result);if(!a)return f=o.MISSING_DOC,d();if(i.isDeleted(a)&&!n.rev)return f=o.error(o.MISSING_DOC,"deleted"),d();var t=h.objectStore(c),r=n.rev||a.winningRev||s.winningRev(a),l=a.id+"::"+r;t.index("_doc_id_rev").get(l).onsuccess=function(e){u=e.target.result,u&&u._doc_id_rev&&delete u._doc_id_rev;if(!u)return f=o.MISSING_DOC,d();d()}}},e._getAttachment=function(e,t,n){var r;t=i.clone(t),t.ctx?r=t.ctx:r=T.transaction([l,c,p],"readonly");var s=e.digest,o=e.content_type;r.objectStore(p).get(s).onsuccess=function(e){var r=e.target.result.body;if(t.encode)if(!r)n(null,"");else if(typeof r!="string"){var s=new FileReader;s.onloadend=function(e){var t=i.arrayBufferToBinaryString(this.result||"");n(null,btoa(t))},s.readAsArrayBuffer(r)}else n(null,r);else r?typeof r!="string"?n(null,r):(r=i.fixBinary(atob(r)),n(null,i.createBlob([r],{type:o}))):n(null,i.createBlob([""],{type:o}))}},e._allDocs=function(t,n){M(function(e,r){if(e)return n(e);if(t.limit===0)return n(null,{total_rows:r,offset:t.skip,rows:[]});O(r,t,n)})},e._info=function(t){M(function(e,n){if(e)return t(e);if(T===null){var r=new Error("db isn't open");return r.id="idbNull",t(r)}var i=0,s=T.transaction([g],"readonly");s.objectStore(g).get(g).onsuccess=function(e){i=e.target.result&&e.target.result.updateSeq||0},s.oncomplete=function(){t(null,{doc_count:n,update_seq:i})}})},e._changes=function(t){function y(){g=T.transaction([l,c],"readonly"),g.oncomplete=E;var e;o?e=g.objectStore(c).openCursor(r.IDBKeyRange.lowerBound(t.since,!0),o):e=g.objectStore(c).openCursor(r.IDBKeyRange.lowerBound(t.since,!0)),e.onsuccess=b,e.onerror=onerror}function b(e){var n=e.target.result;if(!n)return;var r=n.value;if(t.doc_ids&&t.doc_ids.indexOf(r._id)===-1)return n["continue"]();var i=g.objectStore(l);i.get(r._id).onsuccess=function(e){var i=v(e.target.result);u<i.seq&&(u=i.seq);var o=i.winningRev||s.winningRev(i);if(r._rev!==o)return n["continue"]();delete r._doc_id_rev;var l=t.processChange(r,i,t);l.seq=n.key,d(l)&&(p++,f&&h.push(l),t.onChange(l)),p!==a&&n["continue"]()}}function E(){t.continuous||t.complete(null,{results:h,last_seq:u})}t=i.clone(t);if(t.continuous){var n=w+":"+i.uuid();return m.Changes.addListener(w,n,e,t),m.Changes.notify(w),{cancel:function(){m.Changes.removeListener(w,n)}}}var o=t.descending?"prev":null,u=0;t.since=t.since&&!o?t.since:0;var a="limit"in t?t.limit:-1;a===0&&(a=1);var f;"returnDocs"in t?f=t.returnDocs:f=!0;var h=[],p=0,d=i.filterChange(t),g;y()},e._close=function(e){if(T===null)return e(o.NOT_OPEN);T.close(),delete a[w],T=null,e()},e._getRevisionTree=function(e,t){var n=T.transaction([l],"readonly"),r=n.objectStore(l).get(e);r.onsuccess=function(e){var n=v(e.target.result);n?t(null,n.rev_tree):t(o.MISSING_DOC)}},e._doCompaction=function(e,t,n,r){var o=T.transaction([l,c],"readwrite"),u=o.objectStore(l);u.get(e).onsuccess=function(r){var i=v(r.target.result);i.rev_tree=t;var u=n.length;n.forEach(function(t){var n=o.objectStore(c).index("_doc_id_rev"),r=e+"::"+t;n.getKey(r).onsuccess=function(e){var t=e.target.result;if(!t)return;o.objectStore(c)["delete"](t),u--;if(!u){var n=i.winningRev||s.winningRev(i),r=i.deletedOrLocal;o.objectStore(l).put(d(i,n,r))}}})},o.oncomplete=function(){i.call(r)}},e._getLocal=function(e,t){var n=T.transaction([y],"readonly"),r=n.objectStore(y).get(e);r.onerror=h(t),r.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(o.MISSING_DOC)}},e._putLocal=function(e,t,n){typeof t=="function"&&(n=t,t={}),delete e._revisions;var r=e._rev,i=e._id;r?e._rev="0-"+(parseInt(r.split("-")[1],10)+1):e._rev="0-1",e._doc_id_rev=i+"::"+e._rev;var s=t.ctx,u;s||(s=T.transaction([y],"readwrite"),s.onerror=h(n),s.oncomplete=function(){u&&n(null,u)});var a=s.objectStore(y),f;if(r){var l=a.index("_doc_id_rev"),c=i+"::"+r;f=l.get(c),f.onsuccess=function(r){if(!r.target.result)n(o.REV_CONFLICT);else{var i=a.put(e);i.onsuccess=function(){u={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,u)}}}}else f=a.get(i),f.onsuccess=function(r){if(r.target.result)n(o.REV_CONFLICT);else{var i=a.put(e);i.onsuccess=function(){u={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,u)}}}},e._removeLocal=function(e,t){var n=T.transaction([y],"readwrite"),r;n.oncomplete=function(){r&&t(null,r)};var i=e._id+"::"+e._rev,s=n.objectStore(y),u=s.index("_doc_id_rev"),a=u.get(i);a.onerror=h(t),a.onsuccess=function(e){var n=e.target.result;if(!n)t(o.MISSING_DOC);else{var a=u.getKey(i);a.onsuccess=function(e){var t=e.target.result;s["delete"](t),r={ok:!0,id:n._id,rev:"0-0"}}}}};var _=a[w];if(_){T=_.idb,E=_.blobSupport,S=_.instanceId,x=_.idStored,n.nextTick(function(){u(null,e)});return}var D=r.indexedDB.open(w,f);"openReqList"in m||(m.openReqList={}),m.openReqList[w]=D,D.onupgradeneeded=function(e){var t=e.target.result;e.oldVersion<1&&C(t),e.oldVersion<3&&(L(t),e.oldVersion<2?k(e,function(t){A(e,t)}):A(e))},D.onsuccess=function(t){T=t.target.result,T.onversionchange=function(){T.close(),delete a[w]},T.onabort=function(){T.close(),delete a[w]};var n=T.transaction([g,b],"readwrite"),r=n.objectStore(g).get(g);r.onsuccess=function(t){var r=function(){if(E===null||!x)return;a[w]={idb:T,blobSupport:E,instanceId:S,idStored:x,loaded:!0},u(null,e)},s=t.target.result||{id:g};w+"_id"in s?(S=s[w+"_id"],x=!0,r()):(S=i.uuid(),s[w+"_id"]=S,n.objectStore(g).put(s).onsuccess=function(){x=!0,r()});try{var o=i.createBlob([""],{type:"image/png"});n.objectStore(b).put(o,"key"),n.oncomplete=function(){n=T.transaction([g,b],"readwrite");var e=n.objectStore(b).get("key");e.onsuccess=function(e){var t=e.target.result,n=URL.createObjectURL(t);i.ajax({url:n,cache:!0,binary:!0},function(e,t){e&&e.status===405?E=!0:E=!!t&&t.type==="image/png",r()})}}}catch(f){E=!1,r()}}},D.onerror=h(u)}function y(e,t,n){"openReqList"in m||(m.openReqList={}),m.Changes.removeAllListeners(e),m.openReqList[e]&&m.openReqList[e].result&&m.openReqList[e].result.close();var s=r.indexedDB.deleteDatabase(e);s.onsuccess=function(){m.openReqList[e]&&(m.openReqList[e]=null),i.hasLocalStorage()&&e in r.localStorage&&delete r.localStorage[e],delete a[e],n(null,{ok:!0})},s.onerror=h(n)}var i=e("../utils"),s=e("../merge"),o=e("../deps/errors"),u=e("vuvuzela"),a={},f={running:!1,queue:[]};m.valid=function(){var e=typeof openDatabase!="undefined"&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return!e&&r.indexedDB&&p()},m.destroy=i.toPromise(function(e,t,n){f.queue.push({action:function(n){y(e,t,n)},callback:n}),c()}),m.Changes=new i.Changes,t.exports=m}).call(this,e("/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../deps/errors":11,"../merge":18,"../utils":23,"/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":28,vuvuzela:58}],4:[function(e,t,n){t.exports=["idb","websql"]},{}],5:[function(e,t,n){(function(n){function u(e){return"'"+e+"'"}function S(e,t,n,r,i){return"SELECT "+e+" FROM "+(typeof t=="string"?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+(typeof r=="string"?r:r.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function x(e){return function(t){var n=t&&t.constructor.toString().match(/function ([^\(]+)/),r=n&&n[1]||t.type,i=t.target||t.message;e(s.error(s.WSQ_ERROR,i,r))}}function T(e){return decodeURIComponent(window.escape(e))}function N(e,t){var n="",r=t==="UTF-8"?2:4;for(var i=0,s=e.length;i<s;i+=r){var o=e.substring(i,i+r);r===4&&(o=o.substring(2,4)+o.substring(0,2)),n+=String.fromCharCode(parseInt(o,16))}return n=t==="UTF-8"?T(n):n,n}function C(e){return delete e._id,delete e._rev,JSON.stringify(e)}function k(e,t,n){return e=JSON.parse(e),e._id=t,e._rev=n,e}function L(e){if("size"in e)return e.size*1e6;var t=/Android/.test(window.navigator.userAgent);return t?5e6:1}function A(e,t){function H(){r.hasLocalStorage()&&(n.localStorage["_pouch__websqldb_"+T]=!0),t(null,u)}function B(e,t){e.executeSql(b),e.executeSql("ALTER TABLE "+p+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(g),e.executeSql("ALTER TABLE "+h+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+h+" (local, id)");var n="SELECT "+h+".winningseq AS seq, "+h+".json AS metadata FROM "+p+" JOIN "+h+" ON "+p+".seq = "+h+".winningseq";e.executeSql(n,[],function(e,n){var i=[],s=[];for(var o=0;o<n.rows.length;o++){var u=n.rows.item(o),a=u.seq,f=JSON.parse(u.metadata);r.isDeleted(f)&&i.push(a),r.isLocalId(f.id)&&s.push(f.id)}e.executeSql("UPDATE "+h+"SET local = 1 WHERE id IN ("+s.map(function(){return"?"}).join(",")+")",s,function(){e.executeSql("UPDATE "+p+" SET deleted = 1 WHERE seq IN ("+i.map(function(){return"?"}).join(",")+")",i,t)})})})})}function j(e,t){var n="CREATE TABLE IF NOT EXISTS "+v+" (id UNIQUE, rev, json)";e.executeSql(n,[],function(){var n="SELECT "+h+".id AS id, "+p+".json AS data "+"FROM "+p+" JOIN "+h+" ON "+p+".seq = "+h+".winningseq WHERE local = 1";e.executeSql(n,[],function(e,n){function s(){if(!r.length)return t();var n=r.shift(),i=JSON.parse(n.data)._rev;e.executeSql("INSERT INTO "+v+" (id, rev, json) VALUES (?,?,?)",[n.id,i,n.data],function(e){e.executeSql("DELETE FROM "+h+" WHERE id=?",[n.id],function(e){e.executeSql("DELETE FROM "+p+" WHERE seq=?",[n.seq],function(){s()})})})}var r=[];for(var i=0;i<n.rows.length;i++)r.push(n.rows.item(i));s()})})}function F(e,t){function n(n,r){function i(){if(!n.length)return t();var s=n.shift(),o=N(s.hex,r),u=o.lastIndexOf("::"),a=o.substring(0,u),f=o.substring(u+2),l="UPDATE "+p+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(l,[a,f,o],function(){i()})}i()}var r="ALTER TABLE "+p+" ADD COLUMN doc_id";e.executeSql(r,[],function(e){var t="ALTER TABLE "+p+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(y,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+p;e.executeSql(t,[],function(e,t){var r=[];for(var i=0;i<t.rows.length;i++)r.push(t.rows.item(i));e.executeSql("SELECT dbid, hex(dbid) AS hexId FROM "+m,[],function(e,t){var i=t.rows.item(0).dbid,s=t.rows.item(0).hexId,o=s.length===i.length*2?"UTF-8":"UTF-16";n(r,o)})})})})})}function I(e){while(M.length>0){var t=M.pop();t(null,a)}q(e)}function q(e){e.executeSql("SELECT dbid, hex(dbid) AS hexId FROM "+m,[],function(e,t){var n=t.rows.item(0).dbid,r=t.rows.item(0).hexId;D=r.length===n.length*2?"UTF-8":"UTF-16"})}function R(e,t){if(t===0){var n="CREATE TABLE IF NOT EXISTS "+m+" (update_seq INTEGER, dbid, db_version INTEGER)",i="CREATE TABLE IF NOT EXISTS "+d+" (digest, json, body BLOB)",s="CREATE TABLE IF NOT EXISTS "+h+" (id unique, json, winningseq)",o="CREATE TABLE IF NOT EXISTS "+p+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, "+"json, deleted TINYINT(1), doc_id, rev)",u="CREATE TABLE IF NOT EXISTS "+v+" (id UNIQUE, rev, json)";e.executeSql(i),e.executeSql(u),e.executeSql(s,[],function(){e.executeSql(b),e.executeSql(o,[],function(){e.executeSql(g),e.executeSql(y),e.executeSql(n,[],function(){var t="INSERT INTO "+m+" (update_seq, db_version, dbid) VALUES (?, ?, ?)";a=r.uuid();var n=[0,c,a];e.executeSql(t,n,function(e){I(e)})})})})}else{var f=function(){var n=t<c;n&&e.executeSql("UPDATE "+m+" SET db_version = "+c);var r="SELECT dbid FROM "+m;e.executeSql(r,[],function(e,t){a=t.rows.item(0).dbid,I(e)})};switch(t){case 1:B(e,function(){j(e,function(){F(e,f)})});break;case 2:j(e,function(){F(e,f)});break;case 3:F(e,f);break;default:f()}}}function U(){P.transaction(function(e){e.executeSql("SELECT sql FROM sqlite_master WHERE tbl_name = "+m,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+m,[],function(e,t){var n=t.rows.item(0).db_version;R(e,n)}):e.executeSql("ALTER TABLE "+m+" ADD COLUMN db_version INTEGER",[],function(){R(e,1)}):R(e,0)})},x(t),H)}function z(e,t){if(_!==-1)return t(_);var n=S("COUNT("+h+".id) AS 'num'",[h,p],w,p+".deleted=0");e.executeSql(n,[],function(e,n){_=n.rows.item(0).num,t(_)})}var u=this,a=null,T=e.name,O=L(e),M=[],_=-1,D,P=f(T,l,T,O);if(!P)return t(s.UNKNOWN_ERROR);typeof P.readTransaction!="function"&&(P.readTransaction=P.transaction),r.isCordova()&&typeof n!="undefined"?n.addEventListener(T+"_pouch",function W(){n.removeEventListener(T+"_pouch",W,!1),U()},!1):U(),u.type=function(){return"websql"},u._id=r.toPromise(function(e){e(null,a)}),u._info=function(e){P.readTransaction(function(t){z(t,function(n){var r="SELECT update_seq FROM "+m;t.executeSql(r,[],function(t,r){var i=r.rows.item(0).update_seq;e(null,{doc_count:n,update_seq:i})})})},x(e))},u._bulkDocs=function(e,t,n){function E(){var e=g.map(function(e){if(e._bulk_seq)delete e._bulk_seq;else if(!Object.keys(e).length)return{ok:!0};if(e.error)return e;var t=e.metadata,n=i.winningRev(t);return{ok:!0,id:t.id,rev:n}});A.Changes.notify(T);var t="SELECT update_seq FROM "+m;v.executeSql(t,[],function(t,r){var i=r.rows.item(0).update_seq+y,s="UPDATE "+m+" SET update_seq=?";t.executeSql(s,[i],function(){n(null,e)})})}function N(e,t){if(e.stub)return t();if(typeof e.data=="string"){try{e.data=atob(e.data)}catch(i){var o=s.error(s.BAD_ARG,"Attachments need to be base64 encoded");return n(o)}var u=r.fixBinary(e.data);e.data=r.createBlob([u],{type:e.content_type})}var a=new FileReader;a.onloadend=function(n){var i=r.arrayBufferToBinaryString(this.result);e.data=i,r.MD5(i).then(function(n){e.digest="md5-"+n,t()})},a.readAsArrayBuffer(e.data)}function k(e){function n(){t++,l.length===t&&e()}if(!l.length)return e();var t=0;l.forEach(function(e){function i(){r++,r===t.length&&n()}var t=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],r=0;if(!t.length)return n();for(var s in e.data._attachments)e.data._attachments.hasOwnProperty(s)&&N(e.data._attachments[s],i)})}function L(e,t,n,r,i,s){function u(){y++;var t=e.data,r=n?1:0,i=t._id,s=t._rev,o=C(t),u="INSERT INTO "+p+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",a=[i,s,o,r];v.executeSql(u,a,function(e,t){x(e,t.insertId)},function(){var e=S("seq",p,null,"doc_id=? AND rev=?");return v.executeSql(e,[i,s],function(e,t){var n=t.rows.item(0).seq,u="UPDATE "+p+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",a=[o,r,i,s];e.executeSql(u,a,function(e){y--,x(e,n)})}),!1})}function a(e){f||(e?(f=e,r(f)):l===c.length&&u())}function d(e){l++,a(e)}function x(n,u){e.metadata.seq=u,delete e.metadata.rev;var a=i?"UPDATE "+h+" SET json=?, winningseq=(SELECT seq FROM "+p+" WHERE doc_id="+h+".id AND rev=?) WHERE id=?":"INSERT INTO "+h+" (id, winningseq, json) VALUES (?, ?, ?);",f=o.stringify(e.metadata),l=e.metadata.id,c=i?[f,t,l]:[l,u,f];n.executeSql(a,c,function(){g[s]=e,b.set(l,e.metadata),r()})}var f=null,l=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev,n&&(e.data._deleted=!0);var c=e.data._attachments?Object.keys(e.data._attachments):[];for(var m in e.data._attachments)if(!e.data._attachments[m].stub){var w=e.data._attachments[m].data;delete e.data._attachments[m].data;var E=e.data._attachments[m].digest;F(e,E,w,d)}else l++,a();c.length||u()}function O(e,t,n,o){var u=i.merge(e.rev_tree,t.metadata.rev_tree[0],1e3),f=r.isDeleted(t.metadata),l=r.isDeleted(e),c=l&&f&&a||!l&&a&&u.conflicts!=="new_leaf";if(c)return g[n]=j(s.REV_CONFLICT,t._bulk_seq),o();t.metadata.rev_tree=u.tree;var h=i.winningRev(t.metadata);f=r.isDeleted(t.metadata,h),L(t,h,f,o,!0,n)}function M(e,n,o){var u=i.winningRev(e.metadata),a=r.isDeleted(e.metadata,u);if("was_delete"in t&&a)return g[n]=s.MISSING_DOC,o();L(e,u,a,o,!1,n)}function D(){++w===l.length&&E()}function H(){if(!l.length)return E();var e=new r.Map;l.forEach(function(t,n){if(t._id&&r.isLocalId(t._id)){u[t._deleted?"_removeLocal":"_putLocal"](t,{ctx:v},function(e,t){e?g[n]=e:g[n]={},D()});return}var i=t.metadata.id;e.has(i)?e.get(i).push([t,n]):e.set(i,[[t,n]])}),e.forEach(function(e,t){function r(){D(),++n<e.length&&i()}function i(){var i=e[n],s=i[0],o=i[1];b.has(t)?O(b.get(t),s,o,r):M(s,o,r)}var n=0;i()})}function B(e){function n(){++t===l.length&&e()}if(!l.length)return e();var t=0;l.forEach(function(e){if(e._id&&r.isLocalId(e._id))return n();var t=e.metadata.id;v.executeSql("SELECT json FROM "+h+" WHERE id = ?",[t],function(e,r){if(r.rows.length){var i=o.parse(r.rows.item(0).json);b.set(t,i)}n()})})}function j(e,t){return e._bulk_seq=t,e}function F(e,t,n,r){var i=[e.metadata.id,e.metadata.rev].join("@"),s={digest:t},o="SELECT digest, json FROM "+d+" WHERE digest=?";v.executeSql(o,[t],function(e,u){u.rows.length?(s.refs=JSON.parse(u.rows.item(0).json).refs,o="UPDATE "+d+" SET json=?, body=? WHERE digest=?",e.executeSql(o,[JSON.stringify(s),n,t],function(){r()})):(s.refs={},s.refs[i]=!0,o="INSERT INTO "+d+"(digest, json, body) VALUES (?, ?, ?)",e.executeSql(o,[t,JSON.stringify(s),n],function(){r()}))})}var a=t.new_edits,f=e.docs,l=f.map(function(e,t){if(e._id&&r.isLocalId(e._id))return e;var n=r.parseDoc(e,a);return n._bulk_seq=t,n}),c=l.filter(function(e){return e.error});if(c.length)return n(c[0]);var v,g=new Array(l.length),y=0,b=new r.Map,w=0;k(function(){P.transaction(function(e){v=e,B(H)},x(n),function(){_=-1})})},u._get=function(e,t,n){function c(){n(f,{doc:i,metadata:a,ctx:l})}t=r.clone(t);var i,a,f;if(!t.ctx){P.readTransaction(function(r){t.ctx=r,u._get(e,t,n)});return}var l=t.ctx,d,v;t.rev?(d=S(E,[h,p],h+".id="+p+".doc_id",[p+".doc_id=?",p+".rev=?"]),v=[e,t.rev]):(d=S(E,[h,p],w,h+".id=?"),v=[e]),l.executeSql(d,v,function(e,n){if(!n.rows.length)return f=s.MISSING_DOC,c();var r=n.rows.item(0);a=o.parse(r.metadata);if(r.deleted&&!t.rev)return f=s.error(s.MISSING_DOC,"deleted"),c();i=k(r.data,a.id,r.rev),c()})},u._allDocs=function(e,t){var n=[],r,s="startkey"in e?e.startkey:!1,u="endkey"in e?e.endkey:!1,a="key"in e?e.key:!1,f="descending"in e?e.descending:!1,l="limit"in e?e.limit:-1,c="skip"in e?e.skip:0,d=e.inclusive_end!==!1,v=[],m=[];if(a!==!1)m.push(h+".id = ?"),v.push(a);else if(s!==!1||u!==!1){s!==!1&&(m.push(h+".id "+(f?"<=":">=")+" ?"),v.push(s));if(u!==!1){var g=f?">":"<";d&&(g+="="),m.push(h+".id "+g+" ?"),v.push(u)}a!==!1&&(m.push(h+".id = ?"),v.push(a))}e.deleted!=="ok"&&m.push(p+".deleted = 0"),P.readTransaction(function(t){z(t,function(s){r=s;if(l===0)return;var u=S(E,[h,p],w,m,h+".id "+(f?"DESC":"ASC"));u+=" LIMIT "+l+" OFFSET "+c,t.executeSql(u,v,function(t,r){for(var s=0,u=r.rows.length;s<u;s++){var a=r.rows.item(s),f=o.parse(a.metadata),l=k(a.data,f.id,a.rev),c=l._rev,h={id:f.id,key:f.id,value:{rev:c}};if(e.include_docs){h.doc=l,h.doc._rev=c,e.conflicts&&(h.doc._conflicts=i.collectConflicts(f));for(var p in h.doc._attachments)h.doc._attachments.hasOwnProperty(p)&&(h.doc._attachments[p].stub=!0)}if(a.deleted){if(e.deleted!=="ok")continue;h.value.deleted=!0,h.doc=null}n.push(h)}})})},x(t),function(){t(null,{total_rows:r,offset:e.skip,rows:n})})},u._changes=function(e){function l(){var t=[h+".winningseq > "+e.since],u=[];e.doc_ids&&(t.push(h+".id IN ("+e.doc_ids.map(function(){return"?"}).join(",")+")"),u=e.doc_ids);var l=S(E,[h,p],w,t,h+".winningseq "+(n?"DESC":"ASC")),c=r.filterChange(e);!e.view&&!e.filter&&(l+=" LIMIT "+i),P.readTransaction(function(t){t.executeSql(l,u,function(t,n){var r=0;for(var u=0,l=n.rows.length;u<l;u++){var h=n.rows.item(u),p=o.parse(h.metadata);r<h.seq&&(r=h.seq);var d=k(h.data,p.id,h.rev),v=e.processChange(d,p,e);v.seq=h.seq,c(v)&&(f++,s&&a.push(v),e.onChange(v));if(f===i)break}e.continuous||e.complete(null,{results:a,last_seq:r})})})}e=r.clone(e);if(e.continuous){var t=T+":"+r.uuid();return A.Changes.addListener(T,t,u,e),A.Changes.notify(T),{cancel:function(){A.Changes.removeListener(T,t)}}}var n=e.descending;e.since=e.since&&!n?e.since:0;var i="limit"in e?e.limit:-1;i===0&&(i=1);var s;"returnDocs"in e?s=e.returnDocs:s=!0;var a=[],f=0;l()},u._close=function(e){e()},u._getAttachment=function(e,t,n){var i,s=t.ctx,o=e.digest,u=e.content_type,a="SELECT hex(body) as body FROM "+d+" WHERE digest=?";s.executeSql(a,[o],function(e,s){var o=N(s.rows.item(0).body,D);t.encode?i=btoa(o):(o=r.fixBinary(o),i=r.createBlob([o],{type:u})),n(null,i)})},u._getRevisionTree=function(e,t){P.readTransaction(function(n){var r="SELECT json AS metadata FROM "+h+" WHERE id = ?";n.executeSql(r,[e],function(e,n){if(!n.rows.length)t(s.MISSING_DOC);else{var r=o.parse(n.rows.item(0).metadata);t(null,r.rev_tree)}})})},u._doCompaction=function(e,t,n,i){if(!n.length)return i();P.transaction(function(s){var u="SELECT json AS metadata FROM "+h+" WHERE id = ?";s.executeSql(u,[e],function(s,u){if(!u.rows.length)return r.call(i);var a=o.parse(u.rows.item(0).metadata);a.rev_tree=t;var f=0;n.forEach(function(t){var r="DELETE FROM "+p+" WHERE doc_id=? AND rev=?";s.executeSql(r,[e,t],function(t){if(++f===n.length){var r="UPDATE "+h+" SET json = ? WHERE id = ?";t.executeSql(r,[o.stringify(a),e],function(){i()})}})})})})},u._getLocal=function(e,t){P.readTransaction(function(n){var r="SELECT json, rev FROM "+v+" WHERE id=?";n.executeSql(r,[e],function(n,r){if(r.rows.length){var i=r.rows.item(0),o=k(i.json,e,i.rev);t(null,o)}else t(s.MISSING_DOC)})})},u._putLocal=function(e,t,n){function f(e){var f,l;r?(f="UPDATE "+v+" SET rev=?, json=? "+"WHERE id=? AND rev=?",l=[o,u,i,r]):(f="INSERT INTO "+v+" (id, rev, json) VALUES (?,?,?)",l=[i,o,u]),e.executeSql(f,l,function(e,r){r.rowsAffected?(a={ok:!0,id:i,rev:o},t.ctx&&n(null,a)):n(s.REV_CONFLICT)},function(){return n(s.REV_CONFLICT),!1})}typeof t=="function"&&(n=t,t={}),delete e._revisions;var r=e._rev,i=e._id,o;r?o=e._rev="0-"+(parseInt(r.split("-")[1],10)+1):o=e._rev="0-1";var u=C(e),a;t.ctx?f(t.ctx):P.transaction(function(e){f(e)},x(n),function(){a&&n(null,a)})},u._removeLocal=function(e,t){var n;P.transaction(function(r){var i="DELETE FROM "+v+" WHERE id=? AND rev=?",o=[e._id,e._rev];r.executeSql(i,o,function(r,i){if(!i.rowsAffected)return t(s.REV_CONFLICT);n={ok:!0,id:e._id,rev:"0-0"}})},x(t),function(){t(null,n)})}}var r=e("../utils"),i=e("../merge"),s=e("../deps/errors"),o=e("vuvuzela"),a={},f=r.getArguments(function(e){if(typeof n!="undefined"){if(n.navigator&&n.navigator.sqlitePlugin&&n.navigator.sqlitePlugin.openDatabase)return navigator.sqlitePlugin.openDatabase.apply(navigator.sqlitePlugin,e);if(n.sqlitePlugin&&n.sqlitePlugin.openDatabase)return n.sqlitePlugin.openDatabase.apply(n.sqlitePlugin,e);var t=a[e[0]];return t||(t=a[e[0]]=n.openDatabase.apply(n,e)),t}}),l=1,c=4,h=u("document-store"),p=u("by-sequence"),d=u("attach-store"),v=u("local-store"),m=u("metadata-store"),g="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+p+" (seq, deleted)",y="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+p+" (doc_id, rev)",b="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+h+" (winningseq)",w=p+".seq = "+h+".winningseq",E=p+".seq AS seq, "+p+".deleted AS deleted, "+p+".json AS data, "+p+".rev AS rev, "+h+".json AS metadata";A.valid=function(){if(typeof n!="undefined"){if(n.navigator&&n.navigator.sqlitePlugin&&n.navigator.sqlitePlugin.openDatabase)return!0;if(n.sqlitePlugin&&n.sqlitePlugin.openDatabase)return!0;if(n.openDatabase)return!0}return!1},A.destroy=r.toPromise(function(e,t,i){A.Changes.removeAllListeners(e);var s=L(t),o=f(e,l,e,s);o.transaction(function(e){var t=[h,p,d,m,v];t.forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},x(i),function(){r.hasLocalStorage()&&(delete n.localStorage["_pouch__websqldb_"+e],delete n.localStorage[e]),i(null,{ok:!0})})}),A.Changes=new r.Changes,t.exports=A}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../deps/errors":11,"../merge":18,"../utils":23,vuvuzela:58}],6:[function(e,t,n){function f(e,t,n){function f(){i.cancel()}o.call(this);var i=this;this.db=e,t=t?r.clone(t):{};var s=n||t.complete||function(){},u=t.complete=r.once(function(t,n){t?i.emit("error",t):i.emit("complete",n),i.removeAllListeners(),e.removeListener("destroyed",f)});s&&(i.on("complete",function(e){s(null,e)}),i.on("error",function(e){s(e)}));var a=t.onChange;a&&i.on("change",a),e.once("destroyed",f),t.onChange=function(e){if(t.isCancelled)return;i.emit("change",e),i.startSeq&&i.startSeq<=e.seq&&(i.emit("uptodate"),i.startSeq=!1),e.deleted?i.emit("delete",e):e.changes.length===1&&e.changes[0].rev.slice(0,2)==="1-"?i.emit("create",e):i.emit("update",e)};var l=new r.Promise(function(e,n){t.complete=function(t,r){t?n(t):e(r)}});i.once("cancel",function(){a&&i.removeListener("change",a),t.complete(null,{status:"cancelled"})}),this.then=l.then.bind(l),this["catch"]=l["catch"].bind(l),this.then(function(e){u(null,e)},u),e.taskqueue.isReady?i.doChanges(t):e.taskqueue.addTask(function(){i.isCancelled?i.emit("cancel"):i.doChanges(t)})}function l(e,t,n){var s=[{rev:e._rev}];n.style==="all_docs"&&(s=i.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var o={id:t.id,changes:s,doc:e};return r.isDeleted(t,e._rev)&&(o.deleted=!0),n.conflicts&&(o.doc._conflicts=i.collectConflicts(t),o.doc._conflicts.length||delete o.doc._conflicts),o}var r=e("./utils"),i=e("./merge"),s=e("./deps/errors"),o=e("events").EventEmitter,u=e("./evalFilter"),a=e("./evalView");t.exports=f,r.inherits(f,o),f.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},f.prototype.doChanges=function(e){var t=this,n=e.complete;e=r.clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=l,e.since==="latest"&&(e.since="now"),e.since||(e.since=0);if(e.since==="now"){this.db.info().then(function(r){if(t.isCancelled){n(null,{status:"cancelled"});return}e.since=r.update_seq-1,t.doChanges(e)},n);return}e.continuous&&e.since!=="now"&&this.db.info().then(function(e){t.startSeq=e.update_seq-1},function(e){if(e.id==="idbNull")return;throw e});if(this.db.type()!=="http"&&e.filter&&typeof e.filter=="string")return this.filterChanges(e);"descending"in e||(e.descending=!1),e.limit=e.limit===0?1:e.limit,e.complete=n;var i=this.db._changes(e);if(i&&typeof i.cancel=="function"){var s=t.cancel;t.cancel=r.getArguments(function(e){i.cancel(),s.apply(this,e)})}},f.prototype.filterChanges=function(e){var t=this,n=e.complete;if(e.filter==="_view"){if(!e.view||typeof e.view!="string"){var r=new Error("`view` filter parameter is not provided.");r.status=s.BAD_REQUEST.status,r.name=s.BAD_REQUEST.name,r.error=!0,n(r);return}var i=e.view.split("/");this.db.get("_design/"+i[0],function(r,o){if(t.isCancelled){n(null,{status:"cancelled"});return}if(r){n(r);return}if(o&&o.views&&o.views[i[1]]){var u=a(o.views[i[1]].map);e.filter=u,t.doChanges(e);return}var f=o.views?"missing json key: "+i[1]:"missing json key: views";r||(r=new Error(f),r.status=s.MISSING_DOC.status,r.name=s.MISSING_DOC.name,r.error=!0),n(r);return})}else{var o=e.filter.split("/");this.db.get("_design/"+o[0],function(r,i){if(t.isCancelled){n(null,{status:"cancelled"});return}if(r){n(r);return}if(i&&i.filters&&i.filters[o[1]]){var a=u(i.filters[o[1]]);e.filter=a,t.doChanges(e);return}var f=i&&i.filters?"missing json key: "+o[1]:"missing json key: filters";r||(r=new Error(f),r.status=s.MISSING_DOC.status,r.name=s.MISSING_DOC.name,r.error=!0),n(r);return})}}},{"./deps/errors":11,"./evalFilter":15,"./evalView":16,"./merge":18,"./utils":23,events:27}],7:[function(e,t,n){(function(n){function u(e){e&&n.debug&&console.error(e)}function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);var f=this;if(typeof t=="function"||typeof t=="undefined")n=t,t={};e&&typeof e=="object"&&(t=e,e=undefined),typeof n=="undefined"&&(n=u),t=t||{};var l=n;f.auto_compaction=t.auto_compaction,f.prefix=a.prefix,r.call(f),f.taskqueue=new s;var c=new o(function(r,s){n=function(e,t){if(e)return s(e);delete t.then,r(t)},t=i.clone(t);var o=t.name||e,u,l;(function(){try{if(typeof o!="string")throw l=new Error("Missing/invalid DB name"),l.code=400,l;u=a.parseAdapter(o,t),t.originalName=o,t.name=u.name,t.prefix&&u.adapter!=="http"&&u.adapter!=="https"&&(t.name=t.prefix+t.name),t.adapter=t.adapter||u.adapter,f._adapter=t.adapter,f._db_name=o;if(!a.adapters[t.adapter])throw l=new Error("Adapter is missing"),l.code=404,l;if(!a.adapters[t.adapter].valid())throw l=new Error("Invalid Adapter"),l.code=404,l}catch(e){f.taskqueue.fail(e),f.changes=i.toPromise(function(t){t.complete&&t.complete(e)})}})();if(l)return s(l);f.adapter=t.adapter,f.replicate={},f.replicate.from=function(e,t,n){return f.constructor.replicate(e,f,t,n)},f.replicate.to=function(e,t,n){return f.constructor.replicate(f,e,t,n)},f.sync=function(e,t,n){return f.constructor.sync(f,e,t,n)},f.replicate.sync=f.sync,f.destroy=i.adapterFun("destroy",function(e){var t=this;t.info(function(n,r){if(n)return e(n);t.constructor.destroy(r.db_name,e)})}),a.adapters[t.adapter].call(f,t,function(e,r){function i(e){e==="destroyed"&&(f.emit("destroyed"),a.removeListener(o,i))}if(e){n&&(f.taskqueue.fail(e),n(e));return}a.on(o,i),f.emit("created",f),a.emit("created",t.originalName),f.taskqueue.ready(f),n(null,f)}),t.skipSetup&&f.taskqueue.ready(f),i.isCordova()&&cordova.fireWindowEvent(t.name+"_pouch",{})});c.then(function(e){l(null,e)},l),f.then=c.then.bind(c),f["catch"]=c["catch"].bind(c)}var r=e("./adapter"),i=e("./utils"),s=e("./taskqueue"),o=i.Promise;i.inherits(a,r),t.exports=a}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./adapter":1,"./taskqueue":22,"./utils":23}],8:[function(e,t,n){function u(e,t){function l(t,n,r){if(!e.binary&&!e.json&&e.processData&&typeof t!="string")t=JSON.stringify(t);else if(!e.binary&&e.json&&typeof t=="string")try{t=JSON.parse(t)}catch(s){return r(s)}Array.isArray(t)&&(t=t.map(function(e){var t;return e.ok?e:e.error&&e.error==="conflict"?(t=i.REV_CONFLICT,t.id=e.id,t):e.error&&e.error==="forbidden"?(t=i.FORBIDDEN,t.id=e.id,t.reason=e.reason,t):e.missing?(t=i.MISSING_DOC,t.missing=e.missing,t):e})),r(null,t,n)}function c(e,t){var n,r,s,o;try{n=JSON.parse(e.responseText);for(o in i)if(i.hasOwnProperty(o)&&i[o].name===n.error){s=i[o];break}s||(s=i.UNKNOWN_ERROR,e.status&&(s.status=e.status),e.statusText&&(e.name=e.statusText)),r=i.error(s,n.reason)}catch(u){for(var o in i)if(i.hasOwnProperty(o)&&i[o].status===e.status){s=i[o];break}s||(s=i.UNKNOWN_ERROR,e.status&&(s.status=e.status),e.statusText&&(e.name=e.statusText)),r=i.error(s)}e.withCredentials&&e.status===0&&(r.status=405,r.statusText="Method Not Allowed"),t(r)}var n=!1,u=s.getArguments(function(e){if(n)return;t.apply(this,e),n=!0});typeof e=="function"&&(u=e,e={}),e=s.clone(e);var a={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};e=s.extend(!0,a,e);if(e.method==="GET"&&!e.cache){var f=e.url.indexOf("?")!==-1;e.url+=(f?"&":"?")+"_nonce="+s.uuid(16)}var h,p;e.xhr?p=new e.xhr:p=new XMLHttpRequest,p.open(e.method,e.url),p.withCredentials=!0,e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&typeof e.body!="string"&&(e.body=JSON.stringify(e.body))),e.binary&&(p.responseType="arraybuffer");var d=function(e,t,n){var r="";if(n){var i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3),r="; expires="+i.toGMTString()}document.cookie=e+"="+t+r+"; path=/"};for(var v in e.headers)if(v==="Cookie"){var m=e.headers[v].split("=");d(m[0],m[1],10)}else p.setRequestHeader(v,e.headers[v]);"body"in e||(e.body=null);var g=function(){if(n)return;p.abort(),c(p,u)};p.onreadystatechange=function(){if(p.readyState!==4||n)return;clearTimeout(h);if(p.status>=200&&p.status<300){var t;e.binary?t=r([p.response||""],{type:p.getResponseHeader("Content-Type")}):t=p.responseText,l(t,p,u)}else c(p,u)},e.timeout>0&&(h=setTimeout(g,e.timeout),p.onprogress=function(){clearTimeout(h),h=setTimeout(g,e.timeout)},typeof o=="undefined"&&(o=Object.keys(p).indexOf("upload")!==-1),o&&(p.upload.onprogress=p.onprogress));if(e.body&&e.body instanceof Blob){var y=new FileReader;y.onloadend=function(e){var t="",n=new Uint8Array(this.result),r=n.byteLength;for(var i=0;i<r;i++)t+=String.fromCharCode(n[i]);t=s.fixBinary(t),p.send(t)},y.readAsArrayBuffer(e.body)}else p.send(e.body);return{abort:g}}var r=e("./blob.js"),i=e("./errors"),s=e("../utils"),o;t.exports=u},{"../utils":23,"./blob.js":9,"./errors":11}],9:[function(e,t,n){(function(e){function n(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(r){if(r.name!=="TypeError")throw r;var i=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,s=new i;for(var o=0;o<t.length;o+=1)s.append(t[o]);return s.getBlob(n.type)}}t.exports=n}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],10:[function(e,t,n){function r(){this.store={}}function i(){this.store=new r}n.Map=r,n.Set=i,r.prototype.mangle=function(e){if(typeof e!="string")throw new TypeError("key must be a string but Got "+e);return"$"+e},r.prototype.unmangle=function(e){return e.substring(1)},r.prototype.get=function(e){var t=this.mangle(e);return t in this.store?this.store[t]:void 0},r.prototype.set=function(e,t){var n=this.mangle(e);return this.store[n]=t,!0},r.prototype.has=function(e){var t=this.mangle(e);return t in this.store},r.prototype["delete"]=function(e){var t=this.mangle(e);return t in this.store?(delete this.store[t],!0):!1},r.prototype.forEach=function(e){var t=this,n=Object.keys(t.store);n.forEach(function(n){var r=t.store[n];n=t.unmangle(n),e(r,n)})},i.prototype.add=function(e){return this.store.set(e,!0)},i.prototype.has=function(e){return this.store.has(e)},i.prototype["delete"]=function(e){return this.store["delete"](e)}},{}],11:[function(e,t,n){function r(e){this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}r.prototype__proto__=Error.prototype,r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},n.UNAUTHORIZED=new r({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),n.MISSING_BULK_DOCS=new r({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),n.MISSING_DOC=new r({status:404,error:"not_found",reason:"missing"}),n.REV_CONFLICT=new r({status:409,error:"conflict",reason:"Document update conflict"}),n.INVALID_ID=new r({status:400,error:"invalid_id",reason:"_id field must contain a string"}),n.MISSING_ID=new r({status:412,error:"missing_id",reason:"_id is required for puts"}),n.RESERVED_ID=new r({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),n.NOT_OPEN=new r({status:412,error:"precondition_failed",reason:"Database not open"}),n.UNKNOWN_ERROR=new r({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),n.BAD_ARG=new r({status:500,error:"badarg",reason:"Some query argument is invalid"}),n.INVALID_REQUEST=new r({status:400,error:"invalid_request",reason:"Request was invalid"}),n.QUERY_PARSE_ERROR=new r({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),n.DOC_VALIDATION=new r({status:500,error:"doc_validation",reason:"Bad special document member"}),n.BAD_REQUEST=new r({status:400,error:"bad_request",reason:"Something wrong with the request"}),n.NOT_AN_OBJECT=new r({status:400,error:"bad_request",reason:"Document must be a JSON object"}),n.DB_MISSING=new r({status:404,error:"not_found",reason:"Database not found"}),n.IDB_ERROR=new r({status:500,error:"indexed_db_went_bad",reason:"unknown"}),n.WSQ_ERROR=new r({status:500,error:"web_sql_went_bad",reason:"unknown"}),n.LDB_ERROR=new r({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),n.FORBIDDEN=new r({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),n.error=function(e,t,n){function r(e){this.message=t,n&&(this.name=n)}return r.prototype=e,new r(t)}},{}],12:[function(e,t,n){(function(n,r){function u(e,t,n){if(typeof e.slice=="function")return t?n?e.slice(t,n):e.slice(t):e.slice();t=Math.floor(t||0),n=Math.floor(n||0);var r=e.byteLength;t=t<0?Math.max(t+r,0):Math.min(r,t),n=n<0?Math.max(n+r,0):Math.min(r,n);if(n-t<=0)return new ArrayBuffer(0);var i=new ArrayBuffer(n-t),s=new Uint8Array(i),o=new Uint8Array(e,t,n-t);return s.set(o),i}function a(e){var t=[e&255,e>>>8&255,e>>>16&255,e>>>24&255];return t.map(function(e){return String.fromCharCode(e)}).join("")}function f(e){var t="";for(var n=0;n<e.length;n++)t+=a(e[n]);return r.btoa(t)}var i=e("crypto"),s=e("spark-md5"),o=r.setImmediate||r.setTimeout;t.exports=function(e,t){function v(e,t,n,r){a?e.appendBinary(t.substring(n,r)):e.append(u(t,n,r))}function m(){var n=p*c,r=n+c;n+c>=e.size&&(r=e.size),p++;if(p<h)v(d,e,n,r),o(m);else{v(d,e,n,r);var i=d.end(!0),s=f(i);t(null,s),d.destroy()}}if(!n.browser){var r=i.createHash("md5").update(e).digest("base64");t(null,r);return}var a=typeof e=="string",l=a?e.length:e.byteLength,c=Math.min(524288,l),h=Math.ceil(l/c),p=0,d=a?new s:new s.ArrayBuffer;m()}}).call(this,e("/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":28,crypto:26,"spark-md5":57}],13:[function(e,t,n){function i(e,t,n){return new r(function(r,i){t&&typeof t=="object"&&(t=t._id);if(typeof t!="string")return i(new Error("doc id is required"));e.get(t,function(o,u){if(o)return o.status!==404?i(o):r(s(e,n({_id:t}),n));var a=n(u);if(!a)return r(u);r(s(e,a,n))})})}function s(e,t,n){return e.put(t)["catch"](function(r){if(r.status!==409)throw r;return i(e,t,n)})}var r=e("../utils").Promise;t.exports=function(e,t,n,r){if(typeof r!="function")return i(e,t,n);i(e,t,n).then(function(e){r(null,e)},r)}},{"../utils":23}],14:[function(e,t,n){function i(e){return 0|Math.random()*e}function s(e,t){t=t||r.length;var n="",s=-1;if(e){while(++s<e)n+=r[i(t)];return n}while(++s<36)switch(s){case 8:case 13:case 18:case 23:n+="-";break;case 19:n+=r[i(16)&3|8];break;default:n+=r[i(16)]}return n}var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.exports=s},{}],15:[function(_dereq_,module,exports){function evalFilter(input){return eval(["(function () { return ",input," })()"].join(""))}module.exports=evalFilter},{}],16:[function(_dereq_,module,exports){function evalView(input){return eval(["(function () {","  return function (doc) {","    var emitted = false;","    var emit = function (a, b) {","      emitted = true;","    };","    var view = "+input+";","    view(doc);","    if (emitted) {","      return true;","    }","  }","})()"].join("\n"))}module.exports=evalView},{}],17:[function(e,t,n){(function(n){var r=e("./setup");t.exports=r,r.ajax=e("./deps/ajax"),r.extend=e("pouchdb-extend"),r.utils=e("./utils"),r.Errors=e("./deps/errors"),r.replicate=e("./replicate").replicate,r.sync=e("./sync"),r.version=e("./version");var i=e("./adapters/http");r.adapter("http",i),r.adapter("https",i),r.adapter("idb",e("./adapters/idb")),r.adapter("websql",e("./adapters/websql")),r.plugin(e("pouchdb-mapreduce"));if(!n.browser){var s=e("./adapters/leveldb");r.adapter("ldb",s),r.adapter("leveldb",s)}}).call(this,e("/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./adapters/http":2,"./adapters/idb":3,"./adapters/leveldb":26,"./adapters/websql":5,"./deps/ajax":8,"./deps/errors":11,"./replicate":19,"./setup":20,"./sync":21,"./utils":23,"./version":24,"/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":28,"pouchdb-extend":48,"pouchdb-mapreduce":51}],18:[function(e,t,n){function i(e){var t=e.shift(),n=[t.id,t.opts,[]],r=n,i;while(e.length)t=e.shift(),i=[t.id,t.opts,[]],r[2].push(i),r=i;return n}function s(e,t){var n=[{tree1:e,tree2:t}],r=!1;while(n.length>0){var i=n.pop(),s=i.tree1,o=i.tree2;if(s[1].status||o[1].status)s[1].status=s[1].status==="available"||o[1].status==="available"?"available":"missing";for(var u=0;u<o[2].length;u++){if(!s[2][0]){r="new_leaf",s[2][0]=o[2][u];continue}var a=!1;for(var f=0;f<s[2].length;f++)s[2][f][0]===o[2][u][0]&&(n.push({tree1:s[2][f],tree2:o[2][u]}),a=!0);a||(r="new_branch",s[2].push(o[2][u]),s[2].sort())}}return{conflicts:r,tree:e}}function o(e,t,n){var r=[],i=!1,o=!1,u;return e.length?(e.forEach(function(e){if(e.pos===t.pos&&e.ids[0]===t.ids[0])u=s(e.ids,t.ids),r.push({pos:e.pos,ids:u.tree}),i=i||u.conflicts,o=!0;else if(n!==!0){var a=e.pos<t.pos?e:t,f=e.pos<t.pos?t:e,l=f.pos-a.pos,c=[],h=[];h.push({ids:a.ids,diff:l,parent:null,parentIdx:null});while(h.length>0){var p=h.pop();if(p.diff===0){p.ids[0]===f.ids[0]&&c.push(p);continue}if(!p.ids)continue;p.ids[2].forEach(function(e,t){h.push({ids:e,diff:p.diff-1,parent:p.ids,parentIdx:t})})}var d=c[0];d?(u=s(d.ids,f.ids),d.parent[2][d.parentIdx]=u.tree,r.push({pos:a.pos,ids:a.ids}),i=i||u.conflicts,o=!0):r.push(e)}else r.push(e)}),o||r.push(t),r.sort(function(e,t){return e.pos-t.pos}),{tree:r,conflicts:i||"internal_node"}):{tree:[t],conflicts:"new_leaf"}}function u(e,t){var n=a.rootToLeaf(e).map(function(e){var n=e.ids.slice(-t);return{pos:e.pos+(e.ids.length-n.length),ids:i(n)}});return n.reduce(function(e,t,n,r){return o(e,t,!0).tree},[n.shift()])}var r=e("pouchdb-extend"),a={};a.merge=function(e,t,n){e=r(!0,[],e),t=r(!0,{},t);var i=o(e,t);return{tree:u(i.tree,n),conflicts:i.conflicts}},a.winningRev=function(e){var t=[];return a.traverseRevTree(e.rev_tree,function(e,n,r,i,s){e&&t.push({pos:n,id:r,deleted:!!s.deleted})}),t.sort(function(e,t){return e.deleted!==t.deleted?e.deleted>t.deleted?1:-1:e.pos!==t.pos?t.pos-e.pos:e.id<t.id?1:-1}),t[0].pos+"-"+t[0].id},a.traverseRevTree=function(e,t){var n=e.slice(),r;while(r=n.pop()){var i=r.pos,s=r.ids,o=s[2],u=t(o.length===0,i,s[0],r.ctx,s[1]);for(var a=0,f=o.length;a<f;a++)n.push({pos:i+1,ids:o[a],ctx:u})}},a.collectLeaves=function(e){var t=[];return a.traverseRevTree(e,function(e,n,r,i,s){e&&t.unshift({rev:n+"-"+r,pos:n,opts:s})}),t.sort(function(e,t){return t.pos-e.pos}),t.map(function(e){delete e.pos}),t},a.collectConflicts=function(e){var t=a.winningRev(e),n=a.collectLeaves(e.rev_tree),r=[];return n.forEach(function(e){e.rev!==t&&!e.opts.deleted&&r.push(e.rev)}),r},a.rootToLeaf=function(e){var t=[];return a.traverseRevTree(e,function(e,n,r,i,s){i=i?i.slice(0):[],i.push({id:r,opts:s});if(e){var o=n+1-i.length;t.unshift({pos:o,ids:i})}return i}),t},t.exports=a},{"pouchdb-extend":48}],19:[function(e,t,n){function o(e){i.call(this),this.cancelled=!1;var t=this,n=new r.Promise(function(e,n){t.once("complete",e),t.once("error",n)});t.then=function(e,t){return n.then(e,t)},t["catch"]=function(e){return n["catch"](e)},t["catch"](function(e){})}function u(e,t,n){var i=n.filter?n.filter.toString():"";return e.id().then(function(e){return t.id().then(function(t){var s=e+t+i+JSON.stringify(n.query_params)+n.doc_ids;return r.MD5(s).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})})})}function a(e,t,n,r){return e.get(t)["catch"](function(e){if(e.status===404)return{_id:t};throw e}).then(function(t){if(r.cancelled)return;return t.last_seq=n,e.put(t)})}function f(e,t,n,r){this.src=e,this.target=t,this.id=n,this.returnValue=r}function l(e,t,n,i,o){function x(){if(a.docs.length===0)return;var e=a.docs;return n.bulkDocs({docs:e},{new_edits:!1}).then(function(e){if(o.cancelled)throw D(),new Error("cancelled");var t=[];e.forEach(function(e){if(e.error){E.doc_write_failures++;var n=new Error(e.reason||e.message||"Unknown reason");n.name=e.name||e.error,t.push(n)}}),E.errors=E.errors.concat(t),E.docs_written+=a.docs.length-t.length;var n=t.filter(function(e){return e.name!=="unauthorized"&&e.name!=="forbidden"});if(n.length>0){var r=new Error("bulkDocs error");throw r.other_errors=t,_("target.bulkDocs failed to write docs",r),new Error("bulkWrite partial failure")}},function(t){throw E.doc_write_failures+=e.length,t})}function T(){var e=a.diffs,n=Object.keys(e)[0],i=e[n].missing,u=[];for(var f=0;f<i.length;f+=s)u.push(i.slice(f,Math.min(i.length,f+s)));return r.Promise.all(u.map(function(r){return t.get(n,{revs:!0,open_revs:r,attachments:!0}).then(function(t){t.forEach(function(t){if(o.cancelled)return D();t.ok&&(E.docs_read++,a.pendingRevs++,a.docs.push(t.ok),delete e[t.ok._id])})})}))}function N(){return Object.keys(a.diffs).length>0?T().then(N):r.Promise.resolve()}function C(){var e=Object.keys(a.diffs).filter(function(e){var t=a.diffs[e].missing;return t.length===1&&t[0].slice(0,2)==="1-"});return t.allDocs({keys:e,include_docs:!0}).then(function(e){if(o.cancelled)throw D(),new Error("cancelled");e.rows.forEach(function(e){e.doc&&!e.deleted&&e.value.rev.slice(0,2)==="1-"&&(!e.doc._attachments||Object.keys(e.doc._attachments).length===0)&&(E.docs_read++,a.pendingRevs++,a.docs.push(e.doc),delete a.diffs[e.id])})})}function k(){return C().then(N)}function L(){return c=!0,w.writeCheckpoint(a.seq).then(function(e){c=!1;if(o.cancelled)throw D(),new Error("cancelled");E.last_seq=d=a.seq,o.emit("change",r.clone(E)),a=undefined,j()})["catch"](function(e){throw c=!1,_("writeCheckpoint completed with error",e),e})}function A(){var e={};return a.changes.forEach(function(t){e[t.id]=t.changes.map(function(e){return e.rev})}),n.revsDiff(e).then(function(e){if(o.cancelled)throw D(),new Error("cancelled");a.diffs=e,a.pendingRevs=0})}function O(){if(o.cancelled||a)return;if(u.length===0){M(!0);return}a=u.shift(),A().then(k).then(x).then(L).then(O)["catch"](function(e){_("batch processing terminated with error",e)})}function M(e){if(l.changes.length===0){u.length===0&&!a&&((v&&S.live||h)&&o.emit("uptodate",r.clone(E)),h&&D());return}if(e||h||l.changes.length>=m)u.push(l),l={seq:0,changes:[],docs:[]},O()}function _(e,t){if(p)return;E.ok=!1,E.status="aborted",E.errors.push(t),u=[],l={seq:0,changes:[],docs:[]},D()}function D(){if(p)return;if(o.cancelled){E.status="cancelled";if(c)return}E.status=E.status||"complete",E.end_time=new Date,E.last_seq=d,p=o.cancelled=!0;var e=E.errors.filter(function(e){return e.name!=="unauthorized"&&e.name!=="forbidden"});if(e.length>0){var t=E.errors.pop();E.errors.length>0&&(t.other_errors=E.errors),t.result=E,o.emit("error",t)}else o.emit("complete",E);o.removeAllListeners()}function P(e){if(o.cancelled)return D();l.changes.length===0&&u.length===0&&!a&&o.emit("outofdate",r.clone(E)),l.seq=e.seq,l.changes.push(e),M(u.length===0)}function H(e){y=!1;if(o.cancelled)return D();S.since<e.last_seq?(S.since=e.last_seq,j()):v?(S.live=!0,j()):h=!0,M(!0)}function B(e){y=!1;if(o.cancelled)return D();_("changes rejected",e)}function j(){function e(){r.cancel()}function n(){o.removeListener("cancel",e)}if(!(!y&&!h&&u.length<g))return;y=!0,o.once("cancel",e);var r=t.changes(S).on("change",P);r.then(n,n),r.then(H)["catch"](B)}function F(){w.getCheckpoint().then(function(e){d=e,S={since:d,limit:m,batch_size:m,style:"all_docs",doc_ids:b,returnDocs:!1},i.filter&&(S.filter=i.filter),i.query_params&&(S.query_params=i.query_params),j()})["catch"](function(e){_("getCheckpoint rejected with ",e)})}var u=[],a,l={seq:0,changes:[],docs:[]},c=!1,h=!1,p=!1,d=0,v=i.continuous||i.live||!1,m=i.batch_size||100,g=i.batches_limit||10,y=!1,b=i.doc_ids,w=new f(t,n,e,o),E={ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]},S={};o.ready(t,n),o.once("cancel",D),typeof i.onChange=="function"&&o.on("change",i.onChange),typeof i.complete=="function"&&(o.once("error",i.complete),o.once("complete",function(e){i.complete(null,e)})),typeof i.since=="undefined"?F():(c=!0,w.writeCheckpoint(i.since).then(function(e){c=!1;if(o.cancelled){D();return}d=i.since,F()})["catch"](function(e){throw c=!1,_("writeCheckpoint completed with error",e),e}))}function c(e,t){var n=t.PouchConstructor;return typeof e=="string"?new n(e):e.then?e:r.Promise.resolve(e)}function h(e,t,n,i){typeof n=="function"&&(i=n,n={}),typeof n=="undefined"&&(n={}),n.complete||(n.complete=i||function(){}),n=r.clone(n),n.continuous=n.continuous||n.live,n.PouchConstructor=n.PouchConstructor||this;var s=new o(n);return c(e,n).then(function(e){return c(t,n).then(function(t){return u(e,t,n).then(function(r){l(r,e,t,n,s)})})})["catch"](function(e){s.emit("error",e),n.complete(e)}),s}var r=e("./utils"),i=e("events").EventEmitter,s=50;r.inherits(o,i),o.prototype.cancel=function(){this.cancelled=!0,this.emit("cancel")},o.prototype.ready=function(e,t){function r(){n.cancel()}function i(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}var n=this;e.once("destroyed",r),t.once("destroyed",r),this.then(i,i)},f.prototype.writeCheckpoint=function(e){var t=this;return this.updateTarget(e).then(function(){return t.updateSource(e)})},f.prototype.updateTarget=function(e){return a(this.target,this.id,e,this.returnValue)},f.prototype.updateSource=function(e){var t=this;return this.readOnlySource?r.Promise.resolve(!0):a(this.src,this.id,e,this.returnValue)["catch"](function(e){var n=typeof e.status=="number"&&Math.floor(e.status/100)===4;if(n)return t.readOnlySource=!0,!0;throw e})},f.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.src.get(e.id).then(function(e){return t.last_seq===e.last_seq?e.last_seq:0},function(n){if(n.status===404&&t.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(n){return n.status===401?(e.readOnlySource=!0,t.last_seq):0});throw n})})["catch"](function(e){if(e.status!==404)throw e;return 0})},n.toPouch=c,n.replicate=h},{"./utils":23,events:27}],20:[function(e,t,n){(function(n){var r=e("./constructor"),i=e("./utils"),s=i.Promise,o=e("events").EventEmitter;r.adapters={},r.preferredAdapters=e("./adapters/preferredAdapters.js"),r.prefix="_pouch_";var u=new o,a=["on","addListener","emit","listeners","once","removeAllListeners","removeListener","setMaxListeners"];a.forEach(function(e){r[e]=u[e].bind(u)}),r.setMaxListeners(0),r.parseAdapter=function(e,t){var s=e.match(/([a-z\-]*):\/\/(.*)/),o,u;if(s){e=/http(s?)/.test(s[1])?s[1]+"://"+s[2]:s[2],o=s[1];if(!r.adapters[o].valid())throw"Invalid adapter";return{name:e,adapter:s[1]}}var a="idb"in r.adapters&&"websql"in r.adapters&&i.hasLocalStorage()&&n.localStorage["_pouch__websqldb_"+r.prefix+e];if(typeof t!="undefined"&&t.db)u="leveldb";else for(var f=0;f<r.preferredAdapters.length;++f){u=r.preferredAdapters[f];if(u in r.adapters){if(a&&u==="idb")continue;break}}o=r.adapters[u];if(u&&o){var l="use_prefix"in o?o.use_prefix:!0;return{name:l?r.prefix+e:e,adapter:u}}throw"No valid adapter found"},r.destroy=i.toPromise(function(e,t,n){function h(){a.destroy(c,t,function(t,i){t?n(t):(r.emit("destroyed",e),r.emit(e,"destroyed"),n(null,i||{ok:!0}))})}if(typeof t=="function"||typeof t=="undefined")n=t,t={};e&&typeof e=="object"&&(t=e,e=undefined);var o=r.parseAdapter(t.name||e,t),u=o.name,a=r.adapters[o.adapter],f="use_prefix"in a?a.use_prefix:!0,l=f?u.replace(new RegExp("^"+r.prefix),""):u,c=(o.adapter==="http"||o.adapter==="https"?"":t.prefix||"")+u,p=i.extend(!0,{},t,{adapter:o.adapter});new r(l,p,function(e,u){if(e)return n(e);u.get("_local/_pouch_dependentDbs",function(e,u){if(e)return e.status!==404?n(e):h();var a=u.dependentDbs,l=Object.keys(a).map(function(e){var n=f?e.replace(new RegExp("^"+r.prefix),""):e,s=i.extend(!0,t,{adapter:o.adapter});return r.destroy(n,s)});s.all(l).then(h,function(e){n(e)})})})}),r.allDbs=i.toPromise(function(e){var t=new Error("allDbs method removed");t.stats="400",e(t)}),r.adapter=function(e,t){t.valid()&&(r.adapters[e]=t)},r.plugin=function(e){Object.keys(e).forEach(function(t){r.prototype[t]=e[t]})},r.defaults=function(e){function t(t,n,s){if(typeof n=="function"||typeof n=="undefined")s=n,n={};t&&typeof t=="object"&&(n=t,t=undefined),n=i.extend(!0,{},e,n),r.call(this,t,n,s)}return i.inherits(t,r),t.destroy=i.toPromise(function(t,n,s){if(typeof n=="function"||typeof n=="undefined")s=n,n={};return t&&typeof t=="object"&&(n=t,t=undefined),n=i.extend(!0,{},e,n),r.destroy(t,n,s)}),a.forEach(function(e){t[e]=u[e].bind(u)}),t.setMaxListeners(0),t.preferredAdapters=r.preferredAdapters.slice(),Object.keys(r).forEach(function(e){e in t||(t[e]=r[e])}),t},t.exports=r}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./adapters/preferredAdapters.js":4,"./constructor":7,"./utils":23,events:27}],21:[function(e,t,n){function u(e,t,n,s){return typeof n=="function"&&(s=n,n={}),typeof n=="undefined"&&(n={}),n=r.clone(n),n.PouchConstructor=n.PouchConstructor||this,e=i.toPouch(e,n),t=i.toPouch(t,n),new a(e,t,n,s)}function a(e,t,n,i){function l(e){f||(f=!0,o.emit("cancel",e))}function c(e){o.emit("change",{direction:"pull",change:e})}function h(e){o.emit("change",{direction:"push",change:e})}function v(e){return function(t,n){var r=t==="change"&&(n===c||n===h),i=t==="cancel"&&n===l,s=t in p&&n===p[t];if(r||i||s)t in d||(d[t]={}),d[t][e]=!0,Object.keys(d[t]).length===2&&o.removeAllListeners(t)}}var o=this;this.canceled=!1;var u,a;"onChange"in n&&(u=n.onChange,delete n.onChange),typeof i=="function"&&!n.complete?a=i:"complete"in n&&(a=n.complete,delete n.complete),this.push=s(e,t,n),this.pull=s(t,e,n);var f=!1,p={},d={};this.on("newListener",function(e){e==="change"?(o.pull.on("change",c),o.push.on("change",h)):e==="cancel"?(o.pull.on("cancel",l),o.push.on("cancel",l)):e!=="error"&&e!=="removeListener"&&e!=="complete"&&!(e in p)&&(p[e]=function(t){o.emit(e,t)},o.pull.on(e,p[e]),o.push.on(e,p[e]))}),this.on("removeListener",function(e){e==="change"?(o.pull.removeListener("change",c),o.push.removeListener("change",h)):e==="cancel"?(o.pull.removeListener("cancel",l),o.push.removeListener("cancel",l)):e in p&&typeof p[e]=="function"&&(o.pull.removeListener(e,p[e]),o.push.removeListener(e,p[e]),delete p[e])}),this.pull.on("removeListener",v("pull")),this.push.on("removeListener",v("push"));var m=r.Promise.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return o.emit("complete",t),a&&a(null,t),o.removeAllListeners(),t},function(e){throw o.cancel(),o.emit("error",e),a&&a(e),o.removeAllListeners(),e});this.then=function(e,t){return m.then(e,t)},this["catch"]=function(e){return m["catch"](e)}}var r=e("./utils"),i=e("./replicate"),s=i.replicate,o=e("events").EventEmitter;r.inherits(a,o),t.exports=u,a.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}},{"./replicate":19,"./utils":23,events:27}],22:[function(e,t,n){function r(){this.isReady=!1,this.failed=!1,this.queue=[]}t.exports=r,r.prototype.execute=function(){var e,t;if(this.failed)while(e=this.queue.shift()){if(typeof e=="function"){e(this.failed);continue}t=e.parameters[e.parameters.length-1],typeof t=="function"?t(this.failed):e.name==="changes"&&typeof t.complete=="function"&&t.complete(this.failed)}else if(this.isReady)while(e=this.queue.shift())typeof e=="function"?e():e.task=this.db[e.name].apply(this.db,e.parameters)},r.prototype.fail=function(e){this.failed=e,this.execute()},r.prototype.ready=function(e){if(this.failed)return!1;if(arguments.length===0)return this.isReady;this.isReady=e?!0:!1,this.db=e,this.execute()},r.prototype.addTask=function(e,t){if(typeof e!="function"){var n={name:e,parameters:t};return this.queue.push(n),this.failed&&this.execute(),n}this.queue.push(e),this.failed&&this.execute()}},{}],23:[function(e,t,n){(function(t,r){function l(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function p(){return typeof chrome!="undefined"&&typeof chrome.storage!="undefined"&&typeof chrome.storage.local!="undefined"}function d(){if(!(this instanceof d))return new d;var e=this;u.call(this),this.isChrome=p(),this.listeners={},this.hasLocal=!1,this.isChrome||(this.hasLocal=n.hasLocalStorage()),this.isChrome?chrome.storage.onChanged.addListener(function(t){t.db_name!=null&&e.emit(t.dbName.newValue)}):this.hasLocal&&(r.addEventListener?r.addEventListener("storage",function(t){e.emit(t.key)}):r.attachEvent("storage",function(t){e.emit(t.key)}))}var i=e("./merge");n.extend=e("pouchdb-extend"),n.ajax=e("./deps/ajax"),n.createBlob=e("./deps/blob"),n.uuid=e("./deps/uuid"),n.getArguments=e("argsarray");var s=e("./deps/buffer"),o=e("./deps/errors"),u=e("events").EventEmitter,a=e("./deps/collections");n.Map=a.Map,n.Set=a.Set,typeof r.Promise=="function"?n.Promise=r.Promise:n.Promise=e("bluebird");var f=n.Promise,c=l(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),h=l(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);n.clone=function(e){return n.extend(!0,{},e)},n.inherits=e("inherits"),n.invalidIdError=function(e){var t;e?typeof e!="string"?(t=new TypeError(o.INVALID_ID.message),t.status=400):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=new TypeError(o.RESERVED_ID.message),t.status=400):(t=new TypeError(o.MISSING_ID.message),t.status=412);if(t)throw t},n.call=n.getArguments(function(e){if(!e.length)return;var t=e.shift();typeof t=="function"&&t.apply(this,e)}),n.isLocalId=function(e){return/^_local/.test(e)},n.isDeleted=function(e,t){t||(t=i.winningRev(e));var n=t.indexOf("-");n!==-1&&(t=t.substring(n+1));var r=!1;return i.traverseRevTree(e.rev_tree,function(e,n,i,s,o){i===t&&(r=!!o.deleted)}),r},n.filterChange=function(e){return function(t){var n={},r=e.filter&&typeof e.filter=="function";n.query=e.query_params;if(e.filter&&r&&!e.filter.call(this,t.doc,n))return!1;if(e.doc_ids&&e.doc_ids.indexOf(t.id)===-1)return!1;if(!e.include_docs)delete t.doc;else for(var i in t.doc._attachments)t.doc._attachments.hasOwnProperty(i)&&(t.doc._attachments[i].stub=!0);return!0}},n.parseDoc=function(e,t){var r,i,s,u,a={status:"available"};e._deleted&&(a.deleted=!0);if(t){e._id||(e._id=n.uuid()),i=n.uuid(32,16).toLowerCase();if(e._rev){s=/^(\d+)-(.+)$/.exec(e._rev);if(!s){var f=new TypeError("invalid value for property '_rev'");f.status=400}e._rev_tree=[{pos:parseInt(s[1],10),ids:[s[2],{status:"missing"},[[i,a,[]]]]}],r=parseInt(s[1],10)+1}else e._rev_tree=[{pos:1,ids:[i,a,[]]}],r=1}else{e._revisions&&(e._rev_tree=[{pos:e._revisions.start-e._revisions.ids.length+1,ids:e._revisions.ids.reduce(function(e,t){return e===null?[t,a,[]]:[t,{status:"missing"},[e]]},null)}],r=e._revisions.start,i=e._revisions.ids[0]);if(!e._rev_tree){s=/^(\d+)-(.+)$/.exec(e._rev);if(!s)throw u=new TypeError(o.BAD_ARG.message),u.status=o.BAD_ARG.status,u;r=parseInt(s[1],10),i=s[2],e._rev_tree=[{pos:parseInt(s[1],10),ids:[s[2],a,[]]}]}}n.invalidIdError(e._id),e._rev=[r,i].join("-");var l={metadata:{},data:{}};for(var p in e)if(e.hasOwnProperty(p)){var d=p[0]==="_";if(d&&!c[p])throw u=new Error(o.DOC_VALIDATION.message+": "+p),u.status=o.DOC_VALIDATION.status,u;d&&!h[p]?l.metadata[p.slice(1)]=e[p]:l.data[p]=e[p]}return l},n.isCordova=function(){return typeof cordova!="undefined"||typeof PhoneGap!="undefined"||typeof phonegap!="undefined"},n.hasLocalStorage=function(){if(p())return!1;try{return r.localStorage}catch(e){return!1}},n.Changes=d,n.inherits(d,u),d.prototype.addListener=function(e,t,r,i){function s(){r.changes({include_docs:i.include_docs,conflicts:i.conflicts,continuous:!1,descending:!1,filter:i.filter,view:i.view,since:i.since,query_params:i.query_params,onChange:function(e){e.seq>i.since&&!i.cancelled&&(i.since=e.seq,n.call(i.onChange,e))}})}if(this.listeners[t])return;this.listeners[t]=s,this.on(e,s)},d.prototype.removeListener=function(e,t){if(!(t in this.listeners))return;u.prototype.removeListener.call(this,e,this.listeners[t])},d.prototype.notifyLocalWindows=function(e){this.isChrome?chrome.storage.local.set({dbName:e}):this.hasLocal&&(localStorage[e]=localStorage[e]==="a"?"b":"a")},d.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},!!t.browser&&"atob"in r?n.atob=function(e){return atob(e)}:n.atob=function(e){var t=new s(e,"base64");if(t.toString("base64")!==e)throw"Cannot base64 encode full string";return t.toString("binary")},!!t.browser&&"btoa"in r?n.btoa=function(e){return btoa(e)}:n.btoa=function(e){return(new s(e,"binary")).toString("base64")},n.fixBinary=function(e){if(!t.browser)return e;var n=e.length,r=new ArrayBuffer(n),i=new Uint8Array(r);for(var s=0;s<n;s++)i[s]=e.charCodeAt(s);return r},n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw typeof console.trace=="function"&&console.trace(),new Error("once called  more than once");t=!0,e.apply(this,n)})},n.toPromise=function(e){return n.getArguments(function(r){var i=this,s=typeof r[r.length-1]=="function"?r.pop():!1,o;s&&(o=function(e,n){t.nextTick(function(){s(e,n)})});var u=new f(function(t,s){var o;try{var u=n.once(function(e,n){e?s(e):t(n)});r.push(u),o=e.apply(i,r),o&&typeof o.then=="function"&&t(o)}catch(a){s(a)}});return o&&u.then(function(e){o(null,e)},o),u.cancel=function(){return this},u})},n.adapterFun=function(e,t){return n.toPromise(n.getArguments(function(r){if(this._closed)return f.reject(new Error("database is closed"));var i=this;return this.taskqueue.isReady?t.apply(this,r):new n.Promise(function(t,n){i.taskqueue.addTask(function(s){s?n(s):t(i[e].apply(i,r))})})}))},n.arrayBufferToBinaryString=function(e){var t="",n=new Uint8Array(e),r=n.byteLength;for(var i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t},n.cancellableFun=function(e,t,r){r=r?n.clone(!0,{},r):{};var i=new u,s=r.complete||function(){},o=r.complete=n.once(function(e,t){e?s(e):(i.emit("end",t),s(null,t)),i.removeAllListeners()}),a=r.onChange||function(){},l=0;t.on("destroyed",function(){i.removeAllListeners()}),r.onChange=function(e){a(e);if(e.seq<=l)return;l=e.seq,i.emit("change",e),e.deleted?i.emit("delete",e):e.changes.length===1&&e.changes[0].rev.slice(0,1)==="1-"?i.emit("create",e):i.emit("update",e)};var c=new f(function(e,t){r.complete=function(n,r){n?t(n):e(r)}});return c.then(function(e){o(null,e)},o),c.cancel=function(){c.isCancelled=!0,t.taskqueue.isReady&&r.complete(null,{status:"cancelled"})},t.taskqueue.isReady?e(t,r,c):t.taskqueue.addTask(function(){c.isCancelled?r.complete(null,{status:"cancelled"}):e(t,r,c)}),c.on=i.on.bind(i),c.once=i.once.bind(i),c.addListener=i.addListener.bind(i),c.removeListener=i.removeListener.bind(i),c.removeAllListeners=i.removeAllListeners.bind(i),c.setMaxListeners=i.setMaxListeners.bind(i),c.listeners=i.listeners.bind(i),c.emit=i.emit.bind(i),c},n.MD5=n.toPromise(e("./deps/md5"))}).call(this,e("/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./deps/ajax":8,"./deps/blob":9,"./deps/buffer":26,"./deps/collections":10,"./deps/errors":11,"./deps/md5":12,"./deps/uuid":14,"./merge":18,"/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":28,argsarray:25,bluebird:33,events:27,inherits:29,"pouchdb-extend":48}],24:[function(e,t,n){t.exports="3.0.6"},{}],25:[function(e,t,n){function r(e){return function(){var t=arguments.length;if(t){var n=[],r=-1;while(++r<t)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}t.exports=r},{}],26:[function(e,t,n){},{}],27:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||undefined}function i(e){return typeof e=="function"}function s(e){return typeof e=="number"}function o(e){return typeof e=="object"&&e!==null}function u(e){return e===void 0}t.exports=r,r.EventEmitter=r,r.prototype._events=undefined,r.prototype._maxListeners=undefined,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,f;this._events||(this._events={});if(e==="error")if(!this._events.error||o(this._events.error)&&!this._events.error.length)throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');n=this._events[e];if(u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=arguments.length,s=new Array(r-1);for(a=1;a<r;a++)s[a-1]=arguments[a];n.apply(this,s)}else if(o(n)){r=arguments.length,s=new Array(r-1);for(a=1;a<r;a++)s[a-1]=arguments[a];f=n.slice(),r=f.length;for(a=0;a<r;a++)f[a].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t;if(o(this._events[e])&&!this._events[e].warned){var n;u(this._maxListeners)?n=r.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;n=this._events[e],s=n.length,r=-1;if(n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(r<0)return this;n.length===1?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}return this.removeAllListeners("removeListener"),this._events={},this}n=this._events[e];if(i(n))this.removeListener(e,n);else while(n.length)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:i(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t},r.listenerCount=function(e,t){var n;return!e._events||!e._events[t]?n=0:i(e._events[t])?n=1:n=e._events[t].length,n}},{}],28:[function(e,t,n){var r=t.exports={};r.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||t===null)&&e.data==="process-tick"){e.stopPropagation();if(n.length>0){var r=n.shift();r()}}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],29:[function(e,t,n){typeof Object.create=="function"?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],30:[function(e,t,n){function r(){}t.exports=r},{}],31:[function(e,t,n){function a(e){function h(e,r){function i(e){a[r]=e,++f===t&!n&&(n=!0,u.resolve(c,a))}s(e).then(i,function(e){n||(n=!0,u.reject(c,e))})}if(Object.prototype.toString.call(e)!=="[object Array]")return i(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return s([]);var a=new Array(t),f=0,l=-1,c=new r(o);while(++l<t)h(e[l],l);return c}var r=e("./promise"),i=e("./reject"),s=e("./resolve"),o=e("./INTERNAL"),u=e("./handlers");t.exports=a},{"./INTERNAL":30,"./handlers":32,"./promise":34,"./reject":37,"./resolve":38}],32:[function(e,t,n){function o(e){var t=e&&e.then;if(e&&typeof e=="object"&&typeof t=="function")return function(){t.apply(e,arguments)}}var r=e("./tryCatch"),i=e("./resolveThenable"),s=e("./states");n.resolve=function(e,t){var u=r(o,t);if(u.status==="error")return n.reject(e,u.value);var a=u.value;if(a)i.safely(e,a);else{e.state=s.FULFILLED,e.outcome=t;var f=-1,l=e.queue.length;while(++f<l)e.queue[f].callFulfilled(t)}return e},n.reject=function(e,t){e.state=s.REJECTED,e.outcome=t;var n=-1,r=e.queue.length;while(++n<r)e.queue[n].callRejected(t);return e}},{"./resolveThenable":39,"./states":40,"./tryCatch":41}],33:[function(e,t,n){t.exports=n=e("./promise"),n.resolve=e("./resolve"),n.reject=e("./reject"),n.all=e("./all"),n.race=e("./race")},{"./all":31,"./promise":34,"./race":36,"./reject":37,"./resolve":38}],34:[function(e,t,n){function a(e){if(!(this instanceof a))return new a(e);if(typeof e!="function")throw new TypeError("reslover must be a function");this.state=o.PENDING,this.queue=[],this.outcome=void 0,e!==i&&s.safely(this,e)}var r=e("./unwrap"),i=e("./INTERNAL"),s=e("./resolveThenable"),o=e("./states"),u=e("./queueItem");t.exports=a,a.prototype["catch"]=function(e){return this.then(null,e)},a.prototype.then=function(e,t){if(typeof e!="function"&&this.state===o.FULFILLED||typeof t!="function"&&this.state===o.REJECTED)return this;var n=new a(i);if(this.state!==o.PENDING){var s=this.state===o.FULFILLED?e:t;r(n,s,this.outcome)}else this.queue.push(new u(n,e,t));return n}},{"./INTERNAL":30,"./queueItem":35,"./resolveThenable":39,"./states":40,"./unwrap":42}],35:[function(e,t,n){function s(e,t,n){this.promise=e,typeof t=="function"&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),typeof n=="function"&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var r=e("./handlers"),i=e("./unwrap");t.exports=s,s.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},s.prototype.otherCallFulfilled=function(e){i(this.promise,this.onFulfilled,e)},s.prototype.callRejected=function(e){r.reject(this.promise,e)},s.prototype.otherCallRejected=function(e){i(this.promise,this.onRejected,e)}},{"./handlers":32,"./unwrap":42}],36:[function(e,t,n){function a(e){function c(e){s(e).then(function(e){n||(n=!0,u.resolve(l,e))},function(e){n||(n=!0,u.reject(l,e))})}if(Object.prototype.toString.call(e)!=="[object Array]")return i(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return s([]);var a=0,f=-1,l=new r(o);while(++f<t)c(e[f]);return l}var r=e("./promise"),i=e("./reject"),s=e("./resolve"),o=e("./INTERNAL"),u=e("./handlers");t.exports=a},{"./INTERNAL":30,"./handlers":32,"./promise":34,"./reject":37,"./resolve":38}],37:[function(e,t,n){function o(e){var t=new r(i);return s.reject(t,e)}var r=e("./promise"),i=e("./INTERNAL"),s=e("./handlers");t.exports=o},{"./INTERNAL":30,"./handlers":32,"./promise":34}],38:[function(e,t,n){function c(e){if(e)return e instanceof r?e:s.resolve(new r(i),e);var t=typeof e;switch(t){case"boolean":return o;case"undefined":return a;case"object":return u;case"number":return f;case"string":return l}}var r=e("./promise"),i=e("./INTERNAL"),s=e("./handlers");t.exports=c;var o=s.resolve(new r(i),!1),u=s.resolve(new r(i),null),a=s.resolve(new r(i),void 0),f=s.resolve(new r(i),0),l=s.resolve(new r(i),"")},{"./INTERNAL":30,"./handlers":32,"./promise":34}],39:[function(e,t,n){function s(e,t){function s(t){if(n)return;n=!0,r.reject(e,t)}function o(t){if(n)return;n=!0,r.resolve(e,t)}function u(){t(o,s)}var n=!1,a=i(u);a.status==="error"&&s(a.value)}var r=e("./handlers"),i=e("./tryCatch");n.safely=s},{"./handlers":32,"./tryCatch":41}],40:[function(e,t,n){n.REJECTED=["REJECTED"],n.FULFILLED=["FULFILLED"],n.PENDING=["PENDING"]},{}],41:[function(e,t,n){function r(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=r},{}],42:[function(e,t,n){function s(e,t,n){r(function(){var r;try{r=t(n)}catch(s){return i.reject(e,s)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)})}var r=e("immediate"),i=e("./handlers");t.exports=s},{"./handlers":32,immediate:43}],43:[function(e,t,n){function o(){i=!0;var e,t,n=s.length;while(n){t=s,s=[],e=-1;while(++e<n)t[e]();n=s.length}i=!1}function l(e){s.push(e)===1&&!i&&u()}var r=[e("./nextTick"),e("./mutation.js"),e("./messageChannel"),e("./stateChange"),e("./timeout")],i,s=[],u,a=-1,f=r.length;while(++a<f)if(r[a]&&r[a].test&&r[a].test()){u=r[a].install(o);break}t.exports=l},{"./messageChannel":44,"./mutation.js":45,"./nextTick":26,"./stateChange":46,"./timeout":47}],44:[function(e,t,n){(function(e){n.test=function(){return e.setImmediate?!1:typeof e.MessageChannel!="undefined"},n.install=function(t){var n=new e.MessageChannel;return n.port1.onmessage=t,function(){n.port2.postMessage(0)}}}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],45:[function(e,t,n){(function(e){var t=e.MutationObserver||e.WebKitMutationObserver;n.test=function(){return t},n.install=function(n){var r=0,i=new t(n),s=e.document.createTextNode("");return i.observe(s,{characterData:!0}),function(){s.data=r=++r%2}}}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],46:[function(e,t,n){(function(e){n.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},n.install=function(t){return function(){var n=e.document.createElement("script");return n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n),t}}}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],47:[function(e,t,n){n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],48:[function(e,t,n){function f(e){return e===null?String(e):typeof e=="object"||typeof e=="function"?r[u.call(e)]||"object":typeof e}function l(e){return e!==null&&e===e.window}function c(e){if(!e||f(e)!=="object"||e.nodeType||l(e))return!1;try{if(e.constructor&&!a.call(e,"constructor")&&!a.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var n;for(n in e);return n===undefined||a.call(e,n)}function h(e){return f(e)==="function"}function d(){var e=[],t=-1,n=arguments.length,r=new Array(n);while(++t<n)r[t]=arguments[t];var i={};e.push({args:r,result:{container:i,key:"key"}});var s;while(s=e.pop())v(e,s.args,s.result);return i.key}function v(e,t,n){var r,i,s,o,u,a,f=t[0]||{},l=1,d=t.length,v=!1,m=/\d+/,g;typeof f=="boolean"&&(v=f,f=t[1]||{},l=2),typeof f!="object"&&!h(f)&&(f={}),d===l&&(f=this,--l);for(;l<d;l++)if((r=t[l])!=null){g=p(r);for(i in r)if(!(i in Object.prototype)){if(g&&!m.test(i))continue;s=f[i],o=r[i];if(f===o)continue;v&&o&&(c(o)||(u=p(o)))?(u?(u=!1,a=s&&p(s)?s:[]):a=s&&c(s)?s:{},e.push({args:[v,a,o],result:{container:f,key:i}})):o!==undefined&&(!p(r)||!h(o))&&(f[i]=o)}}n.container[n.key]=f}var r={},i=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"];for(var s=0;s<i.length;s++){var o=i[s];r["[object "+o+"]"]=o.toLowerCase()}var u=r.toString,a=r.hasOwnProperty,p=Array.isArray||function(e){return f(e)==="array"};t.exports=d},{}],49:[function(e,t,n){var r=e("./upsert"),i=e("./utils"),s=i.Promise;t.exports=function(e){var t=e.db,n=e.viewName,o=e.map,u=e.reduce,a=e.temporary,f=o.toString()+(u&&u.toString())+"undefined";if(!a&&t._cachedViews){var l=t._cachedViews[f];if(l)return s.resolve(l)}return t.info().then(function(e){function l(e){e.views=e.views||{};var t=n;t.indexOf("/")===-1&&(t=n+"/"+n);var r=e.views[t]=e.views[t]||{};if(r[s])return;return r[s]=!0,e}var s=e.db_name+"-mrview-"+(a?"temp":i.MD5(f));return r(t,"_local/mrviews",l).then(function(){return t.registerDependentDatabase(s).then(function(e){var n=e.db;n.auto_compaction=!0;var r={name:s,db:n,sourceDB:t,adapter:t.adapter,mapFun:o,reduceFun:u};return r.db.get("_local/lastSeq")["catch"](function(e){if(e.status!==404)throw e}).then(function(e){return r.seq=e?e.seq:0,a||(t._cachedViews=t._cachedViews||{},t._cachedViews[f]=r,r.db.on("destroyed",function(){delete t._cachedViews[f]})),r})})})})}},{"./upsert":55,"./utils":56}],50:[function(_dereq_,module,exports){module.exports=function(func,emit,sum,log,isArray,toJSON){return eval(" ("+func.replace(/;\s*$/,"")+");")}},{}],51:[function(e,t,n){(function(t){function m(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function g(e,t,n){try{return{output:t.apply(null,n)}}catch(r){return e.emit("error",r),{error:r}}}function y(e,t){var n=s(e.key,t.key);return n!==0?n:s(e.value,t.value)}function b(e,t,n){return n=n||0,typeof t=="number"?e.slice(n,t+n):n>0?e.slice(n):e}function w(e){var t=new Error("builtin "+e+" function requires map values to be numbers"+" or number arrays");return t.name="invalid_value",t.status=500,t}function E(e){var t=0;for(var n=0,r=e.length;n<r;n++){var i=e[n];if(typeof i!="number"){if(!Array.isArray(i))throw w("_sum");t=typeof t=="number"?[t]:t;for(var s=0,o=i.length;s<o;s++){var u=i[s];if(typeof u!="number")throw w("_sum");typeof t[s]=="undefined"?t.push(u):t[s]+=u}}else typeof t=="number"?t+=i:t[0]+=i}return t}function x(e,t,n,r){var i=t[e];typeof i!="undefined"&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function T(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(typeof e[n]!="undefined"&&typeof e[r]!="undefined"&&s(e[n],e[r])>0)throw new H("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new H("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new H("Multi-key fetches for reduce views must use {group: true}")}if(e.group_level){if(typeof e.group_level!="number")throw new H('Invalid value for integer: "'+e.group_level+'"');if(e.group_level<0)throw new H('Invalid value for positive integer: "'+e.group_level+'"')}}function N(e,t,n){var r=[],i,s="GET";x("reduce",n,r),x("include_docs",n,r),x("limit",n,r),x("descending",n,r),x("group",n,r),x("group_level",n,r),x("skip",n,r),x("stale",n,r),x("startkey",n,r,!0),x("endkey",n,r,!0),x("inclusive_end",n,r),x("key",n,r,!0),r=r.join("&"),r=r===""?"":"?"+r;if(typeof n.keys!="undefined"){var o=2e3,u="keys="+encodeURIComponent(JSON.stringify(n.keys));u.length+r.length+1<=o?r+=(r[0]==="?"?"&":"?")+u:(s="POST",typeof t=="string"?i=JSON.stringify({keys:n.keys}):t.keys=n.keys)}if(typeof t=="string"){var a=m(t);return e.request({method:s,url:"_design/"+a[0]+"/_view/"+a[1]+r,body:i})}return i=i||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?i[e]=t[e]:i[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+r,body:i})}function C(e){return function(t){if(t.status===404)return e;throw t}}function k(e,t,n){var r="_local/doc_"+e;return t.db.get(r)["catch"](C({_id:r,keys:[]})).then(function(r){return h.resolve().then(function(){return r.keys.length?t.db.allDocs({keys:r.keys,include_docs:!0}):{rows:[]}}).then(function(t){var i=t.rows.map(function(e){return e.doc}).filter(function(e){return e}),s=n[e],o={};i.forEach(function(e){o[e._id]=!0,e._deleted=!s[e._id];if(!e._deleted){var t=s[e._id];"value"in t&&(e.value=t.value)}});var u=Object.keys(s);return u.forEach(function(e){if(!o[e]){var t={_id:e},n=s[e];"value"in n&&(t.value=n.value),i.push(t)}}),r.keys=c.uniq(u.concat(r.keys)),i.splice(0,0,r),i})})}function L(e,t,n){var r="_local/lastSeq";return e.db.get(r)["catch"](C({_id:r,seq:0})).then(function(r){var i=Object.keys(t);return h.all(i.map(function(n){return k(n,e,t)})).then(function(t){var i=[];return t.forEach(function(e){i=i.concat(e)}),r.seq=n,i.push(r),e.db.bulkDocs({docs:i})})})}function O(e,t,n){n.group_level===0&&delete n.group_level;var r=n.group||n.group_level,i;S[e.reduceFun]?i=S[e.reduceFun]:i=f(e.reduceFun.toString(),null,E,l,Array.isArray,JSON.parse);var o=[],u=n.group_level;t.forEach(function(e){var t=o[o.length-1],n=r?e.key:null;r&&Array.isArray(n)&&typeof u=="number"&&(n=n.length>u?n.slice(0,u):n);if(t&&s(t.key[0][0],n)===0){t.key.push([n,e.id]),t.value.push(e.value);return}o.push({key:[[n,e.id]],value:[e.value]})});for(var a=0,c=o.length;a<c;a++){var h=o[a],p=g(e.sourceDB,i,[h.key,h.value,!1]);h.value=p.error?null:p.output,h.key=h.key[0][0]}return{rows:b(o,n.limit,n.skip)}}function _(e){return e.request({method:"POST",url:"_view_cleanup"})}function P(e,n,r){if(e.type()==="http")return N(e,n,r);if(typeof n!="string"){T(r,n);var i={db:e,viewName:"temp_view/temp_view",map:n.map,reduce:n.reduce,temporary:!0};return d.add(function(){return a(i).then(function(e){function t(){return e.db.destroy()}return c.fin(A(e).then(function(){return M(e,r)}),t)})}),d.finish()}var s=n,o=m(s),u=o[0],f=o[1];return e.get("_design/"+u).then(function(n){var i=n.views&&n.views[f];if(!i||typeof i.map!="string")throw new B("ddoc "+u+" has no view named "+f);T(r,i);var o={db:e,viewName:s,map:i.map,reduce:i.reduce};return a(o).then(function(e){return r.stale==="ok"||r.stale==="update_after"?(r.stale==="update_after"&&t.nextTick(function(){A(e)}),M(e,r)):A(e).then(function(){return M(e,r)})})})}function H(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,H)}catch(t){}}function B(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,B)}catch(t){}}var r=e("pouchdb-collate"),i=e("./taskqueue"),s=r.collate,o=r.toIndexableString,u=r.normalizeKey,a=e("./create-view"),f=e("./evalfunc"),l;typeof console!="undefined"&&typeof console.log=="function"?l=Function.prototype.bind.call(console.log,console):l=function(){};var c=e("./utils"),h=c.Promise,p=new i,d=new i,v=50,S={_sum:function(e,t){return E(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(e){var t=0;for(var n=0,r=e.length;n<r;n++){var i=e[n];t+=i*i}return t}return{sum:E(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}},A=c.sequentialize(p,function(e){function r(e,r){var i={id:n._id,key:u(e)};typeof r!="undefined"&&r!==null&&(i.value=u(r)),t.push(i)}function p(t,n){return function(){return L(e,t,n)}}var t,n,s;if(typeof e.mapFun=="function"&&e.mapFun.length===2){var a=e.mapFun;s=function(e){return a(e,r)}}else s=f(e.mapFun.toString(),r,E,l,Array.isArray,JSON.parse);var c=e.seq||0,d=new i;return new h(function(r,i){function u(){d.finish().then(function(){e.seq=c,r()})}function a(){function r(e){i(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,since:c,limit:v}).on("complete",function(r){var i=r.results;if(!i.length)return u();var f={};for(var l=0,h=i.length;l<h;l++){var m=i[l];if(m.doc._id[0]!=="_"){t=[],n=m.doc,n._deleted||g(e.sourceDB,s,[n]),t.sort(y);var b={},w;for(var E=0,S=t.length;E<S;E++){var x=t[E],T=[x.key,x.id];x.key===w&&T.push(E);var N=o(T);b[N]=x,w=x.key}f[m.doc._id]=b}c=m.seq}return d.add(p(f,c)),i.length<v?u():a()}).on("error",r)}a()})}),M=c.sequentialize(p,function(e,t){function u(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return n=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&typeof e.doc.value=="object"&&e.doc.value!==null){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}var i=r.parseIndexableString(e.doc._id);return{key:i[0],id:i[1],value:"value"in e.doc?e.doc.value:null}})})}function a(r){var o;i?o=O(e,r,t):o={total_rows:n,offset:s,rows:r};if(t.include_docs){var u=r.map(function(t){var n=t.value,r=n&&typeof n=="object"&&n._id||t.id;return e.sourceDB.get(r).then(function(e){t.doc=e},function(){})});return h.all(u).then(function(){return o})}return o}var n,i=e.reduceFun&&t.reduce!==!1,s=t.skip||0;typeof t.keys!="undefined"&&!t.keys.length&&(t.limit=0,delete t.keys);var f=function(e){return e.reduce(function(e,t){return e.concat(t)})};if(typeof t.keys!="undefined"){var l=t.keys,c=l.map(function(e){var t={startkey:o([e]),endkey:o([e,{}])};return u(t)});return h.all(c).then(f).then(a)}var p={descending:t.descending};typeof t.startkey!="undefined"&&(p.startkey=t.descending?o([t.startkey,{}]):o([t.startkey]));if(typeof t.endkey!="undefined"){var d=t.inclusive_end!==!1;t.descending&&(d=!d),p.endkey=o(d?[t.endkey,{}]:[t.endkey])}if(typeof t.key!="undefined"){var v=o([t.key]),m=o([t.key,{}]);p.descending?(p.endkey=v,p.startkey=m):(p.startkey=v,p.endkey=m)}return i||(typeof t.limit=="number"&&(p.limit=t.limit),p.skip=s),u(p).then(a)}),D=c.sequentialize(p,function(e){return e.get("_local/mrviews").then(function(t){var n={};Object.keys(t.views).forEach(function(e){var t=m(e),r="_design/"+t[0],i=t[1];n[r]=n[r]||{},n[r][i]=!0});var r={keys:Object.keys(n),include_docs:!0};return e.allDocs(r).then(function(r){var i={};r.rows.forEach(function(e){var r=e.key.substring(8);Object.keys(n[e.key]).forEach(function(n){var s=r+"/"+n;t.views[s]||(s=n);var o=Object.keys(t.views[s]),u=e.doc&&e.doc.views&&e.doc.views[n];o.forEach(function(e){i[e]=i[e]||u})})});var s=Object.keys(i).filter(function(e){return!i[e]}),o=s.map(function(t){return e.constructor.destroy(t,{adapter:e.adapter})});return h.all(o).then(function(){return{ok:!0}})})},C({ok:!0}))});n.viewCleanup=c.callbackify(function(){var e=this;return e.type()==="http"?_(e):D(e)}),n.query=function(e,t,n){typeof t=="function"&&(n=t,t={}),t=c.extend(!0,{},t),typeof e=="function"&&(e={map:e});var r=this,i=h.resolve().then(function(){return P(r,e,t)});return c.promisedCallback(i,n),i},c.inherits(H,Error),c.inherits(B,Error)}).call(this,e("/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./create-view":49,"./evalfunc":50,"./taskqueue":54,"./utils":56,"/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":28,"pouchdb-collate":52}],52:[function(e,t,n){function u(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return d(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),i=-1,s=r.length,o="";if(t)while(++i<s)o+=n.toIndexableString(r[i]);else while(++i<s){var u=r[i];o+=n.toIndexableString(u)+n.toIndexableString(e[u])}return o}return""}function a(e,t){var n=t,s,o=e[t]==="1";if(o)s=0,t++;else{var u=e[t]==="0";t++;var a="",f=e.substring(t,t+i),l=parseInt(f,10)+r;u&&(l=-l),t+=i;for(;;){var c=e[t];if(c==="\0")break;a+=c,t++}a=a.split("."),a.length===1?s=parseInt(a,10):s=parseFloat(a[0]+"."+a[1]),u&&(s-=10),l!==0&&(s=parseFloat(s+"e"+l))}return{num:s,length:t-n}}function f(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,s=r.index;if(Array.isArray(i))i.push(n);else if(s===e.length-2){var o=e.pop();i[o]=n}else e.push(n)}}function l(e,t){var r=Math.min(e.length,t.length);for(var i=0;i<r;i++){var s=n.collate(e[i],t[i]);if(s!==0)return s}return e.length===t.length?0:e.length>t.length?1:-1}function c(e,t){return e===t?0:e>t?1:-1}function h(e,t){var r=Object.keys(e),i=Object.keys(t),s=Math.min(r.length,i.length);for(var o=0;o<s;o++){var u=n.collate(r[o],i[o]);if(u!==0)return u;u=n.collate(e[r[o]],t[i[o]]);if(u!==0)return u}return r.length===i.length?0:r.length>i.length?1:-1}function p(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function d(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),u=e<0,a=u?"0":"2",f=(u?-n:n)-r,l=o.padLeft(f.toString(),"0",i);a+=s+l;var c=Math.abs(parseFloat(t[0]));u&&(c=10-c);var h=c.toFixed(20);return h=h.replace(/\.?0+$/,""),a+=s+h,a}var r=-324,i=3,s="",o=e("./utils");n.collate=function(e,t){if(e===t)return 0;e=n.normalizeKey(e),t=n.normalizeKey(t);var r=p(e),i=p(t);if(r-i!==0)return r-i;if(e===null)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:e<t?-1:1;case"string":return c(e,t)}return Array.isArray(e)?l(e,t):h(e,t)},n.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":if(e===Infinity||e===-Infinity||isNaN(e))return null;return e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var i=0;i<r;i++)e[i]=n.normalizeKey(t[i])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var s in t)if(t.hasOwnProperty(s)){var o=t[s];typeof o!="undefined"&&(e[s]=n.normalizeKey(o))}}}}return e},n.toIndexableString=function(e){var t="\0";return e=n.normalizeKey(e),p(e)+s+u(e)+t},n.parseIndexableString=function(e){var t=[],n=[],r=0;for(;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();f(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var s=a(e,r);t.push(s.num),r+=s.length;break;case"4":var o="";for(;;){var u=e[r];if(u==="\0")break;o+=u,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(o);break;case"5":var l={element:[],index:t.length};t.push(l.element),n.push(l);break;case"6":var c={element:{},index:t.length};t.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}},{"./utils":53}],53:[function(e,t,n){function r(e,t,n){var r="",i=n-e.length;while(r.length<i)r+=t;return r}n.padLeft=function(e,t,n){var i=r(e,t,n);return i+e},n.padRight=function(e,t,n){var i=r(e,t,n);return e+i},n.stringLexCompare=function(e,t){var n=e.length,r=t.length,i;for(i=0;i<n;i++){if(i===r)return 1;var s=e.charAt(i),o=t.charAt(i);if(s!==o)return s<o?-1:1}return n<r?-1:0},n.intToDecimalForm=function(e){var t=e<0,n="";do{var r=t?-Math.ceil(e%10):Math.floor(e%10);n=r+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&n!=="0"&&(n="-"+n),n}},{}],54:[function(e,t,n){function i(){this.promise=new r(function(e){e()})}var r=e("./utils").Promise;i.prototype.add=function(e){return this.promise=this.promise["catch"](function(){}).then(function(){return e()}),this.promise},i.prototype.finish=function(){return this.promise},t.exports=i},{"./utils":56}],55:[function(e,t,n){function i(e,t,n){return new r(function(r,i){t&&typeof t=="object"&&(t=t._id);if(typeof t!="string")return i(new Error("doc id is required"));e.get(t,function(o,u){if(o)return o.status!==404?i(o):r(s(e,n({_id:t}),n));var a=n(u);if(!a)return r(u);r(s(e,a,n))})})}function s(e,t,n){return e.put(t)["catch"](function(r){if(r.status!==409)throw r;return i(e,t,n)})}var r=e("./utils").Promise;t.exports=i},{"./utils":56}],56:[function(e,t,n){(function(t,r){typeof r.Promise=="function"?n.Promise=r.Promise:n.Promise=e("lie"),n.uniq=function(e){var t={};return e.forEach(function(e){t[e]=!0}),Object.keys(t)},n.inherits=e("inherits"),n.extend=e("pouchdb-extend");var i=e("argsarray");n.promisedCallback=function(e,n){return n&&e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e},n.callbackify=function(e){return i(function(t){var r=t.pop(),i=e.apply(this,t);return typeof r=="function"&&n.promisedCallback(i,r),i})},n.fin=function(e,t){return e.then(function(e){var n=t();return typeof n.then=="function"?n.then(function(){return e}):e},function(e){var n=t();if(typeof n.then=="function")return n.then(function(){throw e});throw e})},n.sequentialize=function(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}};var s=e("crypto"),o=e("spark-md5");n.MD5=function(e){return t.browser?o.hash(e):s.createHash("md5").update(e).digest("hex")}}).call(this,e("/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"/Users/nolan/workspace/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":28,argsarray:25,crypto:26,inherits:29,lie:33,"pouchdb-extend":48,"spark-md5":57}],57:[function(e,t,n){(function(e){if(typeof n=="object")t.exports=e();else if(typeof define=="function"&&define.amd)define(e);else{var r;try{r=window}catch(i){r=self}r.SparkMD5=e()}})(function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,s,o){return n=t(t(n,e),t(i,o)),t(n<<s|n>>>32-s,r)},r=function(e,t,r,i,s,o,u){return n(t&r|~t&i,e,t,s,o,u)},i=function(e,t,r,i,s,o,u){return n(t&i|r&~i,e,t,s,o,u)},s=function(e,t,r,i,s,o,u){return n(t^r^i,e,t,s,o,u)},o=function(e,t,r,i,s,o,u){return n(r^(t|~i),e,t,s,o,u)},u=function(e,n){var u=e[0],a=e[1],f=e[2],l=e[3];u=r(u,a,f,l,n[0],7,-680876936),l=r(l,u,a,f,n[1],12,-389564586),f=r(f,l,u,a,n[2],17,606105819),a=r(a,f,l,u,n[3],22,-1044525330),u=r(u,a,f,l,n[4],7,-176418897),l=r(l,u,a,f,n[5],12,1200080426),f=r(f,l,u,a,n[6],17,-1473231341),a=r(a,f,l,u,n[7],22,-45705983),u=r(u,a,f,l,n[8],7,1770035416),l=r(l,u,a,f,n[9],12,-1958414417),f=r(f,l,u,a,n[10],17,-42063),a=r(a,f,l,u,n[11],22,-1990404162),u=r(u,a,f,l,n[12],7,1804603682),l=r(l,u,a,f,n[13],12,-40341101),f=r(f,l,u,a,n[14],17,-1502002290),a=r(a,f,l,u,n[15],22,1236535329),u=i(u,a,f,l,n[1],5,-165796510),l=i(l,u,a,f,n[6],9,-1069501632),f=i(f,l,u,a,n[11],14,643717713),a=i(a,f,l,u,n[0],20,-373897302),u=i(u,a,f,l,n[5],5,-701558691),l=i(l,u,a,f,n[10],9,38016083),f=i(f,l,u,a,n[15],14,-660478335),a=i(a,f,l,u,n[4],20,-405537848),u=i(u,a,f,l,n[9],5,568446438),l=i(l,u,a,f,n[14],9,-1019803690),f=i(f,l,u,a,n[3],14,-187363961),a=i(a,f,l,u,n[8],20,1163531501),u=i(u,a,f,l,n[13],5,-1444681467),l=i(l,u,a,f,n[2],9,-51403784),f=i(f,l,u,a,n[7],14,1735328473),a=i(a,f,l,u,n[12],20,-1926607734),u=s(u,a,f,l,n[5],4,-378558),l=s(l,u,a,f,n[8],11,-2022574463),f=s(f,l,u,a,n[11],16,1839030562),a=s(a,f,l,u,n[14],23,-35309556),u=s(u,a,f,l,n[1],4,-1530992060),l=s(l,u,a,f,n[4],11,1272893353),f=s(f,l,u,a,n[7],16,-155497632),a=s(a,f,l,u,n[10],23,-1094730640),u=s(u,a,f,l,n[13],4,681279174),l=s(l,u,a,f,n[0],11,-358537222),f=s(f,l,u,a,n[3],16,-722521979),a=s(a,f,l,u,n[6],23,76029189),u=s(u,a,f,l,n[9],4,-640364487),l=s(l,u,a,f,n[12],11,-421815835),f=s(f,l,u,a,n[15],16,530742520),a=s(a,f,l,u,n[2],23,-995338651),u=o(u,a,f,l,n[0],6,-198630844),l=o(l,u,a,f,n[7],10,1126891415),f=o(f,l,u,a,n[14],15,-1416354905),a=o(a,f,l,u,n[5],21,-57434055),u=o(u,a,f,l,n[12],6,1700485571),l=o(l,u,a,f,n[3],10,-1894986606),f=o(f,l,u,a,n[10],15,-1051523),a=o(a,f,l,u,n[1],21,-2054922799),u=o(u,a,f,l,n[8],6,1873313359),l=o(l,u,a,f,n[15],10,-30611744),f=o(f,l,u,a,n[6],15,-1560198380),a=o(a,f,l,u,n[13],21,1309151649),u=o(u,a,f,l,n[4],6,-145523070),l=o(l,u,a,f,n[11],10,-1120210379),f=o(f,l,u,a,n[2],15,718787259),a=o(a,f,l,u,n[9],21,-343485551),e[0]=t(u,e[0]),e[1]=t(a,e[1]),e[2]=t(f,e[2]),e[3]=t(l,e[3])},a=function(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t},f=function(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e[n]+(e[n+1]<<8)+(e[n+2]<<16)+(e[n+3]<<24);return t},l=function(e){var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r,i,s,o,f,l;for(r=64;r<=t;r+=64)u(n,a(e.substring(r-64,r)));e=e.substring(r-64),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i;r+=1)s[r>>2]|=e.charCodeAt(r)<<(r%4<<3);s[r>>2]|=128<<(r%4<<3);if(r>55){u(n,s);for(r=0;r<16;r+=1)s[r]=0}return o=t*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(o[2],16),l=parseInt(o[1],16)||0,s[14]=f,s[15]=l,u(n,s),n},c=function(e){var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r,i,s,o,a,l;for(r=64;r<=t;r+=64)u(n,f(e.subarray(r-64,r)));e=r-64<t?e.subarray(r-64):new Uint8Array(0),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i;r+=1)s[r>>2]|=e[r]<<(r%4<<3);s[r>>2]|=128<<(r%4<<3);if(r>55){u(n,s);for(r=0;r<16;r+=1)s[r]=0}return o=t*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),l=parseInt(o[1],16)||0,s[14]=a,s[15]=l,u(n,s),n},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(e){var t="",n;for(n=0;n<4;n+=1)t+=h[e>>n*8+4&15]+h[e>>n*8&15];return t},d=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")},v=function(e){return d(l(e))},m=function(){this.reset()};return v("hello")!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t=this._buff.length,n;for(n=64;n<=t;n+=64)u(this._state,a(this._buff.substring(n-64,n)));return this._buff=this._buff.substr(n-64),this},m.prototype.end=function(e){var t=this._buff,n=t.length,r,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s;for(r=0;r<n;r+=1)i[r>>2]|=t.charCodeAt(r)<<(r%4<<3);return this._finish(i,n),s=e?this._state:d(this._state),this.reset(),s},m.prototype._finish=function(e,t){var n=t,r,i,s;e[n>>2]|=128<<(n%4<<3);if(n>55){u(this._state,e);for(n=0;n<16;n+=1)e[n]=0}r=this._length*8,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),s=parseInt(r[1],16)||0,e[14]=i,e[15]=s,u(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:d(n)},m.hashBinary=function(e,t){var n=l(e);return t?n:d(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t=this._concatArrayBuffer(this._buff,e),n=t.length,r;this._length+=e.byteLength;for(r=64;r<=n;r+=64)u(this._state,f(t.subarray(r-64,r)));return this._buff=r-64<n?t.subarray(r-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t=this._buff,n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,s;for(i=0;i<n;i+=1)r[i>>2]|=t[i]<<(i%4<<3);return this._finish(r,n),s=e?this._state:d(this._state),this.reset(),s},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=c(new Uint8Array(e));return t?n:d(n)},m})},{}],58:[function(e,t,n){function r(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,s=r.index;if(Array.isArray(i))i.push(e);else if(s===t.length-2){var o=t.pop();i[o]=e}else t.push(e)}n.stringify=function(t){var n=[];n.push({obj:t});var r="",i,s,o,u,a,f,l,c,h,p,d;while(i=n.pop()){s=i.obj,o=i.prefix||"",u=i.val||"",r+=o;if(u)r+=u;else if(typeof s!="object")r+=typeof s=="undefined"?null:JSON.stringify(s);else if(s===null)r+="null";else if(Array.isArray(s)){n.push({val:"]"});for(a=s.length-1;a>=0;a--)f=a===0?"":",",n.push({obj:s[a],prefix:f});n.push({val:"["})}else{l=[];for(c in s)s.hasOwnProperty(c)&&l.push(c);n.push({val:"}"});for(a=l.length-1;a>=0;a--)h=l[a],p=s[h],d=a>0?",":"",d+=JSON.stringify(h)+":",n.push({obj:p,prefix:d});n.push({val:"{"})}}return r},n.parse=function(e){var t=[],n=[],i=0,s,o,u,a,f,l,c,h,p;for(;;){s=e[i++];if(s==="}"||s==="]"||typeof s=="undefined"){if(t.length===1)return t.pop();r(t.pop(),t,n);continue}switch(s){case" ":case"	":case"\n":case":":case",":break;case"n":i+=3,r(null,t,n);break;case"t":i+=3,r(!0,t,n);break;case"f":i+=4,r(!1,t,n);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":o="",i--;for(;;){u=e[i++];if(!/[\d\.\-e\+]/.test(u)){i--;break}o+=u}r(parseFloat(o),t,n);break;case'"':a="",f=void 0,l=0;for(;;){c=e[i++];if(c==='"'&&(f!=="\\"||l%2!==1))break;a+=c,f=c,f==="\\"?l++:l=0}r(JSON.parse('"'+a+'"'),t,n);break;case"[":h={element:[],index:t.length},t.push(h.element),n.push(h);break;case"{":p={element:{},index:t.length},t.push(p.element),n.push(p);break;default:throw new Error("unexpectedly reached end of input: "+s)}}}},{}]},{},[17])(17)}),function(e){var t=e.module("blockUI",[]);t.config(["$provide","$httpProvider",function(e,t){e.decorator("$exceptionHandler",["$delegate","$injector",function(e,t){var n,r;return function(i,s){r=r||t.get("blockUIConfig");if(r.resetOnException)try{n=n||t.get("blockUI"),n.instances.reset()}catch(o){console.log("$exceptionHandler",i)}e(i,s)}}]),t.interceptors.push("blockUIHttpInterceptor")}]),t.run(["$document","blockUIConfig","$templateCache",function(e,t,n){t.autoInjectBodyBlock&&e.find("body").attr("block-ui","main"),t.template&&(t.templateUrl="$$block-ui-template$$",n.put(t.templateUrl,t.template))}]),t.directive("blockUiContainer",["blockUIConfig","blockUiContainerLinkFn",function(e,t){return{scope:!0,restrict:"A",templateUrl:e.templateUrl,compile:function(e){return t}}}]).factory("blockUiContainerLinkFn",["blockUI","blockUIUtils",function(e,t){return function(e,t,n){var r=t.inheritedData("block-ui");if(!r)throw new Error("No parent block-ui service instance located.");e.state=r.state()}}]),t.directive("blockUi",["blockUiCompileFn",function(e){return{scope:!0,restrict:"A",compile:e}}]).factory("blockUiCompileFn",["blockUiPreLinkFn",function(e){return function(t,n){return t.append('<div block-ui-container class="block-ui-container"></div>'),{pre:e}}}]).factory("blockUiPreLinkFn",["blockUI","blockUIUtils","blockUIConfig",function(e,t,n){return function(r,i,s){i.hasClass("block-ui")||i.addClass(n.cssClass),s.$observe("blockUiMessageClass",function(e){r.$_blockUiMessageClass=e});var o=s.blockUi||"_"+r.$id,u=e.instances.get(o);if(o==="main")var a=r.$on("$viewContentLoaded",function(e){a(),r.$on("$locationChangeStart",function(e){u.state().blockCount>0&&e.preventDefault()})});else{var f=i.inheritedData("block-ui");f&&(u._parent=f)}r.$on("$destroy",function(){u.release()}),u.addRef(),r.$_blockUiState=u.state(),r.$watch("$_blockUiState.blocking",function(e){i.attr("aria-busy",!!e),i.toggleClass("block-ui-visible",!!e)}),r.$watch("$_blockUiState.blockCount > 0",function(e){i.toggleClass("block-ui-active",!!e)});var l=s.blockUiPattern;if(l){var c=t.buildRegExp(l);u.pattern(c)}i.data("block-ui",u)}}]),t.constant("blockUIConfig",{templateUrl:"angular-block-ui/angular-block-ui.ng.html",delay:250,message:"Loading ...",autoBlock:!0,resetOnException:!0,requestFilter:e.noop,autoInjectBodyBlock:!0,cssClass:"block-ui block-ui-anim-fade"}),t.factory("blockUIHttpInterceptor",["$q","$injector","blockUIConfig","$templateCache",function(e,t,n,r){function s(){i=i||t.get("blockUI")}function o(e){n.autoBlock&&e&&!e.$_noBlock&&e.$_blocks&&(s(),e.$_blocks.stop())}function u(t){try{o(t.config)}catch(n){console.log("httpRequestError",n)}return e.reject(t)}var i;return{request:function(e){if(n.autoBlock&&(e.method!="GET"||!r.get(e.url))){var t=n.requestFilter(e);t===!1?e.$_noBlock=!0:(s(),e.$_blocks=i.instances.locate(e),e.$_blocks.start(t))}return e},requestError:u,response:function(e){return o(e.config),e},responseError:u}}]),t.factory("blockUI",["blockUIConfig","$timeout","blockUIUtils","$document",function(t,n,r,i){function o(o){var u=this,f={id:o,blockCount:0,message:t.message,blocking:!1},l,c=[];this._id=o,this._refs=0,this.start=function(s){f.blockCount>0?s=s||f.message||t.message:s=s||t.message,f.message=s,f.blockCount++;var o=e.element(i[0].activeElement);o.length&&r.isElementInBlockScope(o,u)&&(u._restoreFocus=o[0],n(function(){u._restoreFocus&&u._restoreFocus.blur()})),l||(l=n(function(){l=null,f.blocking=!0},t.delay))},this._cancelStartTimeout=function(){l&&(n.cancel(l),l=null)},this.stop=function(){f.blockCount=Math.max(0,--f.blockCount),f.blockCount===0&&u.reset(!0)},this.message=function(e){f.message=e},this.pattern=function(e){return e!==undefined&&(u._pattern=e),u._pattern},this.reset=function(t){u._cancelStartTimeout(),f.blockCount=0,f.blocking=!1,u._restoreFocus&&(!i[0].activeElement||i[0].activeElement===s[0])&&(u._restoreFocus.focus(),u._restoreFocus=null);try{t&&e.forEach(c,function(e){e()})}finally{c.length=0}},this.done=function(e){c.push(e)},this.state=function(){return f},this.addRef=function(){u._refs+=1},this.release=function(){--u._refs<=0&&a.instances._destroy(u)}}var s=i.find("body"),u=[];u.get=function(e){if(!isNaN(e))throw new Error("BlockUI id cannot be a number");var t=u[e];return t||(t=u[e]=new o(e),u.push(t)),t},u._destroy=function(t){e.isString(t)&&(t=u[t]);if(t){t.reset();var n=r.indexOf(u,t);u.splice(n,1),delete u[t.state().id]}},u.locate=function(e){var t=[];r.forEachFnHook(t,"start"),r.forEachFnHook(t,"stop");var n=u.length;while(n--){var i=u[n],s=i._pattern;s&&s.test(e.url)&&t.push(i)}return t.length===0&&t.push(a),t},r.forEachFnHook(u,"reset");var a=u.get("main");return a.addRef(),a.instances=u,a}]),t.factory("blockUIUtils",function(){var t=e.element,n={buildRegExp:function(e){var t=e.match(/^\/(.*)\/([gim]*)$/),n;if(!t)throw Error("Incorrect regular expression format: "+e);return n=new RegExp(t[1],t[2]),n},forEachFn:function(e,t,n){var r=e.length;while(r--){var i=e[r];i[t].apply(i,n)}},forEachFnHook:function(e,t){e[t]=function(){n.forEachFn(this,t,arguments)}},isElementInBlockScope:function(e,t){var n=e.inheritedData("block-ui");while(n){if(n===t)return!0;n=n._parent}return!1},findElement:function(e,r,i){var s=null;if(r(e))s=e;else{var o;i?o=e.parent():o=e.children();var u=o.length;while(!s&&u--)s=n.findElement(t(o[u]),r,i)}return s},indexOf:function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}};return n}),e.module("blockUI").run(["$templateCache",function(e){e.put("angular-block-ui/angular-block-ui.ng.html",'<div class="block-ui-overlay"></div><div class="block-ui-message-container" aria-live="assertive" aria-atomic="true"><div class="block-ui-message" ng-class="$_blockUiMessageClass">{{ state.message }}</div></div>')}])}(angular),define("blockUI",["angular"],function(){}),define("service/db",["angular","pouchdb_raw","blockUI"],function(e,t){var n=e.module("service/db",["blockUI"]);n.factory("service/db/get",["$rootScope",function(e){return function(){var n=e.GLOBAL_SETTING.store_db_prefix+e.GLOBAL_SETTING.store_id;return new t(n)}}]),n.factory("service/db/is_pouch_exist",["$q","$rootScope",function(e,t){return function(){var n=e.defer(),r="_pouch_"+t.GLOBAL_SETTING.store_db_prefix+t.GLOBAL_SETTING.store_id,i=indexedDB.open(r);return i.onupgradeneeded=function(e){e.target.transaction.abort()},i.onsuccess=function(e){n.resolve(!0)},i.onerror=function(e){e.target.error.name=="AbortError"?(indexedDB.deleteDatabase(r),n.resolve(!1)):n.reject("error when checking db existance")},n.promise}}]),n.factory("service/db/remove_doc",["$q","service/db/get",function(e,t){return function(n){var r=e.defer(),i=t();return i.get(n).then(function(e){i.remove(e).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise}}]),n.factory("service/db/download_product",["$q","service/db/_force_download_product","service/db/is_pouch_exist",function(e,t,n){return function(r){var i=e.defer();return r?t().then(function(e){i.resolve(e)},function(e){i.reject(e)}):n().then(function(e){e?t().then(function(e){i.resolve(e)},function(e){i.reject(e)}):i.resolve(null)},function(e){return i.reject(e)}),i.promise}}]),n.factory("service/db/_get_local_and_remote_doc_count",["$rootScope","$q",function(e,n){return function(){var r=n.defer(),i=e.GLOBAL_SETTING.store_id,s=e.GLOBAL_SETTING.store_db_prefix+i,o=new t(s),u=e.GLOBAL_SETTING.couch_server_url+"/"+s,a=new t(u),f=[];return f.push(o.info()),f.push(a.info()),n.all(f).then(function(e){r.resolve({local:e[0].doc_count,remote:e[1].doc_count})},function(e){r.reject(e)}),r.promise}}]),n.factory("service/db/_force_download_product",["$q","$rootScope","blockUI","service/db/_get_local_and_remote_doc_count",function(e,n,r,i){return function(){var s=e.defer(),o=n.GLOBAL_SETTING.store_id,u=n.GLOBAL_SETTING.store_db_prefix+o,a=new t(u),f=n.GLOBAL_SETTING.couch_server_url+"/"+u;return r.start("syncing database ..."),console.log("begin syncing for store_id: "+o),t.replicate(f,a,{batch_size:200,batches_limit:10}).on("change",function(e){n.$apply(function(){var t=e.docs_written+" products synced";r.message(t)})}).on("complete",function(e){i().then(function(t){t.docs_written=e.docs_written,s.resolve(t),r.stop()},function(e){n.$apply(function(){s.reject(e),r.stop()})})}).on("error",function(e){n.$apply(function(){var t="there is sync error: "+e;s.reject(t),r.stop()})}),s.promise}}])}),define("app/sp_app/service/edit/kit",["angular","app/sp_ll_app/service/search/name_sku_online_dlg","app/sp_app/service/api/kit","service/ui","service/db"],function(e){var t=e.module("sp_app/service/edit/kit",["sp_ll_app/service/search/name_sku_online_dlg","sp_app/service/api/kit","service/ui","service/db"]);t.factory("sp_app/service/edit/kit",["$modal","sp_app/service/edit/kit/prompt","sp_app/service/api/kit","service/ui/alert","service/db/download_product",function(t,n,r,i,s){var o='<div class="modal-header"><h3 class="modal-title">Kit info: {{sp.name}}</h3></div><div class="modal-body"><button id="sp_app/service/edit/kit/add_btn" ng-click="add()" class="btn btn-primary" type="button"><span class="glyphicon glyphicon-plus"></span></button></br><table ng-hide="sp.breakdown_assoc_lst.length==0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>kit</th><th>qty</th><th>edit</th><th>remove</th></tr><tr ng-repeat="assoc in sp.breakdown_assoc_lst | orderBy:\'breakdown.name\'"><td>{{assoc.breakdown.name}}</td><td>{{assoc.qty}}</td><td class="alncenter"><button ng-click="edit(assoc)" class="btn btn-primary glyphicon glyphicon-pencil" type="button"></button></td><td class="alncenter"><button ng-click="remove(assoc)" class="btn btn-danger glyphicon glyphicon-trash" type="button"></button></td></tr></table><div ng-show="sp.breakdown_assoc_lst.length==0"></br><pre>No kit!</pre></div></div><div class="modal-footer"><button id="sp_app/service/edit/kit/cancel_btn" class="btn btn-warning" ng-click="cancel()" type="button">cancel</button><button ng-disabled="is_unchange()" class="btn btn-primary" ng-click="reset()" type="button">reset</button><button id="sp_app/service/edit/kit/ok_btn" ng-disabled="is_unchange()||form.$invalid" class="btn btn-success" ng-click="ok()" type="button">ok</button></div>',u=function(t,o,u){t.original_sp=u,t.sp=e.copy(u),t.is_unchange=function(){return e.equals(t.original_sp,t.sp)},t.reset=function(){t.sp=e.copy(t.original_sp)},t.edit=function(e){var t=n(e);t.then(function(e){},function(e){})},t.remove=function(e){for(var n=0;n<t.sp.breakdown_assoc_lst.length;n++)if(e.id===t.sp.breakdown_assoc_lst[n].id){t.sp.breakdown_assoc_lst.splice(n,1);break}},t.cancel=function(){o.dismiss("_cancel_")},t.add=function(){n(null).then(function(e){t.sp.is_breakdown_can_be_add(e.breakdown)?t.sp.breakdown_assoc_lst.push(e):i(e.breakdown.name+" can not be added to "+t.sp.name)})},t.ok=function(){r.update(t.sp).then(function(e){s(!1).then(function(){o.close(e)},function(e){i(e)})},function(e){i(e)})}};return u.$inject=["$scope","$modalInstance","original_sp"],function(e){var n=t.open({template:o,controller:u,backdrop:"static",size:"lg",resolve:{original_sp:function(){return e}}});return n.result}}]),t.factory("sp_app/service/edit/kit/prompt",["$modal","sp_ll_app/service/search/name_sku_online_dlg/single",function(t,n){var r='<div class="modal-header"><h3 class="modal-title">{{original_assoc.id == null ? \'create new kit\' : \'edit kit: \' + original_assoc.breakdown.name}}</h3></div><form name="form" class="modal-body" novalidate><div class="form-horizontal" ><div class="form-group"><label class="col-sm-4 control-label" >Name:</label><div class="col-sm-8"><input name="name" ng-model="assoc.breakdown.name" type="text" required disabled><button id="sp_app/service/edit/kit/prompt/sp_btn" ng-click="search()" class="btn btn-primary glyphicon glyphicon-search" type="button"></button><label class="error" ng-show="form.name.$invalid">required.</label></div></div><div class="form-group"><label class="col-sm-4 control-label">Qty:</label><div class="col-sm-8"><input id="sp_app/service/edit/kit/prompt/qty_txt" name="qty" ng-model="assoc.qty" type="number" min="1" ng-pattern="integer_validation" required /><label class="error" ng-show="form.qty.$invalid"><span ng-show="form.qty.$error.required">required</span><span ng-show="form.qty.$error.pattern || form.qty.$error.min">invalid number</span></label></div></div></div></form><div class="modal-footer"><button class="btn btn-warning" ng-click="cancel()" type="button">cancel</button><button ng-disabled="is_unchange()" class="btn btn-primary" ng-click="reset()" type="button">reset</button><button id="sp_app/service/edit/kit/prompt/ok_btn" ng-disabled="is_unchange()||form.$invalid" class="btn btn-success" ng-click="ok()" type="button">ok</button></div>',i=function(t,r,i){t.original_assoc=i==null?{}:i,t.assoc=e.copy(t.original_assoc),t.integer_validation=/^\d*$/,t.search=function(){var e=n();e.then(function(e){t.assoc.breakdown=e},function(e){})},t.is_unchange=function(){return e.equals(t.original_assoc,t.assoc)},t.reset=function(){t.assoc=e.copy(t.original_assoc)},t.cancel=function(){r.dismiss("cancel")},t.ok=function(){e.copy(t.assoc,t.original_assoc),r.close(t.original_assoc)}};return i.$inject=["$scope","$modalInstance","original_assoc"],function(e){var n=t.open({template:r,controller:i,backdrop:"static",size:"lg",resolve:{original_assoc:function(){return e}}});return n.result}}])}),define("app/sp_app/service/api/sku",["angular","app/sp_app/model"],function(e){var t=e.module("sp_app/service/api/sku",["sp_app/model"]);t.factory("sp_app/service/api/sku",["$http","$q","sp_app/model/Store_product",function(e,t,n){return{add_sku:function(r,i){var s=t.defer();return e({url:"/product/sku_add_angular",method:"POST",data:{product_id:r,sku_str:i}}).then(function(e){s.resolve(n.build(e.data))},function(e){s.reject(e)}),s.promise},delete_sku:function(r,i){var s=t.defer();return e({url:"/product/sku_assoc_delete_angular",method:"POST",data:{product_id:r,sku_str:i}}).then(function(e){s.resolve(n.build(e.data))},function(e){s.reject(e)}),s.promise}}}])}),define("app/sp_app/service/edit/sku",["angular","service/ui","app/sp_app/service/api/sku","service/db"],function(e){var t=e.module("sp_app/service/edit/sku",["service/ui","sp_app/service/api/sku","service/db"]);t.factory("sp_app/service/edit/sku",["$modal","$http","$filter","service/ui/confirm","service/ui/alert","service/ui/prompt","sp_app/service/api/sku","service/db/download_product",function(t,n,r,i,s,o,u,a){var f='<div id="sp_app/service/edit/sku/dialog" class="modal-header"><div><h3>sku info: {{sp.name}}</h3></div></div><div class="modal-body"><button id="sp_app/service/edit/sku/add_btn" ng-click="add_sku()"class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></button><table ng-show="sp.get_my_sku_assoc_lst().length != 0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>sku</th><th>remove</th></tr><tr ng-repeat="sku_assoc in sp.get_my_sku_assoc_lst() | orderBy:\'sku_str\'"><td>{{sku_assoc.sku_str}}</td><td class="alncenter"><button ng-click="remove(sku_assoc)" class="btn btn-danger glyphicon glyphicon-trash"></button></td></tr></table><pre ng-show="sp.get_my_sku_assoc_lst().length == 0">there is no sku</pre></div><div class="modal-footer"><button id="sp_app/service/edit/sku/exit_btn" class="btn btn-warning" ng-click="exit()">exit</button></div>',l=function(t,n,r,f,l){t.sp=l,t.add_sku=function(){var n=o("add new sku",null,!1,!1);n.then(function(n){u.add_sku(t.sp.product_id,n).then(function(n){a(!1).then(function(){e.copy(n,t.sp)},function(e){s(e)})},function(e){s(e)})},function(e){s(e)})},t.remove=function(n){i("deleting sku "+n.sku_str+" ?","red").then(function(){u.delete_sku(t.sp.product_id,n.sku_str).then(function(n){a(!1).then(function(){e.copy(n,t.sp)},function(e){s(e)})},function(e){s(e)})},function(){})},t.exit=function(){n.close()}};return l.$inject=["$scope","$modalInstance","$filter","$q","sp"],function(e){var n=t.open({template:f,controller:l,size:"md",resolve:{sp:function(){return e}}});return n.result}}])}),define("app/sp_app/service/prompt",["angular","app/sp_ll_app/service/search/name_sku_online_dlg","service/ui"],function(e){var t=e.module("sp_app/service/prompt",["sp_ll_app/service/search/name_sku_online_dlg","service/ui"]);t.factory("sp_app/service/prompt",["$modal","$http","$q","sp_ll_app/service/search/name_sku_online_dlg/single","service/ui/alert",function(t,n,r,i,s){function D(e){var t=[];for(item in e){var n={type:item,tag_lst:e[item]};t.push(n)}return t}var o='<button id="sp_app/service/prompt/suggest_name_main_btn" ng-click="$parent.sp.name=get_suggest(\'name\')" type="button" class="btn btn-primary">{{get_suggest(\'name\')}}</button>',u='<button  id="sp_app/service/prompt/suggest_name_extra_btn" ng-disabled="!is_many_suggestion(\'name\')" type="button" class="btn btn-primary dropdown-toggle"><span class="caret"></span></button type="button"><ul class="dropdown-menu" role="menu"><li ng-repeat="sp in suggest_product.sp_lst | orderBy:\'name\'"><a ng-click="$parent.sp.name=sp.name" href="#">{{sp.name}}</a></li></ul>',a='<div id="sp_app/service/prompt/suggest_name" ng-hide="is_no_suggestion(\'name\')" class="btn-group" dropdown>'+o+u+"</div>",f='<div class="form-group"><label class="col-sm-4 control-label" >Name:</label><div class="col-sm-8"><input id="sp_app/service/prompt/name_txt" name="product_name" ng-model="$parent.sp.name" type="text" required>'+a+'<label class="error" ng-show="form.product_name.$error.required">require</label>'+"</div>"+"</div>",l='<button id="sp_app/service/prompt/suggest_price_main_btn" ng-click="$parent.sp.price=get_suggest(\'price\')" type="button" class="btn btn-primary">{{get_suggest(\'price\')|currency}}</button>',c='<button id="sp_app/service/prompt/suggest_price_extra_btn" ng-disabled="!is_many_suggestion(\'price\')" type="button" class="btn btn-primary dropdown-toggle"><span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-repeat="sp in suggest_product.sp_lst | orderBy:\'price\'"><a ng-click="$parent.sp.price=sp.price" href="#">{{sp.price|currency}}</a></li></ul>',h='<div id="sp_app/service/prompt/suggest_price" ng-hide="is_no_suggestion(\'price\')" class="btn-group" dropdown>'+l+c+"</div>",p='<div class="form-group"><label class="col-sm-4 control-label">Price:</label><div class="col-sm-8"><input id="sp_app/service/prompt/price_txt" name="price" ng-model="$parent.sp.price" type="number" required>'+h+'<label class="error" ng-show="form.price.$invalid">require</label>'+"</div>"+"</div>",d='<button id="sp_app/service/prompt/suggest_crv_main_btn" ng-click="$parent.sp.crv=get_suggest(\'crv\')" type="button" class="btn btn-primary">{{get_suggest(\'crv\')|currency}}</button>',v='<button id="sp_app/service/prompt/suggest_crv_extra_btn" ng-disabled="!is_many_suggestion(\'crv\')" type="button" class="btn btn-primary dropdown-toggle"><span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-repeat="sp in suggest_product.sp_lst | orderBy:\'get_crv()\'"><a ng-click="$parent.sp.crv=sp.crv" href="#">{{sp.crv|currency}}</a></li></ul>',m='<div id="sp_app/service/prompt/suggest_crv" ng-hide="is_no_suggestion(\'crv\')" class="btn-group" dropdown>'+d+v+"</div>",g='<div class="form-group"><label class="col-sm-4 control-label">Crv:</label><div class="col-sm-8"><input id="sp_app/service/prompt/crv_txt" name="crv" ng-model="$parent.sp.crv" ng-disabled="{{sp.is_kit()}}" type="number">'+m+'<label class="error" ng-show="form.crv.$invalid">'+"invalid input"+"</label>"+"</div>"+"</div>",y='<button id="sp_app/service/prompt/suggest_taxable_main_btn" ng-click="$parent.sp.is_taxable=get_suggest(\'is_taxable\')" type="button" class="btn btn-primary">{{get_suggest(\'is_taxable\')}}</button>',b='<button id="sp_app/service/prompt/suggest_taxable_extra_btn" ng-disabled="!is_tax_suggest_has_both_false_and_true()" type="button" class="btn btn-primary dropdown-toggle"><span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-repeat="stat in tax_suggest_statistic"><a ng-click="$parent.sp.is_taxable=stat.is_taxable" href="#">{{stat.is_taxable + " - " + stat.value + "%"}}</a></li></ul>',w='<div id="sp_app/service/prompt/suggest_taxable" ng-hide="is_no_suggestion(\'crv\')" class="btn-group" dropdown>'+y+b+"</div>",E='<div class="form-group"><label class="col-sm-4 control-label">Taxable:</label><div class="col-sm-8"><input id="sp_app/service/prompt/is_taxable_check" ng-model="$parent.sp.is_taxable" type="checkbox">'+w+"</div>"+"</div>",S='<button id="sp_app/service/prompt/suggest_cost_main_btn" ng-click="$parent.sp.cost=get_suggest(\'cost\')" type="button" class="btn btn-primary">{{get_suggest(\'cost\')|currency}}</button>',x='<button id="sp_app/service/prompt/suggest_cost_extra_btn" ng-disabled="!is_many_suggestion(\'cost\')" type="button" class="btn btn-primary dropdown-toggle"><span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-repeat="sp in suggest_product.sp_lst | orderBy:\'get_cost()\'"><a ng-click="$parent.sp.cost=sp.cost" href="#">{{sp.cost|currency}}</a></li></ul>',T='<div id="sp_app/service/prompt/suggest_cost" ng-hide="is_no_suggestion(\'cost\')" class="btn-group" dropdown>'+S+x+"</div>",N='<div class="form-group"><label class="col-sm-4 control-label">Cost:</label><div class="col-sm-8"><input id="sp_app/service/prompt/cost_txt" name="cost" ng-model="$parent.sp.cost" ng-disabled="{{sp.is_kit()}}" type="number"}}"">'+T+'<label class="error" ng-show="form.cost.$invalid">'+"invalid number"+"</label>"+"</div>"+"</div>",C='<div class="form-group"><label class="col-sm-4 control-label">Sale report:</label><div class="col-sm-8"><input id="sp_app/service/prompt/is_sale_report_check" ng-model="$parent.sp.is_sale_report" type="checkbox"></div></div>',k='<div class="form-group"><label class="col-sm-4 control-label">Type:</label><div class="col-sm-8"><input id="sp_app/service/prompt/p_type_txt" ng-model="$parent.sp.p_type" typeahead="item.type for item in lookup_type_tag | filter:$viewValue | limitTo:8" type="text" class="form-control"></div></div><div class="form-group"><label class="col-sm-4 control-label">Tag:</label><div class="col-sm-8"><input id="sp_app/service/prompt/p_tag_txt" ng-model="$parent.sp.p_tag" type="text"></div></div>',L='<div class="form-group"><label class="col-sm-4 control-label">Vendor:</label><div class="col-sm-8"><input id="sp_app/service/prompt/vendor_txt" ng-model="$parent.sp.vendor" type="text"></div></div>',A='<div class="form-group"><label class="col-sm-4 control-label">Buydown:</label><div class="col-sm-8"><input id="sp_app/service/prompt/buydown_txt" name="buydown" ng-disabled="{{sp.is_kit()}}" ng-model="$parent.sp.buydown" type="number"}}"><label class="error" ng-show="form.buydown.$invalid">invalid input</label></div></div>',O='<div class="form-group"><label class="col-sm-4 control-label">value customer price:</label><div class="col-sm-8"><input id="sp_app/service/prompt/value_customer_price_txt" name="value_customer_price" ng-model="$parent.sp.value_customer_price" type="number" /><label class="error" ng-show="form.value_customer_price.$invalid">invalid number</label></div></div>',M='<div ng-show="is_create_new_sp()" class="form-group"><label class="col-sm-4 control-label">Sku:</label><div class="col-sm-8"><input id="sp_app/service/prompt/sku_txt" name="sku" ng-model="$parent.sku" ng-disabled="can_not_change_sku()" type="text" ng-required="is_create_new_sp()"><label class="error" ng-show="form.sku.$error.required">require</label></div></div>',_='<div id="sp_app/service/prompt/dialog" class="modal-header"><h3 class="modal-title">{{calculate_title()}}</h3></div><div class="modal-body"><form name="form" novalidate role="form"><div class="form-horizontal" >'+f+p+g+E+N+"<hr>"+C+k+L+A+O+M+"</div>"+"</form>"+"</div>"+'<div class="modal-footer">'+"<button"+' id="sp_app/service/prompt/duplicate_from_btn"'+' class="btn btn-primary btn-float-left"'+' ng-click="duplicate_from()"'+' ng-show="original_sp===null"'+' type="button">duplicate from</button>'+'<button id="sp_app/service/prompt/cancel_btn" class="btn btn-warning" ng-click="cancel()" type="button">cancel</button>'+'<button ng-disabled="is_unchange()" class="btn btn-primary" ng-click="reset()" type="button">reset</button>'+'<button id="sp_app/service/prompt/ok_btn" ng-disabled="is_unchange()||form.$invalid" class="btn btn-success" ng-click="ok()" type="button">ok</button>'+"</div>",P=function(t,n,r,o,u,a,f,l){t.suggest_product=u,t.duplicate_sp=a,t.original_sku=f,t.original_sp=o,initial_blank_sp={is_sale_report:!0,is_taxable:!1},t.tax_suggest_statistic=u==null?null:u.get_tax_suggest_statistic(),t.lookup_type_tag=D(l),t.sku=f,t.sp=e.copy(o),t.sp==null&&(t.duplicate_sp==null?t.sp=e.copy(initial_blank_sp):t.sp=e.copy(t.duplicate_sp)),!e.equals(t.sp,initial_blank_sp)&&t.sp.is_kit()&&(t.sp.crv=t.sp.get_crv(),t.sp.cost=t.sp.get_cost(),t.sp.buydown=t.sp.get_buydown()),t.is_tax_suggest_has_both_false_and_true=function(){return t.tax_suggest_statistic==null?!1:t.tax_suggest_statistic[0].value!=0&&t.tax_suggest_statistic[1].value!=0},t.is_no_suggestion=function(e){return t.suggest_product==null?!0:t.suggest_product.get_suggest_main(e)==null},t.is_many_suggestion=function(e){if(t.suggest_product==null)return!1;var n=t.suggest_product.get_suggest_extra(e);return n==null?!1:n.length>1},t.reset=function(){t.original_sp==null?t.duplicate_sp==null?t.sp=e.copy(initial_blank_sp):t.sp=e.copy(t.duplicate_sp):t.sp=e.copy(t.original_sp),t.sku=e.copy(t.original_sku)},t.is_unchange=function(){var n=e.equals(t.original_sku,t.sku),r=undefined;return t.original_sp==null?t.duplicate_sp==null?r=e.equals(t.sp,initial_blank_sp):r=e.equals(t.sp,t.duplicate_sp):r=e.equals(t.sp,t.original_sp),r&&n},t.can_not_change_sku=function(){return t.duplicate_sp==null},t.is_create_new_sp=function(){return t.original_sp==null},t.get_suggest=function(e){return t.suggest_product==null?null:t.suggest_product.get_suggest_main(e)},t.calculate_title=function(){return t.suggest_product!=null?"Add: "+t.suggest_product.name:t.duplicate_sp!=null?"Duplicate: "+t.duplicate_sp.name:t.original_sp==null?"Create new product":"Edit: "+t.original_sp.name},t.duplicate_from=function(){i().then(function(e){t.sp.name=e.name,t.sp.price=e.price,t.sp.crv=e.crv,t.sp.is_taxable=e.is_taxable,t.sp.cost=e.cost,t.sp.is_sale_report=e.is_sale_report,t.sp.p_type=e.p_type,t.sp.p_tag=e.p_tag,t.sp.vendor=e.vendor,t.sp.buydown=e.buydown,t.sp.value_customer_price=e.value_customer_price},function(e){s(e)})},t.cancel=function(){n.dismiss("_cancel_")},t.ok=function(){n.close({sku:t.sku,sp:t.sp})}};return P.$inject=["$scope","$modalInstance","$filter","original_sp","suggest_product","duplicate_sp","original_sku","lookup_type_tag"],function(e,i,s,o,u){var a=t.open({template:_,controller:P,backdrop:"static",size:"lg",resolve:{original_sp:function(){return e},suggest_product:function(){return i},duplicate_sp:function(){return s},original_sku:function(){return o},lookup_type_tag:function(){var e=r.defer();return u?e.resolve([]):n({url:"/product/get_lookup_type_tag",method:"GET"}).then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise}}});return a.result}}])}),define("app/sp_app/service/api/crud",["angular","app/sp_app/model"],function(e){var t=e.module("sp_app/service/api/crud",["sp_app/model"]);t.factory("sp_app/service/api/crud",["$http","$q","sp_app/model/Store_product",function(e,t,n){return{insert_new:function(r,i){var s=t.defer();return e({url:"/product/insert_new_sp_angular",method:"POST",data:{sku_str:i,sp:JSON.stringify(r)}}).then(function(e){s.resolve(n.build(e.data))},function(e){s.reject(e)}),s.promise},insert_old:function(r,i,s){var o=t.defer();return e({url:"/product/sp_insert_old_angular",method:"POST",data:{product_id:r,sku_str:i,sp:JSON.stringify(s)}}).then(function(e){o.resolve(n.build(e.data))},function(e){o.reject(e)}),o.promise},update:function(r){var i=t.defer();return e({url:"/product/update_sp_angular",method:"POST",data:{sp:JSON.stringify(r)}}).then(function(e){i.resolve(n.build(e.data))},function(e){i.reject(e)}),i.promise}}}])}),define("app/sp_app/service/edit/sp",["angular","app/sp_app/service/prompt","app/sp_app/service/api/crud","service/db"],function(e){var t=e.module("sp_app/service/edit/sp",["sp_app/service/prompt","sp_app/service/api/crud","service/db"]);t.factory("sp_app/service/edit/sp",["$http","$filter","$q","sp_app/service/prompt","sp_app/service/api/crud","service/db/download_product",function(e,t,n,r,i,s){return function(e){var t=n.defer();return r(e,null,null,null,!1).then(function(e){i.update(e.sp).then(function(e){s(!1).then(function(){t.resolve(e)},function(e){t.reject(e)})},function(e){t.reject(e)})},function(e){return t.reject(e)}),t.promise}}])}),define("app/sp_app/service/info",["angular","app/sp_app/service/edit/group","app/sp_app/service/edit/kit","app/sp_app/service/edit/sku","app/sp_app/service/edit/sp","app/sp_app/service/api/search","service/ui"],function(e){var t=e.module("sp_app/service/info",["sp_app/service/edit/group","sp_app/service/edit/kit","sp_app/service/edit/sp","sp_app/service/edit/sku","sp_app/service/api/search","service/ui"]);t.factory("sp_app/service/info",["$modal","sp_app/service/edit/group","sp_app/service/edit/kit","sp_app/service/edit/sp","sp_app/service/edit/sku","sp_app/service/api/search","service/ui/alert",function(t,n,r,i,s,o,u){var a='<div id="sp_app/service/info/dialog" class="modal-header"><h3 class="modal-title">Info: {{sp.name}}</h3></div><div class="modal-body"><tabset justified="true"><tab id="sp_app/service/info/tab/product" heading="product" select="switch_tab(\'product\')"><div class="form-horizontal" ><div class="form-group"><label class="col-sm-4 control-label">Name:</label><p class="col-sm-8 form-control-static">{{sp.name}}</p></div><div class="form-group"><label class="col-sm-4 control-label">Price:</label><p class="col-sm-8 form-control-static">{{sp.price | currency}}</p></div><div class="form-group"><label class="col-sm-4 control-label">Crv:</label><p class="col-sm-8 form-control-static">{{sp.get_crv()|currency}}</p></div><div class="form-group"><label class="col-sm-4 control-label">Taxable:</label><p class="form-control-static col-sm-8"><span ng-class="sp.is_taxable ? \'glyphicon glyphicon-ok\' : \'glyphicon glyphicon-remove\'"></span></p></div><div class="form-group"><label class="col-sm-4 control-label">Cost:</label><p class="col-sm-8 form-control-static">{{sp.get_cost()|currency}}</p></div><hr><div class="form-group"><label class="col-sm-4 control-label">Sale report:</label><p class="form-control-static col-sm-8"><span ng-class="sp.is_sale_report ? \'glyphicon glyphicon-ok\' : \'glyphicon glyphicon-remove\'"></span></p></div><div class="form-group"><label class="col-sm-4 control-label">Type:</label><p class="col-sm-8 form-control-static">{{sp.p_type}}</p></div><div class="form-group"><label class="col-sm-4 control-label">Tag:</label><p class="col-sm-8 form-control-static">{{sp.p_tag}}</p></div><div class="form-group"><label class="col-sm-4 control-label">Vendor:</label><p class="col-sm-8 form-control-static">{{sp.vendor}}</p></div><div class="form-group"><label class="col-sm-4 control-label">Buydown:</label><p class="col-sm-8 form-control-static">{{sp.get_buydown()|currency}}</p></div><div class="form-group"><label class="col-sm-4 control-label">Value customer price:</label><p class="col-sm-8 form-control-static">{{sp.value_customer_price|currency}}</p></div></div></tab><tab id="sp_app/service/info/tab/group" heading="group" select="switch_tab(\'group\')"><table ng-hide="sp.group_lst.length==0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>group</th></tr><tr ng-repeat="group_info in sp.group_lst"><td>{{group_info.name}}</td></tr></table><pre ng-show="sp.group_lst.length==0">there is no group</pre></tab><tab id="sp_app/service/info/tab/kit" heading="kit" select="switch_tab(\'kit\')"><table ng-hide="sp.breakdown_assoc_lst.length==0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>kit</th><th>qty</th></tr><tr ng-repeat="assoc_info in sp.breakdown_assoc_lst | orderBy : \'breakdown.name\'"><td>{{assoc_info.breakdown.name}}</td><td>{{assoc_info.qty}}</td></tr></table><pre ng-show="sp.breakdown_assoc_lst.length==0">there is no kit</pre></tab><tab id="sp_app/service/info/tab/sku" heading="sku" select="switch_tab(\'sku\')"><table ng-show="sp.get_my_sku_assoc_lst().length != 0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>sku</th></tr><tr ng-repeat="sku_assoc_info in sp.get_my_sku_assoc_lst() | orderBy:\'sku_str\'"><td>{{sku_assoc_info.sku_str}}</td></tr></table><pre ng-show="sp.get_my_sku_assoc_lst().length == 0">there is no sku</pre></tab></tabset></div><div class="modal-footer"><button id="sp_app/service/info/edit_btn" class="btn btn-primary btn-float-left" ng-click="edit()">edit {{cur_tab}}</button><button ng-click="duplicate()" ng-show="cur_tab==\'product\'" class="btn btn-primary btn-float-left" ng-click="duplicate()">duplicate</button><button id="sp_app/service/info/exit_btn" class="btn btn-warning" ng-click="exit()">exit</button></div>',f=function(t,o,a){t.sp=a,t.is_show_kit_group_info=!0,t.cur_tab="product",t.edit=function(){t.cur_tab=="product"?i(t.sp).then(function(n){e.copy(n,t.sp)},function(e){u(e)}):t.cur_tab=="group"?n(t.sp):t.cur_tab=="kit"?r(t.sp).then(function(n){e.copy(n,t.sp)},function(e){u(e)}):t.cur_tab=="sku"&&s(t.sp)},t.switch_tab=function(e){t.cur_tab=e},t.exit=function(){o.close(t.sp)},t.duplicate=function(){o.close("duplicate")}};return f.$inject=["$scope","$modalInstance","sp"],function(e){var n=t.open({template:a,controller:f,size:"lg",resolve:{sp:function(){return e.is_instantiate_offline()?o.product_id_search(e.product_id):e}}});return n.result}}])}),define("app/sp_app/service/create",["angular","app/sp_app/service/prompt","app/sp_app/service/api/sku","app/sp_app/service/api/crud"],function(e){var t=e.module("sp_app/service/create",["sp_app/service/prompt","sp_app/service/api/sku","sp_app/service/api/crud"]);t.factory("sp_app/service/create",["$modal","$filter","$http","$q","sp_app/service/create/select_suggest","sp_app/service/create/new","sp_app/service/create/old","sp_app/service/api/sku",function(e,t,n,r,i,s,o,u){return function(e,t,n){var a=i(e,t,n),f=a.then(function(e){if(e==null)return s(n);if(e.constructor.name=="Store_product"){var t=e;return u.add_sku(t.product_id,n)}if(e.constructor.name=="Product"){var r=e;return o(r,n)}},function(e){return r.reject(e)});return f}}]),t.factory("sp_app/service/create/old",["$http","$q","sp_app/service/prompt","sp_app/service/api/sku","sp_app/service/api/crud",function(e,t,n,r,i){return function(e,r){var s=n(null,e,null,r,!1),o=s.then(function(t){return i.insert_old(e.product_id,r,t.sp)},function(e){return t.reject(e)});return o}}]),t.factory("sp_app/service/create/new",["$http","$q","sp_app/service/prompt","sp_app/service/api/crud",function(e,t,n,r){return function(e){var i=n(null,null,null,e,!1),s=i.then(function(t){return r.insert_new(t.sp,e)},function(e){return t.reject(e)});return s}}]),t.factory("sp_app/service/create/select_suggest",["$modal","$filter","$q",function(e,t,n){return function(t,r){if(t.length==0&&r.length==0){var i=n.defer();return i.resolve(null),i.promise}var s='<div id="sp_app/service/create/select_suggestion/dialog"><div class="modal-header"><h3 class="modal-title">select option</h3></div><div class="modal-body"><div ng-hide="prod_store__prod_sku__1_0.length == 0"><pre>product exist in your store. just need to add sku</pre><table class="table table-hover table-bordered table-condensed table-striped"><tr><caption>product exist in your store already. select to only add sku.</caption><th>your product</th><th>price</th><th>taxable</th><th>crv</th><th>cost</th><th>buydown</th><th><span class="glyphicon glyphicon-plus"> sku</span></th></tr><tr ng-repeat="sp in prod_store__prod_sku__1_0"><td>{{sp.name}}</td><td>{{sp.price | currency}}</td><td ng-class="sp.is_taxable ? \'glyphicon glyphicon-ok\' : \'glyphicon glyphicon-remove\'"></td><td>{{sp.get_crv()}}</td><td>{{sp.get_cost()}}</td><td>{{sp.get_buydown()}}</td><td><button ng-click="add_sku(sp)" class="btn btn-primary glyphicon glyphicon-plus"> sku</button></td></tr></table></div><div ng-hide="prod_store__prod_sku__0_0.length == 0"><table class="table table-hover table-bordered table-condensed table-striped"><tr><th>product from other stores</th><th>import to my store</th></tr><tr ng-repeat="product in prod_store__prod_sku__0_0"><td>{{product.name}}</td><td><button ng-click="import(product)" class="btn btn-primary">import</button></td></tr></table></div><br /><button class="btn btn-primary" ng-click="create_new()">if product is not show in list, click here to create new</button></div><div class="modal-footer"><button id="sp_app/service/create/select_suggest/cancel_btn" class="btn btn-warning" ng-click="cancel()">cancel</button></div></div>',o=function(e,t,n,r){e.prod_store__prod_sku__0_0=n,e.prod_store__prod_sku__1_0=r,e.add_sku=function(e){t.close(e)},e.import=function(e){t.close(e)},e.create_new=function(){t.close(null)},e.cancel=function(){t.dismiss("_cancel_")}};o.$inject=["$scope","$modalInstance","prod_store__prod_sku__0_0","prod_store__prod_sku__1_0"];var u=e.open({template:s,controller:o,size:"lg",resolve:{prod_store__prod_sku__0_0:function(){return t},prod_store__prod_sku__1_0:function(){return r}}});return u.result}}])}),define("app/sp_app/service/duplicate",["angular","app/sp_app/service/prompt","app/sp_app/service/api/crud"],function(e){var t=e.module("sp_app/service/duplicate",["sp_app/service/prompt","sp_app/service/api/crud"]);t.factory("sp_app/service/duplicate",["$http","$filter","$q","sp_app/service/prompt","sp_app/service/api/crud",function(e,t,n,r,i){return function(e){var t=r(null,null,e,null,!1),s=t.then(function(e){return i.insert_new(e.sp,e.sku)},function(e){return n.reject(e)});return s}}])}),define("filter/filter",["angular"],function(e){var t=e.module("filter",[]);t.filter("not_show_zero",function(){return function(e){return e=="$0.00"?"":e}})}),define("app/group_app/service/prompt",["angular","app/sp_ll_app/service/search/name_sku_online_dlg","service/ui","service/misc","directive/share_directive"],function(e){var t=e.module("group_app/service/prompt",["sp_ll_app/service/search/name_sku_online_dlg","service/ui","service/misc","directive/share_directive"]);t.factory("group_app/service/prompt",["$modal","sp_ll_app/service/search/name_sku_online_dlg/multiple","service/ui/alert","service/misc",function(t,n,r,i){return function(s){var o='<div class="modal-header"><h3>{{original_group.name==undefined?\'Create new group\' : \'Edit group \'+ original_group.name}}</h3></div><div class="modal-body"><div name="form" class="form-group"><label>group name:</label><input id="group_app/service/prompt/name_txt" name="name" ng-model="$parent.group.name" type="text" focus-me={{true}} required><label class="error" ng-show="form.name.$error.required">required</label></div><button id="group_app/service/prompt/add_btn" ng-click="add_sp()" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></button><table ng-hide="group.sp_lst.length == 0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>product</th><th>remove</th></tr><tr ng-repeat="sp in group.sp_lst"><td>{{sp.name}}</td><td class="alncenter"><button ng-click="remove_sp(sp)"class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span></button></td></tr></table><pre ng-show="group.sp_lst.length == 0">there is no product in this group</pre></div><div class="modal-footer"><button id="group_app/service/prompt/cancel_btn" ng-click="cancel()" class="btn btn-warning">cancel</button><button ng-disabled="is_unchange()" ng-click="reset()" class="btn btn-primary">reset</button><button id="group_app/service/prompt/ok_btn" ng-disabled="form.$invalid || is_unchange()" ng-click="ok()" class="btn btn-success">ok</button></div>',u=function(t,s,o){o==null&&(o={sp_lst:[]}),t.original_group=o,t.group=e.copy(t.original_group),t.remove_sp=function(e){for(var n=0;n<t.group.sp_lst.length;n++)if(e.id==t.group.sp_lst[n].id){t.group.sp_lst.splice(n,1);break}},t.add_sp=function(){var e=n();e.then(function(e){for(var n=0;n<e.length;n++)i.get_item_from_lst_base_on_id(e[n].id,t.group.sp_lst)==null&&t.group.sp_lst.push(e[n])},function(e){r(e)})},t.is_unchange=function(){return e.equals(t.group,t.original_group)},t.reset=function(){t.group=e.copy(t.original_group)},t.ok=function(){s.close(t.group)},t.cancel=function(){s.dismiss("_cancel_")}};u.$inject=["$scope","$modalInstance","original_group"];var a=t.open({template:o,controller:u,size:"md",backdrop:"static",resolve:{original_group:function(){return s}}});return a.result}}])}),define("app/group_app/service/edit",["angular","app/group_app/service/prompt","app/group_app/service/api"],function(e){var t=e.module("group_app/service/edit",["group_app/service/prompt","group_app/service/api"]);t.factory("group_app/service/edit",["$http","$q","group_app/service/prompt","group_app/service/api",function(e,t,n,r){return function(e){var i=t.defer();return r.get_item(e.id).then(function(e){return n(e)},function(e){i.reject(e)}).then(function(t){r.edit_item(t,e.id).then(function(e){i.resolve(e)},function(e){i.reject(e)})},function(e){i.reject(e)}),i.promise}}])}),define("app/group_app/service/create",["angular","app/group_app/service/api"],function(e){var t=e.module("group_app/service/create",["group_app/service/prompt","group_app/service/api"]);t.factory("group_app/service/create",["$q","group_app/service/prompt","group_app/service/api",function(e,t,n){return function(){var r=t(null),i=r.then(function(e){return n.create(e)},function(t){return e.reject(t)});return i}}])}),define("app/group_app/service/execute",["angular","app/group_app/service/api","service/ui","app/group_app/model","service/db"],function(e){var t=e.module("group_app/service/execute",["group_app/service/api","service/ui","group_app/model","service/db"]);t.factory("group_app/service/execute",["$modal","group_app/service/api","service/ui/alert","group_app/model/Group","service/db/download_product",function(e,t,n,r,i){return function(s){var o='<div class="form-group"><label class="col-sm-5 control-label">Price:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_price_check" ng-click="checkbox_click(\'price\')" ng-model="$parent.enable_price" type="checkbox"></input><input id="group_app/service/execute/price_txt" ng-disabled="!$parent.enable_price" ng-required="$parent.enable_price" ng-model="$parent.option.price" name="price" type="number" min="0.01"><label ng-show="form.price.$error.required && !form.price.$error.number && !form.price.$error.min" class="error">required</label><label ng-show="form.price.$error.number" class="error">invalid number</label><label ng-show="form.price.$error.min" class="error">minimum error</label></div></div>',u='<div class="form-group"><label class="col-sm-5 control-label">Crv:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_crv_check" ng-click="checkbox_click(\'crv\')" ng-model="$parent.enable_crv" type="checkbox"></input><input id="group_app/service/execute/crv_txt" ng-disabled="!$parent.enable_crv" ng-model="$parent.option.crv" name="crv" type="number" min="0.01"><label ng-show="form.crv.$error.number" class="error">invalid number</label><label ng-show="form.crv.$error.min" class="error">minimum error</label></div></div>',a='<div class="form-group"><label class="col-sm-5 control-label">Tax:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_is_taxable_check" ng-click="checkbox_click(\'is_taxable\')" ng-model="$parent.enable_is_taxable" type="checkbox"></input><input id="group_app/service/execute/is_taxable_check" ng-disabled="!$parent.enable_is_taxable" ng-model="$parent.option.is_taxable" name="is_taxable" type="checkbox"></div></div>',f='<div class="form-group"><label class="col-sm-5 control-label">Cost:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_cost_check" ng-click="checkbox_click(\'cost\')" ng-model="$parent.enable_cost" type="checkbox"></input><input id="group_app/service/execute/cost_txt" ng-disabled="!$parent.enable_cost" ng-model="$parent.option.cost" name="cost" type="number" min="0.01"><label ng-show="form.cost.$error.number" class="error">invalid number</label><label ng-show="form.cost.$error.min" class="error">minimum error</label></div></div>',l='<div class="form-group"><label class="col-sm-5 control-label">sale report:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_is_sale_report_check" ng-click="checkbox_click(\'is_sale_report\')" ng-model="$parent.enable_is_sale_report" type="checkbox"></input><input id="group_app/service/execute/is_sale_report_check" ng-disabled="!$parent.enable_is_sale_report" ng-model="$parent.option.is_sale_report" name="is_sale_report" type="checkbox"></div></div>',c='<div class="form-group"><label class="col-sm-5 control-label">Type:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_p_type_check" ng-click="checkbox_click(\'p_type\')" ng-model="$parent.enable_p_type" type="checkbox"></input><input id="group_app/service/execute/p_type_txt" ng-disabled="!$parent.enable_p_type" ng-model="$parent.option.p_type" name="p_type" type="text"></div></div>',h='<div class="form-group"><label class="col-sm-5 control-label">Tag:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_p_tag_check" ng-click="checkbox_click(\'p_tag\')" ng-model="$parent.enable_p_tag" type="checkbox"></input><input id="group_app/service/execute/p_tag_txt" ng-disabled="!$parent.enable_p_tag" ng-model="$parent.option.p_tag" name="p_tag" type="text"></div></div>',p='<div class="form-group"><label class="col-sm-5 control-label">Vendor:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_vendor_check" ng-click="checkbox_click(\'vendor\')" ng-model="$parent.enable_vendor" type="checkbox"></input><input id="group_app/service/execute/vendor_txt" ng-disabled="!$parent.enable_vendor" ng-model="$parent.option.vendor" name="vendor" type="text"></div></div>',d='<div class="form-group"><label class="col-sm-5 control-label">Buydown:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_buydown_check" ng-click="checkbox_click(\'buydown\')" ng-model="$parent.enable_buydown" type="checkbox"></input><input id="group_app/service/execute/buydown_txt" ng-disabled="!$parent.enable_buydown" ng-model="$parent.option.buydown" name="buydown" type="number" min="0.01"><label ng-show="form.buydown.$error.number" class="error">invalid number</label><label ng-show="form.buydown.$error.min" class="error">minimum error</label></div></div>',v='<div class="form-group"><label class="col-sm-5 control-label">value_cus_price:</label><div class="col-sm-7"><input id="group_app/service/execute/enable_value_customer_price_check" ng-click="checkbox_click(\'value_customer_price\')" ng-model="$parent.enable_value_customer_price" type="checkbox"></input><input id="group_app/service/execute/value_customer_price_txt" ng-disabled="!$parent.enable_value_customer_price" ng-model="$parent.option.value_customer_price" name="value_customer_price" type="number" min="0.01"><label ng-show="form.value_customer_price.$error.number" class="error">invalid number</label><label ng-show="form.value_customer_price.$error.min" class="error">minimum error</label></div></div>',m='<form name="form" novalidate role="form"><div class="form-horizontal" >'+o+u+a+f+l+c+h+p+d+v+"</div>"+"</form>",g='<div class="modal-header"><h3>{{group.name}} - execute</h3></div><div class="modal-body"><div ng-hide="group.sp_lst.length === 0"><div class="col-sm-5">'+m+'<div ng-hide="is_option_empty()">'+"<hr>"+"<h3>actions</h3>"+"<ul>"+"<li ng-show=\"value!== undefined\" ng-repeat=\"(key,value) in $parent.option\">{{key}} : <span ng-class=\"value===null?'error':''\">{{value !== null ? value : 'empty'}}</span></li>"+"</ul>"+"</div>"+"</div>"+'<div class="col-sm-7">'+'<table class="table table-hover table-bordered table-condensed table-striped">'+"<tr>"+"<th>product</th>"+"<th>price</th>"+"<th>crv</th>"+"<th>tax</th>"+"<th>cost</th>"+"</tr>"+'<tr ng-repeat="sp in group.sp_lst">'+"<td>{{sp.name}}</td>"+"<td>{{sp.price|currency}}</td>"+"<td>{{sp.crv|currency}}</td>"+'<td class="alncenter"><span class="glyphicon" ng-class="sp.is_taxable? \'glyphicon-check\' : \'glyphicon-unchecked\'"></span></td>'+"<td>{{sp.cost|currency}}</td>"+"</tr>"+"</table>"+"</div>"+'<div class="clear"></div>'+"</div>"+'<pre id="group_app/service/execute/empty_group_warning_lbl" ng-show="group.sp_lst.length === 0" class="error">there is no product in this group</pre>'+"</div>"+'<div class="modal-footer">'+'<button id="group_app/service/execute/ok_btn" ng-disabled="is_option_empty() || form.$invalid" ng-click="ok() || group.sp_lst.length === 0" class="btn btn-success">ok</button>'+'<button id="group_app/service/execute/exit_btn" ng-click="exit()" class="btn btn-warning">exit</button>'+"</div>",y=function(e,t,s,o){e.group=o,e.option={},e.checkbox_click=function(t){var n="enable_"+t,r=e[n];r===undefined&&(r=!1),r=!r,r===!1?delete e.option[t]:t==="is_taxable"||t==="is_sale_report"?e.option[t]=!1:t!=="price"&&(e.option[t]=null)},e.is_option_empty=function(){for(key in e.option)if(e.option.hasOwnProperty(key))return!1;return!0},e.ok=function(){s({method:"POST",url:"/group/execute",data:{group_id:o.id,option:JSON.stringify(e.option)}}).then(function(t){i(!1).then(function(){e.group=r.build(t.data),n("execute is complete successfully","info","green"),e.option={},e.enable_price=!1,e.enable_crv=!1,e.enable_is_taxable=!1,e.enable_cost=!1,e.enable_is_sale_report=!1,e.enable_p_tag=!1,e.enable_p_tag=!1,e.enable_vendor=!1,e.enable_buydown=!1,e.enable_value_customer_price=!1},function(e){n(e)})},function(e){n(e)})},e.exit=function(){t.dismiss("_cancel_")}};y.$inject=["$scope","$modalInstance","$http","group"];var b=e.open({template:g,controller:y,size:"lg",resolve:{group:function(){return t.get_item(s)}}});return b}}])}),define("app/group_app/service/manage",["angular","service/ui","app/group_app/service/edit","app/group_app/service/create","app/group_app/service/api","app/group_app/service/execute"],function(e){var t=e.module("group_app/service/manage",["service/ui","group_app/service/edit","group_app/service/create","group_app/service/api","group_app/service/execute"]);t.factory("group_app/service/manage",["$modal","$http","group_app/service/edit","service/ui/alert","service/ui/confirm","group_app/service/create","group_app/service/api","group_app/service/execute",function(t,n,r,i,s,o,u,a){return function(){var n='<div class="modal-header"><div class="modal-title"><h3>manage group</h3></div></div><div class="modal-body"><button id="group_app/service/manage/add_btn" ng-click="add_group()" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></button><input type="text" ng-model="local_filter.name" placeHolder="local filter"><table ng-hide="group_lst.length == 0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>group</th><th>execute</th><th>delete</th><th>edit</th></tr><tr ng-repeat="group in group_lst | filter:local_filter"><td>{{group.name}}</td><td class="alncenter"><button ng-click="execute_group(group.id)" class="btn btn-primary"><span class="glyphicon glyphicon-play"></span></button></td><td class="alncenter"><button ng-click="delete_group(group)" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span></button></td><td class="alncenter"><button ng-click="edit_group(group)"class="btn btn-primary"><span class="glyphicon glyphicon-pencil"></span></button></td></tr></table><pre ng-show="group_lst.length == 0">there is no group</pre></div><div class="modal-footer"><button id="group_app/service/manage/exit_btn" ng-click="exit()" class="btn btn-warning"><span class="glyphicon glyphicon-remove"></span></button></div>',f=function(t,n,f,l){t.group_lst=l,t.execute_group=function(e){a(e)},t.delete_group=function(e){var n=s("delete "+e.name+" group?");n.then(function(n){if(n===!1)return;u.delete_item(e.id).then(function(){var n=null;for(var r=0;r<t.group_lst.length;r++)if(t.group_lst[r].id===e.id){n=r;break}n===null?i("Bug: should be unreachable. can not find deleted index after success response"):t.group_lst.splice(r,1)},function(e){i(e)})})},t.add_group=function(){var e=o();e.then(function(e){t.group_lst.push(e)},function(e){i(e)})},t.edit_group=function(t){var n=r(t);n.then(function(n){e.copy(n,t)},function(e){i(e)})},t.exit=function(){n.close(t.sp_lst)}};f.$inject=["$scope","$modalInstance","$http","group_lst"];var l=t.open({template:n,controller:f,size:"lg",resolve:{group_lst:function(){return u.get_lst()}}});return l.result}}])}),define("app/sp_app/controller",["angular","app/sp_app/service/info","app/sp_app/service/create","app/sp_app/service/duplicate","filter/filter","directive/share_directive","service/ui","app/sp_app/service/api/search","service/db","app/group_app/service/manage"],function(e){var t=e.module("sp_app.controller",["sp_app/service/info","sp_app/service/create","sp_app/service/duplicate","filter","directive/share_directive","service/ui","sp_app/service/api/search","service/db","group_app/service/manage"]);return t.controller("MainCtrl",["$window","$scope","$rootScope","$filter","sp_app/service/info","sp_app/service/create","sp_app/service/duplicate","service/ui/alert","service/ui/confirm","sp_app/service/api/search","blockUI","service/db/is_pouch_exist","group_app/service/manage",function(e,t,n,r,i,s,o,u,a,f,l,c,h){function p(){e.open("sale/index_angular/")}t.cur_sort_column="name",t.cur_sort_desc=!1,t.column_click=function(e){t.cur_sort_column==e?t.cur_sort_desc=!t.cur_sort_desc:(t.cur_sort_column=e,t.cur_sort_desc=!1)},t.get_sort_class=function(e){return e==t.cur_sort_column?"glyphicon glyphicon-arrow-"+(t.cur_sort_desc?"down":"up"):""},t.sp_lst=[],t.sku_search=function(){t.name_search_str="",t.local_filter="",t.sku_search_str=t.sku_search_str.trim().toLowerCase();if(t.sku_search_str.length==0){t.sp_lst=[];return}f.sku_search(t.sku_search_str).then(function(e){t.sp_lst=e.prod_store__prod_sku__1_1;if(t.sp_lst.length==0)var n=s(e.prod_store__prod_sku__0_0,e.prod_store__prod_sku__1_0,t.sku_search_str).then(function(e){t.sp_lst=[e]},function(e){u(e)})},function(e){u(e)})},t.name_search=function(e){if(t.name_search_busy===!0)return;t.sku_search_str="",t.local_filter="",t.name_search_str=t.name_search_str.trim();if(t.name_search_str.length===0){t.sp_lst=[];return}var n=null;if(t.old_name_search_str===null)n=0,t.sp_lst=[],t.old_name_search_str=t.name_search_str,t.name_search_reach_the_end=!1;else if(t.old_name_search_str!==t.name_search_str)n=0,t.sp_lst=[],t.old_name_search_str=t.name_search_str,t.name_search_reach_the_end=!1;else{if(e==="user")return;if(e==="infinite_scroll"){if(t.name_search_reach_the_end)return;n=t.sp_lst.length}else e==="code"&&(n=0,t.sp_lst=[],t.old_name_search_str=t.name_search_str,t.name_search_reach_the_end=!1)}t.name_search_busy=!0,f.name_search(t.name_search_str,n).then(function(e){if(e.length===0)t.name_search_reach_the_end=!0;else for(var n=0;n<e.length;n++)t.sp_lst.push(e[n]);t.sp_lst.length==0?u('no result found for "'+t.name_search_str+'"',"info","blue"):t.is_blur_name_search_text_box=!0,t.name_search_busy=!1},function(e){u(e)})},t.display_product_info=function(e){i(e).then(function(n){typeof n=="string"&&n=="duplicate"&&o(e).then(function(e){t.sp_lst=[e]},function(e){u(e)})},function(e){u(e)})},t.launch_pos=function(){c().then(function(e){e?a("launch pos?").then(function(){p()}):a("first time download database. continue?").then(function(){p()})},function(e){u(e)})},t.menu_setting_group_in_sp_page=function(){h().then(function(){t.name_search_str.length!==0?t.name_search("code"):t.sku_search_str.length!==0&&t.sku_search()},function(e){u(e)})},t.name_search_reach_the_end=!1,t.name_search_str="",t.is_blur_name_search_text_box=!1,t.name_search_busy=!1,t.old_name_search_str=null}]),t}),define("app/tax_app/service/edit",["angular"],function(e){var t=e.module("tax_app/service/edit",[]);t.factory("tax_app/service/edit",["$http","$modal","$q","$rootScope","service/ui/prompt",function(e,t,n,r,i){return function(){var t=n.defer();return i("enter tax rate",r.GLOBAL_SETTING.tax_rate,!1,!0).then(function(n){e({url:"/tax/update_angular",method:"POST",data:{tax_rate:n}}).then(function(e){var n=JSON.parse(e.data);r.GLOBAL_SETTING.tax_rate=n,t.resolve(n)},function(e){t.reject(e)})},function(e){t.reject(e)}),t.promise}}])}),define("app/mix_match_app/service/prompt",["angular","app/sp_ll_app/service/search/name_sku_online_dlg","service/ui","app/group_app/service/search_dlg","app/group_app/service/api"],function(e){var t=e.module("mix_match_app/service/prompt",["sp_ll_app/service/search/name_sku_online_dlg","service/ui","group_app/service/search_dlg","group_app/service/api"]);t.factory("mix_match_app/service/prompt",["$modal","service/ui/alert","sp_ll_app/service/search/name_sku_online_dlg/multiple","group_app/service/search_dlg/multiple","group_app/service/api",function(t,n,r,i,s){return function(o){var u='<div class="modal-header"><h3>{{$scope.original_mm == null ? "create new mix match" : "edit " + mm.name}}</h3></div><div class="modal-body"><form name="form" class="form-horizontal" novalidate><div class="form-group"><label class="col-sm-4">name</label><div class="col-sm-8"><input id="mix_match_app/service/prompt/name_txt" ng-model="$parent.mm.name" name="name" required><label ng-show="form.name.$error.required" class="error">required</label></div></div><div class="form-group"><label class="col-sm-4">qty</label><div class="col-sm-8"><input id="mix_match_app/service/prompt/qty_txt" ng-model="$parent.mm.qty" name="qty" ng-pattern="integer_validation" type="number" min="2" required><label ng-show="form.qty.$error.required && !form.qty.$error.number && !form.qty.$error.min" class="error">required</label><label ng-show="form.qty.$error.number || form.qty.$error.pattern" class="error">invalid number</label><label ng-show="form.qty.$error.min" class="error">at least 2</label></div></div><div class="form-group"><label class="col-sm-4">price</label><div class="col-sm-8"><input id="mix_match_app/service/prompt/price_txt" ng-model="$parent.mm.mm_price" name="price" type="number" min="0.01" required><label ng-show="form.price.$error.required && !form.price.$error.number && !form.price.$error.min" class="error">required</label><label ng-show="form.price.$error.number" class="error">invalid number</label><label ng-show="form.price.$error.min" class="error">invalid price</label></div></div><div class="form-group"><label class="col-sm-4">include crv&tax</label><div class="col-sm-8"><input id="mix_match_app/service/prompt/is_include_crv_tax_check" ng-model="$parent.mm.is_include_crv_tax" name="is_include_crv_tax" type="checkbox"><label ng-show="form.is_include_crv_tax.$error.required" class="error">required</label></div></div><div class="form-group"><label class="col-sm-4">disable</label><div class="col-sm-8"><input id="mix_match_app/service/prompt/is_disable_check" ng-model="$parent.mm.is_disable" type="checkbox"><label ng-show="form.is_disable.$error.required" class="error">required</label></div></div></form><button id="mix_match_app/service/prompt/add_sp_btn" ng-click="add_product()" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span> product</button><button id="mix_match_app/service/prompt/add_group_btn" ng-click="add_group()" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span> group</button><table ng-hide="mm.sp_lst.length==0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>product</th><th>remove</th><tr><tr ng-repeat="sp in mm.sp_lst | orderBy : \'name\'"><td>{{sp.name}}</td><td class="alncenter"><button ng-click="remove_child(sp)" class="btn btn-danger glyphicon glyphicon-trash"></button></td></tr></table><label ng-show="mm.sp_lst.length==0" class="error">empty deal</label></div><div class="modal-footer"><button id="mix_match_app/service/prompt/cancel_btn" ng-click="cancel()" class="btn btn-warning">cancel</button><button ng-disabled="is_unchange()" ng-click="reset()" class="btn btn-primary">reset</button><button id="mix_match_app/service/prompt/ok_btn" ng-disabled="is_unchange() || (form.$invalid || mm.sp_lst.length == 0)" ng-click="ok()"class="btn btn-success">ok</button></div>',a=function(t,o,u,a,f){function l(e){for(var n=0;n<e.length;n++){var r=!1;for(var i=0;i<t.mm.sp_lst.length;i++)if(t.mm.sp_lst[i].id==e[n].id){r=!0;break}r||t.mm.sp_lst.push(e[n])}}t.original_mm=f,t.mm=e.copy(f),t.integer_validation=/^\d*$/,initial_mm={is_include_crv_tax:!1,is_disable:!1,sp_lst:[]},t.mm==null&&(t.mm=e.copy(initial_mm)),t.remove_child=function(e){for(var n=0;n<t.mm.sp_lst.length;n++)if(e.id==t.mm.sp_lst[n].id){t.mm.sp_lst.splice(n,1);break}},t.add_group=function(){i().then(function(e){var t=[];for(var n=0;n<e.length;n++)t.push(s.get_item(e[n].id));a.all(t).then(function(e){for(var t=0;t<e.length;t++)l(e[t].sp_lst)})},function(e){n(e)})},t.add_product=function(){var e=r(null);e.then(function(e){l(e)},function(e){n(e)})},t.is_unchange=function(){return f==null?e.equals(initial_mm,t.mm):e.equals(f,t.mm)},t.reset=function(){f==null?e.copy(initial_mm,t.mm):e.copy(f,t.mm)},t.ok=function(){o.close(t.mm)},t.cancel=function(){o.dismiss("_cancel_")}};a.$inject=["$scope","$modalInstance","$filter","$q","original_mm"];var f=t.open({template:u,controller:a,size:"lg",resolve:{original_mm:function(){return o}}});return f.result}}])}),define("app/mix_match_app/model",["angular","app/sp_app/model"],function(e){var t=e.module("mix_match_app/model",["sp_app/model"]);t.factory("mix_match_app/model/Mix_match",["sp_app/model/Store_product",function(e){function t(e,t,n,r,i,s,o){this.id=e,this.name=t,this.mm_price=n,this.is_include_crv_tax=r,this.qty=i,this.sp_lst=s,this.is_disable=o}return t.build=function(n){return new t(n.id,n.name,parseFloat(n.mm_price),n.is_include_crv_tax,n.qty,n.sp_lst.map(e.build),n.is_disable)},t}])}),define("app/mix_match_app/service/create",["angular","app/mix_match_app/service/prompt","app/mix_match_app/model"],function(e){var t=e.module("mix_match_app/service/create",["mix_match_app/service/prompt","mix_match_app/service/api"]);t.factory("mix_match_app/service/create",["$http","$q","$filter","mix_match_app/service/prompt","mix_match_app/service/api",function(e,t,n,r,i){return function(){var e=r(null),n=e.then(function(e){return i.create(e)},function(e){return t.reject(e)});return n}}])}),define("app/mix_match_app/service/api",["angular","app/mix_match_app/model"],function(e){var t=e.module("mix_match_app/service/api",["mix_match_app/model"]);t.factory("mix_match_app/service/api",["$http","$q","mix_match_app/model/Mix_match",function(e,t,n){return{create:function(r){var i=t.defer();return e({url:"/mix_match/insert_angular",method:"POST",data:{mix_match:JSON.stringify(r)}}).then(function(e){i.resolve(n.build(e.data))},function(e){i.reject(e)}),i.promise},edit:function(r){var i=t.defer();return e({url:"/mix_match/update_angular",method:"POST",data:{mix_match:JSON.stringify(r)}}).then(function(e){i.resolve(n.build(e.data))},function(e){i.reject(e)}),i.promise},get_lst:function(){var r=t.defer();return e({url:"/mix_match/get",method:"GET"}).then(function(e){r.resolve(e.data.map(n.build))},function(e){r.reject(e)}),r.promise}}}])}),define("app/mix_match_app/service/edit",["angular","app/mix_match_app/service/prompt","app/mix_match_app/service/api"],function(e){var t=e.module("mix_match_app/service/edit",["mix_match_app/service/prompt","mix_match_app/service/api"]);t.factory("mix_match_app/service/edit",["$q","$http","$filter","mix_match_app/service/prompt","mix_match_app/service/api",function(e,t,n,r,i){return function(t){var n=r(t),s=n.then(function(e){return i.edit(e)},function(t){return e.reject(t)});return s}}])}),define("app/mix_match_app/service/delete",["angular"],function(e){var t=e.module("mix_match_app/service/delete",[]);t.factory("mix_match_app/service/delete",["$http","$q",function(e,t){return function(n){var r=t.defer();return e({url:"/mix_match/delete",method:"POST",data:{id:n.id}}).then(function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise}}])}),define("app/mix_match_app/service/manage",["angular","service/ui","app/mix_match_app/service/create","app/mix_match_app/service/edit","app/mix_match_app/service/delete","app/mix_match_app/service/api"],function(e){var t=e.module("mix_match_app/service/manage",["service/ui","mix_match_app/service/create","mix_match_app/service/edit","mix_match_app/service/delete","mix_match_app/service/api"]);t.factory("mix_match_app/service/manage",["$http","$modal","$q","$filter","service/ui/alert","service/ui/confirm","mix_match_app/service/create","mix_match_app/service/edit","mix_match_app/service/delete","mix_match_app/service/api",function(t,n,r,i,s,o,u,a,f,l){return function(){var t='<div class="modal-header"><h3 class="modal-title">manage mix match deals</h3></div><div class="modal-body"><button id="mix_match_app/service/manage/add_btn" ng-click="add_mix_match()" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></button><input type="text" ng-model="local_filter.name" placeHolder="local filter"><table ng-hide="mm_lst.length == 0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>name</th><th>qty</th><th>price</th><th>include crv&tax</th><th>disable</th><th>delete</th><th>edit</th></tr><tr ng-repeat="mm in mm_lst | filter:local_filter | orderBy:\'name\'"><td>{{mm.name}}</td><td>{{mm.qty}}</td><td>{{mm.mm_price|currency}}</td><td><span ng-class="mm.is_include_crv_tax ? \'glyphicon glyphicon-ok\' : \'glyphicon glyphicon-remove\'"></span></td><td><span ng-class="mm.is_disable ? \'glyphicon glyphicon-ok\' : \'glyphicon glyphicon-remove\'"></span></td><td class="alncenter"><button ng-click="delete(mm)" class="btn btn-danger glyphicon glyphicon-trash"></button></td><td class="alncenter"><button ng-click="edit(mm)" class="btn btn-primary glyphicon glyphicon-pencil"></button></td></tr></table><pre ng-show="mm_lst.length == 0">there is no deal</pre></div><div class="modal-footer"><button id="mix_match_app/service/manage/exit_btn" ng-click="exit()" class="btn btn-warning">exit</button></div>',r=function(t,n,r,i,l){t.mm_lst=l,t.add_mix_match=function(){var e=u();e.then(function(e){t.mm_lst.push(e)},function(e){s(e)})},t.delete=function(e){var n=o("delete mix match "+e.name+" ?","red");n.then(function(){var n=f(e);n.then(function(n){for(var r=0;r<t.mm_lst.length;r++)t.mm_lst[r].id==e.id&&t.mm_lst.splice(r,1)},function(e){s(e)})})},t.edit=function(t){a(t).then(function(n){e.copy(n,t)},function(e){s(e)})},t.exit=function(){i.GLOBAL_SETTING!==undefined&&(i.GLOBAL_SETTING.mix_match_lst=t.mm_lst),n.close()}};return r.$inject=["$scope","$modalInstance","$q","$rootScope","mm_lst"],n.open({template:t,controller:r,size:"lg",resolve:{mm_lst:function(){return l.get_lst()}}}).result}}])}),define("app/payment_type_app/model",["angular"],function(e){var t=e.module("payment_type_app/model",[]);t.factory("payment_type_app/model/Payment_type",function(){function e(e,t,n,r){this.id=e,this.name=t,this.sort=n,this.active=r}return e.build=function(t){return new e(t.id,t.name,t.sort,t.active)},e})}),define("app/payment_type_app/service/prompt",["angular","app/payment_type_app/model"],function(e){var t=e.module("payment_type_app/service/prompt",["payment_type_app/model"]);t.factory("payment_type_app/service/prompt",["$modal","payment_type_app/model/Payment_type",function(t,n){return function(r){var i='<div class="modal-header"><h3>payment type</h3></div><div class="modal-body"><form name="form" novalidate role="form"><div class="form-horizontal" ><div class="form-group"><label class="col-sm-4 control-label" >Name:</label><div class="col-sm-8"><input id="payment_type_app/service/prompt/name_txt" name="name" ng-model="$parent.pt.name" type="text" required><label class="error" ng-show="form.name.$error.required">require</label></div></div><div class="form-group"><label class="col-sm-4 control-label" >Sort:</label><div class="col-sm-8"><input id="payment_type_app/service/prompt/sort_txt" name="sort" ng-model="$parent.pt.sort" type="text" required><label class="error" ng-show="form.sort.$error.required">require</label></div></div><div class="form-group"><label class="col-sm-4 control-label">Active:</label><div class="col-sm-8"><input id="payment_type_app/service/prompt/active_check" ng-model="$parent.pt.active" type="checkbox"></div></div></div></form></div><div class="modal-footer"><button id="payment_type_app/service/prompt/ok_btn" ng-disabled="is_unchange() || form.$invalid" ng-click="ok()" class="btn btn-success">ok</button><button ng-disabled="is_unchange()" ng-click="reset()" class="btn btn-primary">reset</button><button id="payment_type_app/service/prompt/cancel_btn" ng-click="cancel()" class="btn btn-warning">cancel</button></div>',s=function(t,r,i){t.reset=function(){t.pt=i===null?e.copy(s):e.copy(i)},t.is_unchange=function(){return i===null?e.equals(t.pt,s):e.equals(t.pt,i)},t.ok=function(){r.close(t.pt)},t.cancel=function(){r.dismiss("_cancel_")};var s=new n(null,null,null,!0);t.reset()};s.$inject=["$scope","$modalInstance","original_pt"];var o=t.open({template:i,controller:s,size:"md",resolve:{original_pt:function(){return r}}});return o.result}}])}),define("app/payment_type_app/service/api",["angular","app/payment_type_app/model"],function(e){var t=e.module("payment_type_app/service/api",["payment_type_app/model"]);t.factory("payment_type_app/service/api",["$http","$q","payment_type_app/model/Payment_type",function(e,t,n){function r(r){var i=t.defer();return e({url:"/payment_type/update_angular",method:"POST",data:{pt:JSON.stringify(r)}}).then(function(e){i.resolve(n.build(e.data))},function(e){i.reject(e)}),i.promise}function i(r){var i=t.defer();return e({url:"/payment_type/insert",method:"POST",data:{pt:JSON.stringify(r)}}).then(function(e){i.resolve(n.build(e.data))},function(e){i.reject(e)}),i.promise}function s(){var r=t.defer();return e({url:"/payment_type/get",method:"GET"}).then(function(e){r.resolve(e.data.map(n.build))},function(e){r.reject(e)}),r.promise}return{get_lst:s,create:i,edit:r}}])}),define("app/payment_type_app/service/edit",["angular","app/payment_type_app/service/prompt","app/payment_type_app/service/api"],function(e){var t=e.module("payment_type_app/service/edit",["payment_type_app/service/prompt","payment_type_app/service/api"]);t.factory("payment_type_app/service/edit",["$http","$q","payment_type_app/service/prompt","payment_type_app/service/api",function(e,t,n,r){return function(e){var i=t.defer();return n(e).then(function(e){r.edit(e).then(function(e){i.resolve(e)},function(e){i.reject(e)})},function(e){i.reject(e)}),i.promise}}])}),define("app/payment_type_app/service/create",["angular","app/payment_type_app/service/api","app/payment_type_app/service/prompt"],function(e){var t=e.module("payment_type_app/service/create",["payment_type_app/service/api","payment_type_app/service/prompt"]);t.factory("payment_type_app/service/create",["$http","$q","payment_type_app/service/api","payment_type_app/service/prompt",function(e,t,n,r){return function(){var e=t.defer();return r(null).then(function(t){n.create(t).then(function(t){e.resolve(t)},function(t){e.reject(t)})},function(t){e.reject(t)}),e.promise}}])}),define("app/payment_type_app/service/manage",["angular","app/payment_type_app/service/edit","app/payment_type_app/service/create","service/ui","app/payment_type_app/service/api"],function(e){var t=e.module("payment_type_app/service/manage",["payment_type_app/service/create","payment_type_app/service/edit","service/ui","payment_type_app/service/api"]);t.service("payment_type_app/service/manage",["$http","$modal","$rootScope","payment_type_app/service/edit","payment_type_app/service/create","service/ui/alert","service/ui/confirm","payment_type_app/service/api",function(t,n,r,i,s,o,u,a){return function(){var t='<div class="modal-header"><h3 class="modal-title">manage payment type</h3></div><div class="modal-body"><button id="payment_type_app/service/manage/create_btn" ng-click="create()" class="btn btn-primary glyphicon glyphicon-plus"></button><table ng-hide="pt_lst.length==0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>payment type</th><th>sort</th><th>active</th><th>edit</th></tr><tr ng-repeat="pt_manage in pt_lst | orderBy:\'sort\'"><td>{{pt_manage.name}}</td><td>{{pt_manage.sort}}</td><td class="alncenter"><span class="glyphicon" ng-class="pt_manage.active? \'glyphicon-check\' : \'glyphicon-unchecked\'"></span></td><td class="alncenter"><button ng-click="edit(pt_manage)" class="btn btn-primary glyphicon glyphicon-pencil"></button></td></tr></table><pre ng-show="pt_lst.length==0">there is no payment type</pre></div><div class="modal-footer"><button id="payment_type_app/service/manage/exit_btn" class="btn btn-warning" type="button" ng-click="exit()">exit</button>';"</div>";var u=function(t,n,u,a){t.pt_lst=a,t.exit=function(){r.GLOBAL_SETTING.payment_type_lst=t.pt_lst,n.dismiss("_cancel_")},t.create=function(){s().then(function(e){t.pt_lst.push(e)},function(e){o(e)})},t.edit=function(t){i(t).then(function(n){e.copy(n,t)},function(e){o(e)})}};u.$inject=["$scope","$modalInstance","$q","pt_lst"];var f=n.open({template:t,controller:u,size:"md",resolve:{pt_lst:function(){return a.get_lst()}}})}}])}),define("app/shortcut_app/service/edit",["angular","service/ui"],function(e){var t=e.module("shortcut_app/service/edit",["service/ui"]);t.factory("shortcut_app/service/edit",["$http","$q","service/ui/prompt",function(t,n,r){return function(i){var s=n.defer(),o=e.copy(i);return r("edit shortcut",o.caption,!0,!1).then(function(e){o.caption=e,t({url:"/sale_shortcut/parent_update_angular",method:"POST",data:{shortcut:JSON.stringify(o)}}).then(function(e){s.resolve(e.data)},function(e){s.reject(e)})},function(e){s.reject(e)}),s.promise}}])}),define("app/shortcut_app/service/create",["angular","service/ui"],function(e){var t=e.module("shortcut_app/service/create",["service/ui"]);t.factory("shortcut_app/service/create",["$http","$q","service/ui/prompt",function(e,t,n){return function(r){var i=t.defer();return n("create new shortcut",null,!1,!1).then(function(t){e({url:"/sale_shortcut/parent_create_angular",method:"POST",data:{position:r,caption:t}}).then(function(e){i.resolve(e.data)},function(e){i.reject(e)})},function(e){i.reject(e)}),i.promise}}])}),define("app/shortcut_app/service/prompt_child",["angular","app/sp_ll_app/service/search/name_sku_online_dlg","service/ui"],function(e){var t=e.module("shortcut_app/service/prompt_child",["sp_ll_app/service/search/name_sku_online_dlg","service/ui"]);t.factory("shortcut_app/service/prompt_child",["$modal","sp_ll_app/service/search/name_sku_online_dlg/single","service/ui/alert",function(t,n,r){return function(i){var s='<div class="modal-header"><h3 class="modal-title">{{original_child == null ? \'create new shortcut\' : \'edit shortcut: \' + original_child.store_product.name}}</h3></div><div class="modal-body"><form name="form" class="form-horizontal" novalidate><div class="form-group"><label class="col-sm-4 control-label">caption</label><div class="col-sm-8"><input id="shortcut_app/service/prompt/caption_txt" ng-model="$parent.child.caption" name="caption" type="text" required><label class="error" ng-show="form.caption.$error.required">require</label></div></div><div class="form-group"><label class="col-sm-4 control-label">product</label><div class="col-sm-8"><input id="shortcut_app/service/prompt/sp_txt" ng-model="$parent.child.store_product.name" disabled name="product" type="text"><button id="shortcut_app/service/prompt/sp_btn" ng-click=select_sp() class="btn btn-primary glyphicon glyphicon-plus" type="button"></button><button ng-hide="$parent.child.store_product === null" id="shortcut_app/service/prompt/remove_sp_btn" ng-click="$parent.child.store_product=null" class="btn btn-danger glyphicon glyphicon-trash" type="button"></button><label id="shortcut_app/service/prompt/non_inventory_warning_lbl" ng-show="$parent.child.store_product === null"> you are setting up none inventory shortcut</label></div></div></form></div><div class="modal-footer"><button id="shortcut_app/service/prompt/cancel_btn" ng-click="cancel()" class="btn btn-warning" type="button">cancel</button><button ng-click="reset()" ng-disabled="is_unchange()"class="btn btn-primary" type="button">reset</button><button id="shortcut_app/service/prompt/ok_btn" ng-click="ok()" ng-disabled="is_unchange() || form.$invalid" class="btn btn-success" type="button">ok</button></div>',o=function(t,i,s){t.original_child=s,t.child=null;var o={store_product:null};s===null?t.child=e.copy(o):t.child=e.copy(s),t.select_sp=function(){var e=n();e.then(function(e){t.child.store_product=e},function(e){r(e)})},t.is_unchange=function(){return s==null?e.equals(o,t.child):e.equals(s,t.child)},t.reset=function(){s==null?e.copy(o,t.child):e.copy(s,t.child)},t.cancel=function(){i.dismiss("_cancel_")},t.ok=function(){i.close(t.child)}};o.$inject=["$scope","$modalInstance","original_child"];var u=t.open({template:s,controller:o,size:"lg",resolve:{original_child:function(){return i}}});return u.result}}])}),define("app/shortcut_app/service/set_child",["angular","app/shortcut_app/service/prompt_child"],function(e){var t=e.module("shortcut_app/service/set_child",["shortcut_app/service/prompt_child"]);t.factory("shortcut_app/service/set_child",["$http","$q","shortcut_app/service/prompt_child",function(e,t,n){return function(r,i,s){var o=t.defer();return n(s).then(function(t){var n={parent_position:r,child_position:i,child_caption:t.caption,product_id:t.store_product===null?null:t.store_product.product_id};e({url:"/sale_shortcut/set_child_info",method:"POST",data:{post_data:JSON.stringify(n)}}).then(function(e){o.resolve(e.data)},function(e){o.reject(e)})},function(e){o.reject(e)}),o.promise}}])}),define("app/shortcut_app/shortcut_ui",["angular"],function(e){var t=e.module("shortcut_app/shortcut_ui",[]);t.factory("shortcut_app/shortcut_ui",["$rootScope",function(e){function t(t){t.shortcut_lst=e.GLOBAL_SETTING.shortcut_lst,t.row_count=e.GLOBAL_SETTING.shortcut_row_count,t.column_count=e.GLOBAL_SETTING.shortcut_column_count,t.current_parent_pos=0,t.col_lst=[];for(var n=0;n<t.column_count;n++)t.col_lst.push(n);t.row_lst=[];for(var n=0;n<t.row_count;n++)t.row_lst.push(n);t.set_cur_parent_position=function(e){t.current_parent_pos=e},t.get_parent_caption=function(e,n){var i=null,s=n;e||(s+=t.row_count);var o=r(s,t);return o!=null&&(i=o.caption),i},t.get_child_caption_of_cur_parent=function(e,n){var r=null,i=o(e,n,t);return i!=null&&(r=i.caption),r}}function n(e,t,n){return e*n.column_count+t}function r(e,t){var n=null;for(var r=0;r<t.shortcut_lst.length;r++)if(t.shortcut_lst[r].position==e){n=t.shortcut_lst[r];break}return n}function i(e){return r(e.current_parent_pos,e)}function s(e){return e.current_parent_pos}function o(e,t,i){var s=null,o=r(i.current_parent_pos,i);if(o!=null){var u=n(e,t,i);for(var a=0;a<o.child_set.length;a++)if(o.child_set[a].position==u){s=o.child_set[a];break}}return s}return{init:t,get_cur_parent:i,calculate_child_position:n,get_child_of_cur_parent:o,get_parent:r,get_cur_parent_position:s}}])}),define("app/shortcut_app/service/api",["angular"],function(e){var t=e.module("shortcut_app/service/api",[]);t.factory("shortcut_app/service/api",["$http","$q",function(e,t){function n(){var n=t.defer();return e({url:"/sale_shortcut/get",method:"GET"}).then(function(e){n.resolve(e.data)},function(e){n.reject(e)}),n.promise}return{get:n}}])}),define("app/shortcut_app/service/manage",["angular","service/ui","app/shortcut_app/service/edit","app/shortcut_app/service/create","app/shortcut_app/service/set_child","app/shortcut_app/shortcut_ui","app/shortcut_app/service/api"],function(e){var t=e.module("shortcut_app/service/manage",["service/ui","shortcut_app/service/edit","shortcut_app/service/create","shortcut_app/service/set_child","shortcut_app/shortcut_ui","shortcut_app/service/api"]);t.factory("shortcut_app/service/manage",["$modal","$http","service/ui/alert","shortcut_app/service/edit","shortcut_app/service/create","shortcut_app/service/set_child","shortcut_app/shortcut_ui","shortcut_app/service/api",function(t,n,r,i,s,o,u,a){return function(){var n='<div class="modal-header"><h3 class="modal-title">manage shortcut</h3></div><div class="modal-body"><table class="table table-bordered table-condensed sale_shortcut_tbl"><tr><th>left folder</th><th class="alncenter">edit</th><th ng-repeat="col in col_lst"></th><th class="alncenter">edit</th><th>right folder</th></tr><tr ng-repeat="row_setup in row_lst"><td ng-class="current_parent_pos==row_setup?\'warning\':\'success\'" ng-click="set_cur_parent_position(row_setup)">{{get_parent_caption(true,row_setup)}}</td><td ng-click="set_cur_parent_position(row_setup)" ng-class="current_parent_pos==row_setup?\'warning\':\'success\'" class="alncenter"><button ng-click="edit_shortcut(row_setup)" class="btn btn-primary glyphicon glyphicon-pencil"></button></td><td ng-repeat="col in col_lst" ng-click="edit_shortcut_child(row_setup,col)">{{get_child_caption_of_cur_parent(row_setup,col)}}</td><td ng-click="set_cur_parent_position(row_setup+row_count)" ng-class="current_parent_pos==row_setup+row_count?\'warning\':\'success\'" class="alncenter"><button ng-click="edit_shortcut(row_setup+row_count)" class="btn btn-primary glyphicon glyphicon-pencil"></button></td><td ng-class="current_parent_pos==row_setup+row_count?\'warning\':\'success\'" ng-click="set_cur_parent_position(row_setup+row_count)">{{get_parent_caption(false,row_setup)}}</td></tr></table></div><div class="modal-footer"><button id="shortcut_app/service/manage/exit_btn" ng-click="exit()" class="btn btn-warning glyphicon glyphicon-remove"></button></div>',f=function(t,n,a,f,l){function c(e){t.shortcut_lst.push(e)}u.init(t,l),t.exit=function(){n.close()},t.edit_shortcut_child=function(n,i){var s=u.calculate_child_position(n,i,t),a=u.get_child_of_cur_parent(n,i,t),f=o(u.get_cur_parent_position(t),s,a);f.then(function(n){var r=u.get_cur_parent(t);r==null?c(n):e.copy(n,r)},function(e){r(e)})},t.edit_shortcut=function(n){t.current_parent_pos=n;var o=u.get_cur_parent(t);if(o!=null){var a=i(o);a.then(function(t){e.copy(t,o)},function(e){r(e)})}else{var a=s(n);a.then(function(e){c(e)},function(e){r(e)})}}};f.$inject=["$scope","$modalInstance","$http","$q","shortcut_lst"];var l=t.open({template:n,controller:f,size:"lg",resolve:{shortcut_lst:function(){return a.get()}}})}}])}),define("app/sale_app/model",["angular","service/misc"],function(e){var t=e.module("sale_app/model",["service/misc"]);t.factory("sale_app/model/Pending_scan",[function(){function e(e,t,n,r,i,s){this.sp_doc_id=e,this.non_inventory=t,this.qty=n,this.override_price=r,this.discount=i,this.date=s}return e}]),t.factory("sale_app/model/Modify_ds_instruction",[function(){function e(e,t,n,r,i){this.is_delete=e,this.new_qty=t,this.new_price=n,this.new_discount=r,this.new_non_product_name=i}return e}]),t.factory("sale_app/model/Displaying_scan",[function(){function e(e,t,n,r,i,s,o,u){this.store_product=e,this.qty=t,this.override_price=n,this.discount=r,this.mm_deal_info=i,this.non_inventory=s,this.date=o,this.possible_deal_lst=u}return e.prototype={constructor:e,get_name:function(){return this.is_non_inventory()?this.non_inventory.name:this.store_product.name},is_non_inventory:function(){return this.store_product===null},get_preset_price:function(){return this.is_non_inventory()?this.non_inventory.price:this.store_product.price},get_override_price:function(){return this.override_price},get_genesis_price:function(){return this.override_price!==null?this.override_price:this.get_preset_price()},get_mm_deal_info:function(){return this.mm_deal_info},get_discount:function(){return this.discount},get_buydown:function(){return this.is_non_inventory()?0:this.store_product.get_buydown()},get_saving:function(){var e=0;return e+=this.get_discount(),e+=this.get_buydown(),this.get_mm_deal_info()!==null&&(e+=this.get_mm_deal_info().get_unit_discount()),e},get_advertise_price:function(){return this.get_genesis_price()-this.get_saving()},get_crv:function(){return this.is_non_inventory()?this.non_inventory.crv:this.store_product.get_crv()},get_cost:function(){return this.is_non_inventory()?this.non_inventory.cost:this.store_product.get_cost()},get_is_taxable:function(){return this.is_non_inventory()?this.non_inventory.is_taxable:this.store_product.is_taxable},_get_b4_tax_price:function(){return this.get_advertise_price()+this.get_crv()},get_buydown_tax:function(e){var t=0;return this.get_is_taxable()&&(t=this.get_buydown()*e/100),t},get_product_tax:function(e){var t=0;return this.get_is_taxable()&&(t=this._get_b4_tax_price()*e/100),t},get_otd_price:function(e){return this._get_b4_tax_price()+this.get_product_tax(e)+this.get_buydown_tax(e)},get_line_total:function(e){return this.get_otd_price(e)*this.qty}},e}]),t.factory("sale_app/model/Mix_match_deal_info",["service/misc",function(e){function t(e,t,n){this.mm_deal=e,this.formation_ds_lst=t,this.tax_rate=n}return t.prototype={constructor:t,get_name:function(){return this.mm_deal.name},is_deal_taxable:function(){var e=!1;for(var t=0;t<this.formation_ds_lst.length;t++)if(this.formation_ds_lst[t].store_product.is_taxable){e=!0;break}return e},get_unit_discount:function(){if(this.mm_deal.is_include_crv_tax){var t=0;for(var n=0;n<this.formation_ds_lst.length;n++){var r=this.formation_ds_lst[n];t+=r.get_genesis_price()+r.store_product.get_crv()}var i=t/this.mm_deal.qty-100*this.mm_deal.mm_price/((100+(this.is_deal_taxable()?this.tax_rate:0))*this.mm_deal.qty);return i}var t=0;for(var n=0;n<this.formation_ds_lst.length;n++){var r=this.formation_ds_lst[n];t+=r.get_genesis_price()}var i=(t-this.mm_deal.mm_price)/this.mm_deal.qty;return e.round_float_2_decimal(i)}},t}])}),define("app/receipt_app/model",["angular","app/sp_app/model","app/payment_type_app/model","app/sale_app/model"],function(e){function n(e){return e==null?0:parseFloat(e)}var t=e.module("receipt_app/model",["sp_app/model","payment_type_app/model","sale_app/model","sp_app/model"]);t.factory("receipt_app/model/Receipt",["receipt_app/model/Tender_ln","receipt_app/model/Receipt_ln",function(e,t){function r(e,t,n,r,i,s){this.id=e,this.date=t,this.tax_rate=n,this.tender_ln_lst=r,this.receipt_ln_lst=i,this.doc_id=s}return r.prototype={constructor:r,get_total_non_cash_payment_type:function(){var e=0;for(var t=0;t<this.tender_ln_lst.length;t++)this.tender_ln_lst[t].pt!==null&&(e+=this.tender_ln_lst[t].amount);return e},get_change:function(){return this.get_tender()-this.get_otd_price()},get_tender:function(){var e=0;for(var t=0;t<this.tender_ln_lst.length;t++)e+=this.tender_ln_lst[t].amount;return e},get_saving:function(){var e=0,t=this.receipt_ln_lst;for(var n=0;n<t.length;n++)e+=t[n].get_saving()*t[n].qty;return e},get_genesis_price:function(){var e=0,t=this.receipt_ln_lst;for(var n=0;n<t.length;n++)e+=t[n].get_genesis_price()*t[n].qty;return e},get_advertise_price:function(){var e=0,t=this.receipt_ln_lst;for(var n=0;n<t.length;n++)e+=t[n].get_advertise_price()*t[n].qty;return e},get_crv:function(){var e=0,t=this.receipt_ln_lst;for(var n=0;n<t.length;n++)e+=t[n].get_crv()*t[n].qty;return e},_get_b4_tax_price:function(){var e=0,t=this.receipt_ln_lst;for(var n=0;n<t.length;n++)e+=t[n]._get_b4_tax_price()*t[n].qty;return e},get_buydown_tax:function(){var e=0,t=this.receipt_ln_lst;for(var n=0;n<t.length;n++)e+=t[n].get_buydown_tax(this.tax_rate)*t[n].qty;return e},get_product_tax:function(){var e=0,t=this.receipt_ln_lst;for(var n=0;n<t.length;n++)e+=t[n].get_product_tax(this.tax_rate)*t[n].qty;return e},get_otd_price:function(){var e=0,t=this.receipt_ln_lst;for(var n=0;n<t.length;n++)e+=t[n].get_otd_price(this.tax_rate)*t[n].qty;return e}},r.build=function(i){var s=i.receipt_ln_lst.map(t.build),o=i.tender_ln_lst.map(e.build);return new r(i.id,new Date(i.date),n(i.tax_rate),o,s,null)},r}]),t.factory("receipt_app/model/Receipt_ln",["sp_app/model/Store_product","sp_app/model/Non_inventory","receipt_app/model/Mix_match_deal_info_stamp","receipt_app/model/Store_product_stamp",function(e,t,r,i){function s(e,t,n,r,i,s,o,u,a){e!==null&&(i===null&&s!==null||i!==null&&s===null)&&alert("Receipt_ln model constructor raise error: store product information is not consistance"),this.id=e,this.qty=t,this.discount=n,this.override_price=r,this.store_product=i,this.store_product_stamp=s,this.mm_deal_info_stamp=o,this.non_inventory=u,this.date=a}return s.prototype={constructor:s,get_name:function(){return this.is_non_inventory()?this.non_inventory.name:this.store_product_stamp.name},is_non_inventory:function(){return this.store_product_stamp===null},get_cost:function(){return this.is_non_inventory()?this.non_inventory.cost:this.store_product_stamp.cost},get_crv:function(){return this.is_non_inventory()?this.non_inventory.crv:this.store_product_stamp.crv},get_is_taxable:function(){return this.is_non_inventory()?this.non_inventory.is_taxable:this.store_product_stamp.is_taxable},get_preset_price:function(){return this.is_non_inventory()?this.non_inventory.price:this.store_product_stamp.price},get_override_price:function(){return this.override_price},get_genesis_price:function(){return this.override_price!==null?this.override_price:this.get_preset_price()},get_mm_deal_info:function(){return this.mm_deal_info_stamp},get_discount:function(){return this.discount},get_buydown:function(){return this.is_non_inventory()?0:this.store_product_stamp.buydown},get_saving:function(){var e=0;return e+=this.get_discount(),e+=this.get_buydown(),this.get_mm_deal_info()!==null&&(e+=this.get_mm_deal_info().get_unit_discount()),e},get_advertise_price:function(){return this.get_genesis_price()-this.get_saving()},_get_b4_tax_price:function(){return this.get_advertise_price()+this.get_crv()},get_buydown_tax:function(e){var t=0;return this.get_is_taxable()&&(t=this.get_buydown()*e/100),t},get_product_tax:function(e){var t=0;return this.get_is_taxable()&&(t=this._get_b4_tax_price()*e/100),t},get_otd_price:function(e){return this._get_b4_tax_price()+this.get_product_tax(e)+this.get_buydown_tax(e)},get_line_total:function(e){var t=this.get_otd_price(e)*this.qty;return t}},s.build=function(o){var u=null;o.non_inventory_name!==null&&(u=new t(o.non_inventory_name,n(o.non_inventory_price),o.non_inventory_is_taxable,n(o.non_inventory_crv),n(o.non_inventory_cost)));var a=null;o.store_product!==null&&(a=e.build(o.store_product));var f=null;o.sp_stamp_name!==null&&(f=new i(null,null,null,o.sp_stamp_name,n(o.sp_stamp_price),n(o.sp_stamp_value_customer_price),n(o.sp_stamp_crv),o.sp_stamp_is_taxable,o.sp_stamp_is_sale_report,o.sp_stamp_p_type,o.sp_stamp_p_tag,n(o.sp_stamp_cost),o.sp_stamp_vendor,n(o.sp_stamp_buydown)));var l=null;return o.mm_deal_name!==null&&(l=new r(o.mm_deal_name,n(o.mm_deal_discount))),new s(o.id,n(o.qty),n(o.discount),o.override_price===null?null:n(o.override_price),a,f,l,u,new Date(o.date))},s}]),t.factory("receipt_app/model/Tender_ln",["payment_type_app/model/Payment_type",function(e){function t(e,t,n,r){this.id=e,this.pt=t,this.amount=n,this.name=r}return t.build=function(r){var i=null;return r.payment_type!==null&&(i=e.build(r.payment_type)),new t(r.id,i,n(r.amount),r.name)},t}]),t.factory("receipt_app/model/Mix_match_deal_info_stamp",[function(){function e(e,t){this.name=e,this.unit_discount=t}return e.prototype={constructor:e,get_name:function(){return this.name},get_unit_discount:function(){return this.unit_discount}},e}]),t.factory("receipt_app/model/Store_product_stamp",[function(){function e(e,t,n,r,i,s,o,u,a,f,l,c,h,p){this.sp_id=e,this.doc_id=t,this.offline_create_sku=n,this.name=r,this.price=i,this.value_customer_price=s,this.crv=o,this.is_taxable=u,this.is_sale_report=a,this.p_type=f,this.p_tag=l,this.cost=c,this.vendor=h,this.buydown=p}return e}])}),define("app/receipt_app/service/receipt_storage_adapter",["angular","app/receipt_app/model","app/sp_app/model","service/misc"],function(e){var t=e.module("receipt_app/service/receipt_storage_adapter",["receipt_app/model","sp_app/model","service/misc"]);t.factory("receipt_app/service/receipt_storage_adapter",["$rootScope","receipt_app/model/Receipt","receipt_app/model/Receipt_ln","receipt_app/model/Tender_ln","receipt_app/model/Mix_match_deal_info_stamp","receipt_app/model/Store_product_stamp","sp_app/model/Non_inventory","service/misc",function(e,t,n,r,i,s,o,u){function a(e){return e}function f(e){var t=null;return e!==null&&(t=new i(e.name,e.unit_discount)),t}function l(e){var t=null;return e!==null&&(t=new o(e.name,e.price,e.is_taxable,e.crv,e.cost)),t}function c(e){var t=null;return e!==null&&(t=new s(e.sp_id,e.doc_id,e.offline_create_sku,e.name,e.price,e.value_customer_price,e.crv,e.is_taxable,e.is_sale_report,e.p_type,e.p_tag,e.cost,e.vendor,e.buydown)),t}function h(e){var t=new n(e.id,e.qty,e.discount,e.override_price,null,c(e.store_product_stamp),f(e.mm_deal_info_stamp),l(e.non_inventory),new Date(e.date));return t}function p(t){var n=null;t.pt!==null&&(n=u.get_item_from_lst_base_on_id(t.pt.id,e.GLOBAL_SETTING.payment_type_lst));var i=new r(t.id,n,t.amount,t.name);return i}function d(e){var n=new t(e.id,new Date(e.date),e.tax_rate,e.tender_ln_lst.map(p),e.receipt_ln_lst.map(h),e._id);return n}function v(t){var n={id:t.id,date:t.date.toString(),tax_rate:t.tax_rate,tender_ln_lst:t.tender_ln_lst,receipt_ln_lst:t.receipt_ln_lst.map(a),d_type:e.GLOBAL_SETTING.receipt_document_type};return n}return{javascript_2_pouch:v,pouch_2_javascript:d}}])}),define("app/receipt_app/service/api_offline",["angular","service/db","app/receipt_app/service/receipt_storage_adapter"],function(e){var t=e.module("receipt_app/service/api_offline",["service/db","receipt_app/service/receipt_storage_adapter"]);t.factory("receipt_app/service/api_offline",["$q","$rootScope","service/db/get","service/db/is_pouch_exist","receipt_app/service/receipt_storage_adapter","blockUI",function(e,t,n,r,i,s){function o(){s.start("getting offline receipt ...");var o=e.defer();return r().then(function(e){if(!e)o.resolve(null),s.stop();else{var r=n();r.query("views/by_d_type",{key:t.GLOBAL_SETTING.receipt_document_type}).then(function(e){var t=[];for(var n=0;n<e.rows.length;n++)t.push(e.rows[n].value);o.resolve(t.map(i.pouch_2_javascript)),s.stop()},function(e){o.reject("Bug: get offline receipt has error"),s.stop()})}},function(e){o.reject(e),s.stop()}),o.promise}return{get_receipt_lst:o}}])}),define("app/receipt_app/service/push",["angular","app/receipt_app/service/api_offline","service/db"],function(e){var t=e.module("receipt_app/service/push",["receipt_app/service/api_offline","service/db"]);t.factory("receipt_app/service/push",["$http","$q","receipt_app/service/api_offline","service/db/remove_doc","service/db/download_product","blockUI",function(e,t,n,r,i,s){function o(e,n){var s=t.defer();if(e.length===0&&n.length===0)return s.resolve(!0),s.promise;var o=[];for(var u=0;u<e.length;u++)o.push(r(e[u]));for(var u=0;u<n.length;u++)o.push(r(n[u]));return t.all(o).then(function(){i(!1).then(function(e){s.resolve(e)},function(e){s.reject(e)})},function(e){d,efer.reject(e)}),s.promise}return function(){s.start("uploading receipts ...");var r=t.defer();return n.get_receipt_lst().then(function(t){t===null?(r.resolve(null),s.stop()):t.length===0?(r.resolve({number_receipt_push:0}),s.stop()):e({method:"POST",url:"/receipt/push",data:{receipt_lst:JSON.stringify(t)}}).then(function(e){var t=e.data.receipt_doc_id_lst,n=e.data.sp_doc_id_lst;o(t,n).then(function(e){var n=e;n.number_receipt_push=t.length,r.resolve(n),s.stop()},function(e){r.reject(e),s.stop()})},function(e){r.reject(e),s.stop()})},function(e){r.reject(e),s.stop()}),r.promise}}])}),define("service/date",["angular"],function(e){var t=e.module("service/date",[]);t.factory("service/date/get_timezone_offset",function(){return function(){return(new Date).getTimezoneOffset()/60}})}),define("app/receipt_app/service/api",["angular","service/date","app/receipt_app/model"],function(e){var t=e.module("receipt_app/service/api",["service/date","receipt_app/model"]);t.factory("receipt_app/service/api",["$http","$q","$filter","service/date/get_timezone_offset","receipt_app/model/Receipt",function(e,t,n,r,i){return{get_receipt_pagination:function(s,o,u,a){var f=t.defer(),l="M/d/yyyy";return e({url:"/receipt/get_receipt_pagination",method:"GET",params:{cur_page:u,receipt_per_page:a,from_date:n("date")(s,l),to_date:n("date")(o,l),time_zone_offset:r()}}).then(function(e){var t={};t.receipt_lst=e.data.receipt_lst.map(i.build),t.total=e.data.total,f.resolve(t)},function(e){f.reject(e)}),f.promise},get_receipt_by_range:function(s,o){var u=t.defer(),a="M/d/yyyy";return e({url:"/receipt/get_receipt_by_range",method:"GET",params:{from_date:n("date")(s,a),to_date:n("date")(o,a),time_zone_offset:r()}}).then(function(e){u.resolve(e.data.map(i.build))},function(e){return u.reject(e)}),u.promise},get_receipt_by_count:function(n){var r=t.defer();return e({url:"/receipt/get_receipt_by_count",method:"GET",params:{count:n}}).then(function(e){r.resolve(e.data.map(i.build))},function(e){r.reject(e)}),r.promise}}}])}),define("app/sale_app/service/sale_able_info_dlg",["angular","filter/filter","service/ui"],function(e){var t=e.module("sale_app/service/sale_able_info_dlg",["filter","service/ui"]);t.factory("sale_app/service/sale_able_info_dlg",["$modal","service/ui/prompt",function(t,n){return function(r,i){var s='<div id="sale_app/service/sale_able_info_dlg" class="modal-header"><h3>{{ds.get_name()}}</h3></div><div class="modal-body"><div class="form-horizontal"><div class="form-group"><label class="col-sm-5 control-label">regular price:</label><p id="sale_app/service/sale_able_info_dlg/preset_price" class="col-sm-7 form-control-static">{{ds.get_preset_price()|currency}}</p></div><div class="form-group"><label class="col-sm-5 control-label">override price:</label><p id="sale_app/service/sale_able_info_dlg/override_price" class="col-sm-7 form-control-static">{{ds.get_override_price() ? (ds.get_override_price()|currency) : \'None\'}} <button ng-show="is_enable_override_price" id="sale_app/service/sale_able_info_dlg/override_price_btn" ng-click="override_price()" class="btn btn-primary glyphicon glyphicon-pencil"></button><button ng-hide="ds.get_override_price()===null || !is_enable_override_price" id="sale_app/service/sale_able_info_dlg/remove_override_price_btn" ng-click="remove_override_price()" class="btn btn-danger glyphicon glyphicon-trash"></button></p></div><div ng-hide="ds.get_mm_deal_info()===null" class="form-group"><label id="sale_app/service/sale_able_info_dlg/mm_deal_name" class="col-sm-5 control-label">{{ds.get_mm_deal_info().get_name()}} (discount):</label><p id="sale_app/service/sale_able_info_dlg/mm_deal_unit_discount" class="col-sm-7 form-control-static">{{ds.get_mm_deal_info().get_unit_discount()|currency}}</p></div><div ng-hide="ds.get_buydown()===null || ds.get_buydown() === 0.0" class="form-group"><label class="col-sm-5 control-label">buydown (discount):</label><p id="sale_app/service/sale_able_info_dlg/buydown" class="col-sm-7 form-control-static">{{ds.get_buydown()|currency|not_show_zero}}</p></div><div class="form-group"><label class="col-sm-5 control-label">total discount price:</label><p id="sale_app/service/sale_able_info_dlg/advertise_price" class="col-sm-7 form-control-static"><mark>{{ds.get_advertise_price()|currency}}</mark></p></div><div class="form-group"><label class="col-sm-5 control-label">crv:</label><p id="sale_app/service/sale_able_info_dlg/crv" class="col-sm-7 form-control-static">{{ds.get_crv()|currency|not_show_zero}}</p></div><div ng-hide="ds.get_buydown() === null || ds.get_buydown() === 0.0" class="form-group"><label class="col-sm-5 control-label">buydown tax:</label><p id="sale_app/service/sale_able_info_dlg/buydown_tax" class="col-sm-7 form-control-static">{{ds.get_buydown_tax(GLOBAL_SETTING.tax_rate)|currency|not_show_zero}}</p></div><div class="form-group"><label class="col-sm-5 control-label">tax ({{tax_rate}}%) :</label><p id="sale_app/service/sale_able_info_dlg/tax" class="col-sm-7 form-control-static">{{ds.get_product_tax(GLOBAL_SETTING.tax_rate)|currency|not_show_zero}}</p></div><div class="form-group"><label class="col-sm-5 control-label">out the door $:</label><p id="sale_app/service/sale_able_info_dlg/otd_price" class="col-sm-7 form-control-static">{{ds.get_otd_price(GLOBAL_SETTING.tax_rate)|currency}}</p></div></div></div><div class="modal-footer"><button id= "sale_app/service/sale_able_info_dlg/cancel_btn" ng-click="cancel()" class="btn btn-warning">cancel</button><button ng-disabled="is_unchange()" ng-click="reset()" class="btn btn-primary">reset</button><button id="sale_app/service/sale_able_info_dlg/ok_btn" ng-disabled="is_unchange()" ng-click="ok()" class="btn btn-success">ok</button></div>',o=function(t,r,i,s,o,u){t.ds=e.copy(o),t.tax_rate=s.GLOBAL_SETTING.tax_rate,t.is_enable_override_price=u,t.remove_override_price=function(){t.ds.override_price=null},t.override_price=function(){n("one time override price",t.ds.override_price,!0,!0).then(function(e){t.ds.override_price=e})},t.reset=function(){e.copy(o,t.ds)},t.is_unchange=function(){return e.equals(o,t.ds)},t.ok=function(){r.close(t.ds)},t.cancel=function(){r.dismiss("_cancel_")}};o.$inject=["$scope","$modalInstance","$filter","$rootScope","ds_original","is_enable_override_price"];var u=t.open({template:s,controller:o,size:"md",resolve:{ds_original:function(){return r},is_enable_override_price:function(){return i}}});return u.result}}])}),define("app/receipt_app/service/report_new",["angular","app/receipt_app/service/push","app/receipt_app/service/api","service/ui","app/receipt_app/service/api_offline","app/sale_app/service/sale_able_info_dlg"],function(e){var t=e.module("receipt_app/service/report_new",["receipt_app/service/push","receipt_app/service/api","service/ui","receipt_app/service/api_offline","sale_app/service/sale_able_info_dlg"]);t.factory("receipt_app/service/report_new",["$modal","receipt_app/service/push","receipt_app/service/api","service/ui/alert","receipt_app/service/api_offline","sale_app/service/sale_able_info_dlg",function(e,t,n,r,i,s){return function(){var o='<table ng-hide="online_receipt_lst.length===0" class="table table-hover table-bordered table-condensed table-striped"><tr><th>time</th><th>total</th><th>info</th></tr><tr ng-repeat="online_receipt in online_receipt_lst | orderBy:\'-date\'"><td>{{online_receipt.date | date : \'M/d h:mm a\'}}</td><td>{{online_receipt.get_otd_price() | currency}}</td><td class="alncenter"><button class="btn glyphicon glyphicon-info-sign" ng-class="is_cur_online_receipt(online_receipt) ? \'btn-warning\' : \'btn-primary\'" ng-click="toogle_cur_online_receipt(online_receipt)"></button></td></tr></table><pre ng-show="online_receipt_lst.length===0">there is no receipt data</pre>',u='<table class="table table-hover table-bordered table-condensed table-striped"><tr><th>qty</th><th>product</th><th>price</th></tr><tr ng-repeat="receipt_ln in $parent.cur_online_receipt.receipt_ln_lst | orderBy:\'date\'"><td>{{receipt_ln.qty}}</td><td>{{receipt_ln.get_name()}}</td><td class="alncenter"><button ng-click="display_sale_able_info_dlg(receipt_ln)" class="btn btn-primary">{{receipt_ln.get_advertise_price() | currency}}</button></td></tr></table>',a='<div class="form-horizontal" ><div id="receipt_app/service/report/online/receipt_summary/subtotal_derivation" ng-hide="cur_online_receipt.get_saving()===0.0 && cur_online_receipt.get_crv()===0.0"><div class="form-group"><label class="col-xs-4 control-label">original price:</label><p id="receipt_app/service/report/online/receipt_summary/genesis_price" class="col-xs-8 form-control-static">{{cur_online_receipt.get_genesis_price()}}</p></div><div ng-hide="cur_online_receipt.get_saving()===0.0" class="form-group"><label class="col-xs-4 control-label">saving:</label><p id="receipt_app/service/report/online/receipt_summary/saving" class="col-xs-8 form-control-static">{{(cur_online_receipt.get_saving() * -1) | currency}}</p></div><div ng-hide="cur_online_receipt.get_crv()===0.0" class="form-group"><label class="col-xs-4 control-label">crv:</label><p id="receipt_app/service/report/online/receipt_summary/crv" class="col-xs-8 form-control-static">{{cur_online_receipt.get_crv()|currency}}</p></div><hr></div><div class="form-group"><label class="col-xs-4 control-label">subtotal:</label><p id="receipt_app/service/report/online/receipt_summary/subtotal" class="col-xs-8 form-control-static">{{cur_online_receipt._get_b4_tax_price()|currency}}</p></div><div ng-hide="cur_online_receipt.get_buydown_tax()===0.0" class="form-group"><label class="col-xs-4 control-label">buydown tax:</label><p id="receipt_app/service/report/online/receipt_summary/buydown_tax" class="col-xs-8 form-control-static">{{cur_online_receipt.get_buydown_tax()|currency}}</p></div><div class="form-group"><label class="col-xs-4 control-label">tax ({{cur_online_receipt.tax_rate}}%):</label><p id="receipt_app/service/report/online/receipt_summary/tax" class="col-xs-8 form-control-static">{{cur_online_receipt.get_product_tax()|currency}}</p></div><hr><div class="form-group"><label class="col-xs-4 control-label">total:</label><p id="receipt_app/service/report/receipt_summary/total" class="col-xs-8 form-control-static">{{cur_online_receipt.get_otd_price()|currency}}</p></div><div ng-repeat="tender_ln in cur_online_receipt.tender_ln_lst" class="form-group"><label ng-attr-id="receipt_app/service/report/online/receipt_summary/tender_lbl/{{tender_ln.pt === null ? \'null\' : tender_ln.pt.id}}" class="col-xs-4 control-label">{{tender_ln.name === null ? \'cash\' : tender_ln.pt.name}}:</label><p ng-attr-id="receipt_app/service/report/online/receipt_summary/tender_txt/{{tender_ln.pt === null ? \'null\' : tender_ln.pt.id}}" class="col-xs-8 form-control-static">{{(tender_ln.amount)|currency}}</p></div><hr><div class="form-group"><label class="col-xs-4 control-label">change:</label><p id="receipt_app/service/report/online/receipt_summary/change" class="col-xs-8 form-control-static">{{cur_online_receipt.get_change()|currency}}</p></div></div>',f='<div class="modal-header"><h3>Receipts</h3></div><div class="modal-body"><div><p ng-hide="is_internet_offline" class="input-group" id="receipt_app/serivce/report/control_panel"><input type="text" class="form-control" datepicker-popup="MM-dd-yyyy" ng-model="$parent.from_date" is-open="$parent.opened_from" close-text="close" datepicker-options="dateOptions"></input><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open_date_dlg($event,\'opened_from\')"><i class="glyphicon glyphicon-calendar"></i></button></span><input type="text" class="form-control" datepicker-popup="MM-dd-yyyy" ng-model="$parent.to_date" is-open="$parent.opened_to" close-text="close" datepicker-options="dateOptions"></input><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open_date_dlg($event,\'opened_to\')"><i class="glyphicon glyphicon-calendar"></i></button></span><span class="input-group-btn"><button ng-click="refresh_report()" ng-disabled="from_date==null||to_date==null" class="btn btn-primary"><i class="glyphicon glyphicon-refresh"></i></button></span><span class="input-group-btn"><button id="receipt_app/service/report/today_report_btn" ng-click="refresh_today_report()" class="btn btn-primary">today report</button></span></p><div><div id="receipt_app/service/report/master" class="col-xs-4">'+o+"</div>"+'<div id="receipt_app/service/report/detail" ng-hide="$parent.cur_online_receipt===null" class="col-xs-8">'+u+a+"</div>"+'<div class="clear"></div>'+"</div>"+"</div>"+"</div>"+'<div class="modal-footer">'+'<button id="receipt_app/service/report/print_btn" ng-hide="$parent.cur_online_receipt===null" class="btn btn-success" ng-click="print()">print</button>'+'<button id="receipt_app/service/report/exit_btn" class="btn btn-warning" ng-click="exit()">exit</button>'+"</div>",l=function(e,o){e.display_sale_able_info_dlg=function(e){s(e,!1)},e.toogle_cur_online_receipt=function(t){e.is_cur_online_receipt(t)?e.cur_online_receipt=null:e.cur_online_receipt=t},e.is_cur_online_receipt=function(t){return e.cur_online_receipt===null?!1:e.cur_online_receipt===t},e.open_date_dlg=function(t,n){t.preventDefault(),t.stopPropagation(),e[n]=!0},e.refresh_today_report=function(){e.from_date=new Date,e.to_date=new Date,e.refresh_report()},e.refresh_report=function(){n.get_receipt_by_range(e.from_date,e.to_date).then(function(t){e.online_receipt_lst=t},function(e){r(e)})},e.print=function(){var e=document.getElementById("receipt_app/service/report/detail").innerHTML,t=document.body.innerHTML,n=window.open("","_blank","width=300,height=300"),r='<link rel="stylesheet" type ="text/css" href="/static/css/bootstrap.css"><link rel="stylesheet" type ="text/css" href="/static/css/bootstrap-theme.css"><link rel="stylesheet" type ="text/css" href="/static/css/share.css">';n.document.open(),n.document.write("<html><head>"+r+'</head><body onload="window.print()">'+e+"</html>"),n.document.close()},e.exit=function(){o.dismiss("_cancel_")},e.cur_online_receipt=null,e.from_date=null,e.to_date=null,e.is_internet_offline=!1,t().then(function(){var t=15;n.get_receipt_by_count(t).then(function(t){e.online_receipt_lst=t},function(e){r(e)})},function(t){t.status===0?(e.is_internet_offline=!0,r("internet is disconnected. you can only access to offline receipt"),i.get_receipt_lst().then(function(t){t===null&&(t=[]),e.online_receipt_lst=t},function(e){r(e)})):r(t)})};l.$inject=["$scope","$modalInstance"],e.open({template:f,controller:l,size:"lg"})}}])}),define("app/report_app/service/report_dlg",["angular","app/receipt_app/service/api","app/receipt_app/service/push","service/ui"],function(e){var t=e.module("report_app/service/report_dlg",["receipt_app/service/api","receipt_app/service/push","service/ui"]);t.factory("report_app/service/report_dlg",["$modal","receipt_app/service/api","receipt_app/service/push","service/ui/alert",function(e,t,n,r){var i="TYPE_SALE_LIVE",s="TYPE_SALE_STAMP",o="TYPE_NON_REPORT_LIVE",u="TYPE_PAYMENT_TYPE";return function(){var a='<div class="row"><div class="col-lg-3"><div class="input-group"><input type="text" class="form-control" datepicker-popup="MM-dd-yyyy" ng-model="from_date" is-open="$parent.opened_from" close-text="close" datepicker-options="dateOptions"></input><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event,\'opened_from\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-lg-3"><div class="input-group"><input type="text" class="form-control" datepicker-popup="MM-dd-yyyy" ng-model="to_date" is-open="$parent.opened_to" close-text="close" datepicker-options="dateOptions"></input><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event,\'opened_to\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-lg-6"><div class="btn-toolbar"><div class="btn-group" dropdown is-open="status.isopen"><button type="button" class="btn btn-primary dropdown-toggle">{{report_type_2_string(cur_report_type)}} <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li class={{get_active_class(\'TYPE_SALE_STAMP\')}} ng-click="set_report_type(\'TYPE_SALE_STAMP\')"><a href="#">{{report_type_2_string(\'TYPE_SALE_STAMP\')}}</a></li><li class={{get_active_class(\'TYPE_SALE_LIVE\')}} ng-click="set_report_type(\'TYPE_SALE_LIVE\')"><a href="#">{{report_type_2_string(\'TYPE_SALE_LIVE\')}}</a></li><li class={{get_active_class(\'TYPE_NON_REPORT_LIVE\')}} ng-click="set_report_type(\'TYPE_NON_REPORT_LIVE\')"><a href="#">{{report_type_2_string(\'TYPE_NON_REPORT_LIVE\')}}</a></li><li class={{get_active_class(\'TYPE_PAYMENT_TYPE\')}} ng-click="set_report_type(\'TYPE_PAYMENT_TYPE\')"><a href="#">{{report_type_2_string(\'TYPE_PAYMENT_TYPE\')}}</a></li></ul></div><div class="btn-group"><button ng-disabled="from_date==null||to_date==null" ng-click="refresh_report()" class="btn btn-primary"><i class="glyphicon glyphicon-refresh"></i></button></div><div class="btn-group"><button ng-click="refresh_today_report()" class="btn btn-primary"><i class="glyphicon glyphicon-refresh"></i> today</button></div></div></div></div>',f='<div ng-hide="cur_report_type===\'TYPE_PAYMENT_TYPE\' || receipt_lst===null || receipt_lst.length === 0"><table class="table table-hover table-bordered table-condensed table-striped"><tr><th>type</th><th>tag</th><th>sub_total</th><th>total</th></tr><tr ng-repeat="report_item in get_type_tag_report_data()"><td>{{report_item.tag === null ? report_item.type : ""}}</td><td>{{report_item.tag}}</td><td>{{report_item.sub_total | currency}}</td><td>{{report_item.total | currency}}</td></tr></table></div>',l='<div ng-show="cur_report_type===\'TYPE_PAYMENT_TYPE\'"><table class="table table-hover table-bordered table-condensed table-striped"><tr><th>type</th><th>amount</th></tr><tr ng-repeat="report_item in payment_type_report_data"><td>{{report_item.pt === null ? \'cash\' : report_item.pt.name}}</td><td>{{report_item.amount | currency}}</td></tr></table></div>',c='<div class="modal-header"><h3>sale report</h3></div><div class="modal-body">'+a+f+l+'<div ng-show="receipt_lst !== null && receipt_lst.length === 0"><pre>there is no data in this range</pre></div>'+"</div>"+'<div class="modal-footer">'+'<button class="btn btn-warning" ng-click="exit()">exit</button>';"</div>";var h=function(e,a){function p(e,t,n,r,i){var s=null;t===null;for(var o=0;o<i.length;o++)if(i[o].type===e&&i[o].tag===t){s=o;break}s===null?i.push({type:e,tag:t,sub_total:n,total:r}):(n!==null&&(i[s].sub_total+=n),r!==null&&(i[s].total+=r))}function d(e,t){var n=null;for(var r=0;r<t.length;r++)if(t[r].type===e&&t[r].tag===null){n=t.splice(r,1)[0];break}return n}function v(e,t){return e.type===t.type?e.tag>t.tag:e.type>t.type}function m(e){var t=[],n=d(c,e);n!==null&&t.push(n);var r=d(h,e);r!==null&&t.push(r);var i=d(l,e);i!==null&&t.push(i);var s=d(f,e);s!==null&&t.push(s),e.sort(v);for(var o=0;o<e.length;o++)t.push(e[o]);return t}function g(t,n){var r=[];if(e.receipt_lst===null)return r;for(var i=0;i<e.receipt_lst.length;i++)for(var s=0;s<e.receipt_lst[i].receipt_ln_lst.length;s++){var o=e.receipt_lst[i].receipt_ln_lst[s],u=o.get_line_total(e.receipt_lst[i].tax_rate);if(!t)if(n===!1){if(o.is_non_inventory())continue;if(o.store_product.is_sale_report===!0)continue}else if(!o.is_non_inventory()&&o.store_product.is_sale_report===!1)continue;if(o.is_non_inventory())p(l,null,null,u,r);else{var a;t?o.store_product_stamp.is_taxable?a=c:a=h:o.store_product.is_taxable?a=c:a=h,p(a,null,null,u,r);var d,v;t?(d=o.store_product_stamp.p_type,v=o.store_product_stamp.p_tag):(d=o.store_product.p_type,v=o.store_product.p_tag),d!==null?(p(d,null,null,u,r),v!==null?p(d,v,u,null,r):p(d,f,u,null,r)):p(f,null,null,u,r)}}return m(r)}function y(e,t,n){var r=null;for(var i=0;i<n.length;i++){var s=n[i];if(s.pt===null&&e===null||s.pt!==null&&e!==null&&s.pt.id===e.id){r=s;break}}r===null?n.push({pt:e,amount:t}):r.amount+=t}function b(){var t=[];if(e.receipt_lst===null)return t;for(var n=0;n<e.receipt_lst.length;n++){var r=e.receipt_lst[n];for(var i=0;i<r.tender_ln_lst.length;i++){var s=r.tender_ln_lst[i],o=null;s.pt===null?o=r.get_otd_price()-r.get_total_non_cash_payment_type():o=s.amount,y(s.pt,o,t)}}return t}var f="undefined",l="non inventory",c="tax",h="non_tax";e.cur_report_type=s,e.from_date=null,e.to_date=null,e.receipt_lst=null,e.sale_live_report_data=[],e.sale_stamp_report_data=[],e.non_report_live_report_data=[],e.payment_type_report_data=[],n().then(function(){},function(e){r(e)}),e.refresh_report=function(){t.get_receipt_by_range(e.from_date,e.to_date).then(function(t){e.receipt_lst=t},function(e){r(e)})},e.report_type_2_string=function(e){if(e===i)return"report live";if(e===s)return"report stamp";if(e===o)return"no report";if(e===u)return"payment type"},e.refresh_today_report=function(){e.from_date=new Date,e.to_date=new Date,e.refresh_report()},e.open=function(t,n){t.preventDefault(),t.stopPropagation(),e[n]=!0},e.get_active_class=function(t){var n="";return t===e.cur_report_type&&(n="active"),n},e.set_report_type=function(t){e.cur_report_type=t},e.get_type_tag_report_data=function(){if(e.cur_report_type===i)return e.sale_live_report_data;if(e.cur_report_type===s)return e.sale_stamp_report_data;if(e.cur_report_type===o)return e.non_report_live_report_data},e.calculate_report=function(){e.sale_live_report_data=g(!1,!0),e.sale_stamp_report_data=g(!0,!0),e.non_report_live_report_data=g(!1,!1),e.payment_type_report_data=b()},e.$watchGroup([function(){return e.receipt_lst}],function(t,n,r){e.calculate_report()}),e.exit=function(){a.close()}};h.$inject=["$scope","$modalInstance"];var p=e.open({template:c,controller:h,size:"lg",backdrop:"static"})}}])}),define("service/menu",["angular","app/tax_app/service/edit","app/mix_match_app/service/manage","app/payment_type_app/service/manage","app/shortcut_app/service/manage","app/receipt_app/service/report_new","app/report_app/service/report_dlg","service/ui","app/receipt_app/service/push","service/db"],function(e){var t=e.module("service.menu",["tax_app/service/edit","mix_match_app/service/manage","payment_type_app/service/manage","shortcut_app/service/manage","receipt_app/service/report_new","report_app/service/report_dlg","service/ui","receipt_app/service/push","service/db"]);return t.controller("service.menu",["$scope","$window","$q","tax_app/service/edit","mix_match_app/service/manage","payment_type_app/service/manage","shortcut_app/service/manage","receipt_app/service/report_new","report_app/service/report_dlg","service/ui/confirm","service/ui/alert","receipt_app/service/push","service/db/download_product",function(e,t,n,r,i,s,o,u,a,f,l,c,h){e.menu_setting_mix_match=function(){i()},e.menu_setting_tax=function(){r()},e.menu_setting_payment_type=function(){s()},e.menu_setting_shortcut=function(){o()},e.menu_report_receipt=function(){u()},e.menu_report_sale=function(){a()},e.logout=function(){f("logout?","orange").then(function(){t.location.href="/account/logout/"})},e.menu_action_sync=function(){c().then(function(e){e===null?l("there is no offline database to sync"):e.number_receipt_push!==0?e.local!==e.remote&&e.local!==undefined&&e.remote!==undefined?l(response.remote-response.local+" products missing. please sync again."):l("receipt: "+e.number_receipt_push+", update product:"+e.docs_written+", total product:"+e.local,"info","green"):h(!1).then(function(e){e.local!==e.remote?l(e.remote-e.local+" products missing. please sync again."):l("receipt: 0, update product:"+e.docs_written+", total product:"+e.local,"info","green")},function(e){l(e)})},function(e){l(e)})}}]),t}),define("service/csrf",["angular"],function(e){e.module("service.csrf",[]).config(["$httpProvider",function(t){t.defaults.xsrfCookieName="csrftoken",t.defaults.xsrfHeaderName="X-CSRFToken",t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var n=function(e){var t="",r,i,s,o,u,a,f;for(r in e){i=e[r];if(i instanceof Array)for(f=0;f<i.length;++f)u=i[f],s=r+"["+f+"]",a={},a[s]=u,t+=n(a)+"&";else if(i instanceof Object)for(o in i)u=i[o],s=r+"["+o+"]",a={},a[s]=u,t+=n(a)+"&";else i!==undefined&&i!==null&&(t+=encodeURIComponent(r)+"="+encodeURIComponent(i)+"&")}return t.length?t.substr(0,t.length-1):t};t.defaults.transformRequest=[function(t){return e.isObject(t)&&String(t)!=="[object File]"?n(t):t}]}])}),define("service/init_global_setting",["angular","app/mix_match_app/model"],function(e){var t=e.module("service/init_global_setting",["mix_match_app/model"]);t.factory("service/init_global_setting",["$rootScope","$window","mix_match_app/model/Mix_match",function(e,t,n){return function(){e.GLOBAL_SETTING={store_id:t._STORE_ID_,tax_rate:t._TAX_RATE_,couch_server_url:t._COUCH_SERVER_URL_,store_db_prefix:t._STORE_DB_PREFIX_,mix_match_lst:t._MIX_MATCH_LST_.map(n.build),payment_type_lst:t._PAYMENT_TYPE_LST_,shortcut_lst:t._SHORTCUT_LST_,shortcut_row_count:t._SHORTCUT_ROW_COUNT_,shortcut_column_count:t._SHORTCUT_COLUMN_COUNT_,store_product_document_type:t._STORE_PRODUCT_DOCUMENT_TYPE_,receipt_document_type:t._RECEIPT_DOCUMENT_TYPE_},delete t._STORE_ID_,delete t._TAX_RATE_,delete t._COUCH_SERVER_URL_,delete t._STORE_DB_PREFIX_,delete t._MIX_MATCH_LST_,delete t._PAYMENT_TYPE_LST_,delete t._SHORTCUT_LST_,delete t._SHORTCUT_ROW_COUNT_,delete t._SHORTCUT_COLUMN_COUNT_,delete t._STORE_PRODUCT_DOCUMENT_TYPE_,delete t._RECEIPT_DOCUMENT_TYPE_}}])});var mod;mod=angular.module("infinite-scroll",[]),mod.directive("infiniteScroll",["$rootScope","$window","$timeout",function(e,t,n){return{link:function(r,i,s){var o,u,a,f;return t=angular.element(t),a=0,s.infiniteScrollDistance!=null&&r.$watch(s.infiniteScrollDistance,function(e){return a=parseInt(e,10)}),f=!0,o=!1,s.infiniteScrollDisabled!=null&&r.$watch(s.infiniteScrollDisabled,function(e){f=!e;if(f&&o)return o=!1,u()}),u=function(){var n,u,l,c;c=t.height()+t.scrollTop(),n=i.offset().top+i.height(),u=n-c,l=u<=t.height()*a;if(l&&f)return e.$$phase?r.$eval(s.infiniteScroll):r.$apply(s.infiniteScroll);if(l)return o=!0},t.on("scroll",u),r.$on("$destroy",function(){return t.off("scroll",u)}),n(function(){if(!s.infiniteScrollImmediateCheck)return u();if(r.$eval(s.infiniteScrollImmediateCheck))return u()},0)}}}]),define("infiniteScroll",["angular","jquery"],function(){}),define("app/sp_app/app",["angular","app/sp_app/controller","service/menu","ui_bootstrap","service/csrf","blockUI","service/init_global_setting","infiniteScroll"],function(e){var t=e.module("store_product_app",["ui.bootstrap","sp_app.controller","service.menu","service.csrf","blockUI","service/init_global_setting","infinite-scroll"]);t.config(["blockUIConfig",function(e){e.message="Please wait ..... ",e.autoBlock=!0,e.delay=0}]),t.run(["service/init_global_setting",function(e){e()}])}),requirejs.config({baseUrl:STATIC_URL+"js",paths:{app:"app",lib:"lib",service:"service",angular:["lib/angular_3_18"],ui_bootstrap:["lib/ui-bootstrap-tpls-0.11.0"],jquery:["lib/jquery-2.1.1"],ngTable:["lib/ng-table"],infiniteScroll:["lib/infinite-scroll"],pouchdb_raw:["lib/pouchdb-3.0.6"],blockUI:["lib/angular-block-ui"]},shim:{angular:{deps:["jquery"],exports:"angular"},ui_bootstrap:{deps:["angular"]},ngTable:{deps:["angular"]},blockUI:{deps:["angular"]},infiniteScroll:{deps:["angular","jquery"]}}}),require(["angular","app/sp_app/app"],function(e){e.element(document).ready(function(){e.bootstrap(document,["store_product_app"])})}),define("sp_main",function(){});