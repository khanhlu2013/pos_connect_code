{% extends 'base_regular_user.html' %}

{% block static %}
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
{% endblock %}


{% block content %}
    <script>

        $(function() {
            var lookup_type_tag = {{ lookup_type_tag|safe }};
            var type_lst = Object.keys(lookup_type_tag)

            $('#id_p_type').on('autocompletechange', function() {
                var tag_lst = lookup_type_tag[$(this).val()];
                $( "#id_p_tag" ).autocomplete({
                     source: tag_lst
                    ,minLength: 0
                })
                .bind('focus', function () {
                    $(this).autocomplete("search");
                });
            });

            $( "#id_p_type" ).autocomplete({
                 source: type_lst
                ,minLength: 0
            })
            .bind('focus', function () {
                $(this).autocomplete("search");
            });
        });
    </script> 

    <form method="post">
        {% csrf_token %}
        {% include 'store_product/store_product_form_snippet.html' %}
        
        {# SKU #}
        <div class="fieldWrapper">
            {{ form.sku_field.errors }}
            <label for="id_sku_field">Sku</label>
            {{ form.sku_field }}
        </div>
        
        <p>
            <input type="submit" value="ok" />
        </p>
    </form>

    <a href="{% url 'store_product:search_product' %}"><button>cancel</button></a>

{% endblock %}

